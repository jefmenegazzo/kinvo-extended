import{f as nd}from"./chunk-2SXCYY2B.js";import{$ as he,A as Ne,Aa as jt,B as _r,Ba as kh,Bc as Yh,C as vh,Ca as _n,Cc as Xh,D as Bo,Da as ut,Db as $h,Dc as Ir,Ec as Zh,Fa as Go,Fc as ed,Gc as wr,Hb as qh,J as qt,Ja as Nh,Jb as jh,K as pn,Kb as zh,L as gn,N as $o,O as mn,P as Ih,R as Fi,S as St,T as qo,U as wh,Ub as Gh,X as Eh,Xc as td,Y as Th,Ya as Oh,Z as je,_ as Ah,a as O,aa as Ce,b as le,bb as Ge,ca as ne,cb as xh,d as S,da as Sh,e as Oo,ea as bh,f as dh,fa as _e,fc as Ho,g as fh,ga as jo,gb as Wo,gc as Wh,h as ph,ha as ze,hb as Vh,hc as Kh,i as xo,ia as F,ic as Hh,j as Vo,ja as Qe,jc as Qo,k as Mo,ka as Rh,kc as Jo,l as Tt,lb as Mh,lc as Qh,m as Fe,ma as Ch,mb as Lh,mc as $i,n as gh,na as Ph,nb as Ko,o as mh,oa as Ui,p as At,pb as Fh,pc as qi,q as Lo,qa as yn,qb as Uh,r as Fo,s as Uo,sa as vr,sc as ji,t as De,ta as Je,u as L,ua as Bi,v as yr,w as yh,x as _h,xc as Jh,y as X,ya as zo,yb as Bh,z as Li,za as Dh}from"./chunk-7YRXW643.js";var U="primary",Mr=Symbol("RouteTitle"),ta=class{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){let t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}};function An(n){return new ta(n)}function Jg(n,e,t){let r=t.path.split("/");if(r.length>n.length||t.pathMatch==="full"&&(e.hasChildren()||r.length<n.length))return null;let i={};for(let o=0;o<r.length;o++){let a=r[o],u=n[o];if(a[0]===":")i[a.substring(1)]=u;else if(a!==u.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function Yg(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!Ye(n[t],e[t]))return!1;return!0}function Ye(n,e){let t=n?na(n):void 0,r=e?na(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let o=0;o<t.length;o++)if(i=t[o],!gd(n[i],e[i]))return!1;return!0}function na(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}function gd(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;let t=[...n].sort(),r=[...e].sort();return t.every((i,o)=>r[o]===i)}else return n===e}function md(n){return n.length>0?n[n.length-1]:null}function Ct(n){return yh(n)?n:Hh(n)?De(Promise.resolve(n)):L(n)}var Xg={exact:_d,subset:vd},yd={exact:Zg,subset:em,ignored:()=>!0};function rd(n,e,t){return Xg[t.paths](n.root,e.root,t.matrixParams)&&yd[t.queryParams](n.queryParams,e.queryParams)&&!(t.fragment==="exact"&&n.fragment!==e.fragment)}function Zg(n,e){return Ye(n,e)}function _d(n,e,t){if(!Gt(n.segments,e.segments)||!Wi(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(let r in e.children)if(!n.children[r]||!_d(n.children[r],e.children[r],t))return!1;return!0}function em(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>gd(n[t],e[t]))}function vd(n,e,t){return Id(n,e,e.segments,t)}function Id(n,e,t,r){if(n.segments.length>t.length){let i=n.segments.slice(0,t.length);return!(!Gt(i,t)||e.hasChildren()||!Wi(i,t,r))}else if(n.segments.length===t.length){if(!Gt(n.segments,t)||!Wi(n.segments,t,r))return!1;for(let i in e.children)if(!n.children[i]||!vd(n.children[i],e.children[i],r))return!1;return!0}else{let i=t.slice(0,n.segments.length),o=t.slice(n.segments.length);return!Gt(n.segments,i)||!Wi(n.segments,i,r)||!n.children[U]?!1:Id(n.children[U],e,o,r)}}function Wi(n,e,t){return e.every((r,i)=>yd[t](n[i].parameters,r.parameters))}var ht=class{constructor(e=new H([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap??=An(this.queryParams),this._queryParamMap}toString(){return rm.serialize(this)}},H=class{constructor(e,t){this.segments=e,this.children=t,this.parent=null,Object.values(t).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Ki(this)}},zt=class{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap??=An(this.parameters),this._parameterMap}toString(){return Ed(this)}};function tm(n,e){return Gt(n,e)&&n.every((t,r)=>Ye(t.parameters,e[r].parameters))}function Gt(n,e){return n.length!==e.length?!1:n.every((t,r)=>t.path===e[r].path)}function nm(n,e){let t=[];return Object.entries(n.children).forEach(([r,i])=>{r===U&&(t=t.concat(e(i,r)))}),Object.entries(n.children).forEach(([r,i])=>{r!==U&&(t=t.concat(e(i,r)))}),t}var Lr=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>new Sn,providedIn:"root"})}}return n})(),Sn=class{parse(e){let t=new ia(e);return new ht(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){let t=`/${Er(e.root,!0)}`,r=om(e.queryParams),i=typeof e.fragment=="string"?`#${im(e.fragment)}`:"";return`${t}${r}${i}`}},rm=new Sn;function Ki(n){return n.segments.map(e=>Ed(e)).join("/")}function Er(n,e){if(!n.hasChildren())return Ki(n);if(e){let t=n.children[U]?Er(n.children[U],!1):"",r=[];return Object.entries(n.children).forEach(([i,o])=>{i!==U&&r.push(`${i}:${Er(o,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}else{let t=nm(n,(r,i)=>i===U?[Er(n.children[U],!1)]:[`${i}:${Er(r,!1)}`]);return Object.keys(n.children).length===1&&n.children[U]!=null?`${Ki(n)}/${t[0]}`:`${Ki(n)}/(${t.join("//")})`}}function wd(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function zi(n){return wd(n).replace(/%3B/gi,";")}function im(n){return encodeURI(n)}function ra(n){return wd(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Hi(n){return decodeURIComponent(n)}function id(n){return Hi(n.replace(/\+/g,"%20"))}function Ed(n){return`${ra(n.path)}${sm(n.parameters)}`}function sm(n){return Object.entries(n).map(([e,t])=>`;${ra(e)}=${ra(t)}`).join("")}function om(n){let e=Object.entries(n).map(([t,r])=>Array.isArray(r)?r.map(i=>`${zi(t)}=${zi(i)}`).join("&"):`${zi(t)}=${zi(r)}`).filter(t=>t);return e.length?`?${e.join("&")}`:""}var am=/^[^\/()?;#]+/;function Yo(n){let e=n.match(am);return e?e[0]:""}var cm=/^[^\/()?;=#]+/;function um(n){let e=n.match(cm);return e?e[0]:""}var lm=/^[^=?&#]+/;function hm(n){let e=n.match(lm);return e?e[0]:""}var dm=/^[^&#]+/;function fm(n){let e=n.match(dm);return e?e[0]:""}var ia=class{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new H([],{}):new H([],this.parseChildren())}parseQueryParams(){let e={};if(this.consumeOptional("?"))do this.parseQueryParam(e);while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[U]=new H(e,t)),r}parseSegment(){let e=Yo(this.remaining);if(e===""&&this.peekStartsWith(";"))throw new Ce(4009,!1);return this.capture(e),new zt(Hi(e),this.parseMatrixParams())}parseMatrixParams(){let e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){let t=um(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let i=Yo(this.remaining);i&&(r=i,this.capture(r))}e[Hi(t)]=Hi(r)}parseQueryParam(e){let t=hm(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){let a=fm(this.remaining);a&&(r=a,this.capture(r))}let i=id(t),o=id(r);if(e.hasOwnProperty(i)){let a=e[i];Array.isArray(a)||(a=[a],e[i]=a),a.push(o)}else e[i]=o}parseParens(e){let t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let r=Yo(this.remaining),i=this.remaining[r.length];if(i!=="/"&&i!==")"&&i!==";")throw new Ce(4010,!1);let o;r.indexOf(":")>-1?(o=r.slice(0,r.indexOf(":")),this.capture(o),this.capture(":")):e&&(o=U);let a=this.parseChildren();t[o]=Object.keys(a).length===1?a[U]:new H([],a),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return this.peekStartsWith(e)?(this.remaining=this.remaining.substring(e.length),!0):!1}capture(e){if(!this.consumeOptional(e))throw new Ce(4011,!1)}};function Td(n){return n.segments.length>0?new H([],{[U]:n}):n}function Ad(n){let e={};for(let[r,i]of Object.entries(n.children)){let o=Ad(i);if(r===U&&o.segments.length===0&&o.hasChildren())for(let[a,u]of Object.entries(o.children))e[a]=u;else(o.segments.length>0||o.hasChildren())&&(e[r]=o)}let t=new H(n.segments,e);return pm(t)}function pm(n){if(n.numberOfChildren===1&&n.children[U]){let e=n.children[U];return new H(n.segments.concat(e.segments),e.children)}return n}function Wt(n){return n instanceof ht}function gm(n,e,t=null,r=null){let i=Sd(n);return bd(i,e,t,r)}function Sd(n){let e;function t(o){let a={};for(let l of o.children){let d=t(l);a[l.outlet]=d}let u=new H(o.url,a);return o===n&&(e=u),u}let r=t(n.root),i=Td(r);return e??i}function bd(n,e,t,r){let i=n;for(;i.parent;)i=i.parent;if(e.length===0)return Xo(i,i,i,t,r);let o=mm(e);if(o.toRoot())return Xo(i,i,new H([],{}),t,r);let a=ym(o,i,n),u=a.processChildren?Sr(a.segmentGroup,a.index,o.commands):Cd(a.segmentGroup,a.index,o.commands);return Xo(i,a.segmentGroup,u,t,r)}function Qi(n){return typeof n=="object"&&n!=null&&!n.outlets&&!n.segmentPath}function Cr(n){return typeof n=="object"&&n!=null&&n.outlets}function Xo(n,e,t,r,i){let o={};r&&Object.entries(r).forEach(([l,d])=>{o[l]=Array.isArray(d)?d.map(y=>`${y}`):`${d}`});let a;n===e?a=t:a=Rd(n,e,t);let u=Td(Ad(a));return new ht(u,o,i)}function Rd(n,e,t){let r={};return Object.entries(n.children).forEach(([i,o])=>{o===e?r[i]=t:r[i]=Rd(o,e,t)}),new H(n.segments,r)}var Ji=class{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&Qi(r[0]))throw new Ce(4003,!1);let i=r.find(Cr);if(i&&i!==md(r))throw new Ce(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function mm(n){if(typeof n[0]=="string"&&n.length===1&&n[0]==="/")return new Ji(!0,0,n);let e=0,t=!1,r=n.reduce((i,o,a)=>{if(typeof o=="object"&&o!=null){if(o.outlets){let u={};return Object.entries(o.outlets).forEach(([l,d])=>{u[l]=typeof d=="string"?d.split("/"):d}),[...i,{outlets:u}]}if(o.segmentPath)return[...i,o.segmentPath]}return typeof o!="string"?[...i,o]:a===0?(o.split("/").forEach((u,l)=>{l==0&&u==="."||(l==0&&u===""?t=!0:u===".."?e++:u!=""&&i.push(u))}),i):[...i,o]},[]);return new Ji(t,e,r)}var wn=class{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}};function ym(n,e,t){if(n.isAbsolute)return new wn(e,!0,0);if(!t)return new wn(e,!1,NaN);if(t.parent===null)return new wn(t,!0,0);let r=Qi(n.commands[0])?0:1,i=t.segments.length-1+r;return _m(t,i,n.numberOfDoubleDots)}function _m(n,e,t){let r=n,i=e,o=t;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Ce(4005,!1);i=r.segments.length}return new wn(r,!1,i-o)}function vm(n){return Cr(n[0])?n[0].outlets:{[U]:n}}function Cd(n,e,t){if(n??=new H([],{}),n.segments.length===0&&n.hasChildren())return Sr(n,e,t);let r=Im(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){let o=new H(n.segments.slice(0,r.pathIndex),{});return o.children[U]=new H(n.segments.slice(r.pathIndex),n.children),Sr(o,0,i)}else return r.match&&i.length===0?new H(n.segments,{}):r.match&&!n.hasChildren()?sa(n,e,t):r.match?Sr(n,0,i):sa(n,e,t)}function Sr(n,e,t){if(t.length===0)return new H(n.segments,{});{let r=vm(t),i={};if(Object.keys(r).some(o=>o!==U)&&n.children[U]&&n.numberOfChildren===1&&n.children[U].segments.length===0){let o=Sr(n.children[U],e,t);return new H(n.segments,o.children)}return Object.entries(r).forEach(([o,a])=>{typeof a=="string"&&(a=[a]),a!==null&&(i[o]=Cd(n.children[o],e,a))}),Object.entries(n.children).forEach(([o,a])=>{r[o]===void 0&&(i[o]=a)}),new H(n.segments,i)}}function Im(n,e,t){let r=0,i=e,o={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return o;let a=n.segments[i],u=t[r];if(Cr(u))break;let l=`${u}`,d=r<t.length-1?t[r+1]:null;if(i>0&&l===void 0)break;if(l&&d&&typeof d=="object"&&d.outlets===void 0){if(!od(l,d,a))return o;r+=2}else{if(!od(l,{},a))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}function sa(n,e,t){let r=n.segments.slice(0,e),i=0;for(;i<t.length;){let o=t[i];if(Cr(o)){let l=wm(o.outlets);return new H(r,l)}if(i===0&&Qi(t[0])){let l=n.segments[e];r.push(new zt(l.path,sd(t[0]))),i++;continue}let a=Cr(o)?o.outlets[U]:`${o}`,u=i<t.length-1?t[i+1]:null;a&&u&&Qi(u)?(r.push(new zt(a,sd(u))),i+=2):(r.push(new zt(a,{})),i++)}return new H(r,{})}function wm(n){let e={};return Object.entries(n).forEach(([t,r])=>{typeof r=="string"&&(r=[r]),r!==null&&(e[t]=sa(new H([],{}),0,r))}),e}function sd(n){let e={};return Object.entries(n).forEach(([t,r])=>e[t]=`${r}`),e}function od(n,e,t){return n==t.path&&Ye(e,t.parameters)}var br="imperative",de=function(n){return n[n.NavigationStart=0]="NavigationStart",n[n.NavigationEnd=1]="NavigationEnd",n[n.NavigationCancel=2]="NavigationCancel",n[n.NavigationError=3]="NavigationError",n[n.RoutesRecognized=4]="RoutesRecognized",n[n.ResolveStart=5]="ResolveStart",n[n.ResolveEnd=6]="ResolveEnd",n[n.GuardsCheckStart=7]="GuardsCheckStart",n[n.GuardsCheckEnd=8]="GuardsCheckEnd",n[n.RouteConfigLoadStart=9]="RouteConfigLoadStart",n[n.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",n[n.ChildActivationStart=11]="ChildActivationStart",n[n.ChildActivationEnd=12]="ChildActivationEnd",n[n.ActivationStart=13]="ActivationStart",n[n.ActivationEnd=14]="ActivationEnd",n[n.Scroll=15]="Scroll",n[n.NavigationSkipped=16]="NavigationSkipped",n}(de||{}),Ue=class{constructor(e,t){this.id=e,this.url=t}},bn=class extends Ue{constructor(e,t,r="imperative",i=null){super(e,t),this.type=de.NavigationStart,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},Ke=class extends Ue{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=de.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},xe=function(n){return n[n.Redirect=0]="Redirect",n[n.SupersededByNewNavigation=1]="SupersededByNewNavigation",n[n.NoDataFromResolver=2]="NoDataFromResolver",n[n.GuardRejected=3]="GuardRejected",n}(xe||{}),Yi=function(n){return n[n.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",n[n.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",n}(Yi||{}),lt=class extends Ue{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=de.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},bt=class extends Ue{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=de.NavigationSkipped}},Pr=class extends Ue{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=de.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},Xi=class extends Ue{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=de.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},oa=class extends Ue{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=de.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},aa=class extends Ue{constructor(e,t,r,i,o){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=o,this.type=de.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},ca=class extends Ue{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=de.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},ua=class extends Ue{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=de.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},la=class{constructor(e){this.route=e,this.type=de.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},ha=class{constructor(e){this.route=e,this.type=de.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},da=class{constructor(e){this.snapshot=e,this.type=de.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},fa=class{constructor(e){this.snapshot=e,this.type=de.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},pa=class{constructor(e){this.snapshot=e,this.type=de.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ga=class{constructor(e){this.snapshot=e,this.type=de.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Zi=class{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=de.Scroll}toString(){let e=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${e}')`}},Dr=class{},Rn=class{constructor(e,t){this.url=e,this.navigationBehaviorOptions=t}};function Em(n,e){return n.providers&&!n._injector&&(n._injector=Ko(n.providers,e,`Route: ${n.path}`)),n._injector??e}function We(n){return n.outlet||U}function Tm(n,e){let t=n.filter(r=>We(r)===e);return t.push(...n.filter(r=>We(r)!==e)),t}function Fr(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){let t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}var ma=class{get injector(){return Fr(this.route?.snapshot)??this.rootInjector}set injector(e){}constructor(e){this.rootInjector=e,this.outlet=null,this.route=null,this.children=new Ur(this.rootInjector),this.attachRef=null}},Ur=(()=>{class n{constructor(t){this.rootInjector=t,this.contexts=new Map}onChildOutletCreated(t,r){let i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){let r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){let t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new ma(this.rootInjector),this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}static{this.\u0275fac=function(r){return new(r||n)(ze(vr))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),es=class{constructor(e){this._root=e}get root(){return this._root.value}parent(e){let t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){let t=ya(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){let t=ya(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){let t=_a(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return _a(e,this._root).map(t=>t.value)}};function ya(n,e){if(n===e.value)return e;for(let t of e.children){let r=ya(n,t);if(r)return r}return null}function _a(n,e){if(n===e.value)return[e];for(let t of e.children){let r=_a(n,t);if(r.length)return r.unshift(e),r}return[]}var Oe=class{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}};function In(n){let e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}var ts=class extends es{constructor(e,t){super(e),this.snapshot=t,Ra(this,e)}toString(){return this.snapshot.toString()}};function Pd(n){let e=Am(n),t=new Fe([new zt("",{})]),r=new Fe({}),i=new Fe({}),o=new Fe({}),a=new Fe(""),u=new Rt(t,r,o,a,i,U,n,e.root);return u.snapshot=e.root,new ts(new Oe(u,[]),e)}function Am(n){let e={},t={},r={},i="",o=new En([],e,r,i,t,U,n,null,{});return new rs("",new Oe(o,[]))}var Rt=class{constructor(e,t,r,i,o,a,u,l){this.urlSubject=e,this.paramsSubject=t,this.queryParamsSubject=r,this.fragmentSubject=i,this.dataSubject=o,this.outlet=a,this.component=u,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(X(d=>d[Mr]))??L(void 0),this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(X(e=>An(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(X(e=>An(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function ns(n,e,t="emptyOnly"){let r,{routeConfig:i}=n;return e!==null&&(t==="always"||i?.path===""||!e.component&&!e.routeConfig?.loadComponent)?r={params:O(O({},e.params),n.params),data:O(O({},e.data),n.data),resolve:O(O(O(O({},n.data),e.data),i?.data),n._resolvedData)}:r={params:O({},n.params),data:O({},n.data),resolve:O(O({},n.data),n._resolvedData??{})},i&&kd(i)&&(r.resolve[Mr]=i.title),r}var En=class{get title(){return this.data?.[Mr]}constructor(e,t,r,i,o,a,u,l,d){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=o,this.outlet=a,this.component=u,this.routeConfig=l,this._resolve=d}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=An(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=An(this.queryParams),this._queryParamMap}toString(){let e=this.url.map(r=>r.toString()).join("/"),t=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${e}', path:'${t}')`}},rs=class extends es{constructor(e,t){super(t),this.url=e,Ra(this,t)}toString(){return Dd(this._root)}};function Ra(n,e){e.value._routerState=n,e.children.forEach(t=>Ra(n,t))}function Dd(n){let e=n.children.length>0?` { ${n.children.map(Dd).join(", ")} } `:"";return`${n.value}${e}`}function Zo(n){if(n.snapshot){let e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,Ye(e.queryParams,t.queryParams)||n.queryParamsSubject.next(t.queryParams),e.fragment!==t.fragment&&n.fragmentSubject.next(t.fragment),Ye(e.params,t.params)||n.paramsSubject.next(t.params),Yg(e.url,t.url)||n.urlSubject.next(t.url),Ye(e.data,t.data)||n.dataSubject.next(t.data)}else n.snapshot=n._futureSnapshot,n.dataSubject.next(n._futureSnapshot.data)}function va(n,e){let t=Ye(n.params,e.params)&&tm(n.url,e.url),r=!n.parent!=!e.parent;return t&&!r&&(!n.parent||va(n.parent,e.parent))}function kd(n){return typeof n.title=="string"||n.title===null}var Sm=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=U,this.activateEvents=new _n,this.deactivateEvents=new _n,this.attachEvents=new _n,this.detachEvents=new _n,this.parentContexts=F(Ur),this.location=F(Vh),this.changeDetector=F(qi),this.inputBinder=F(as,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(t){if(t.name){let{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Ce(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Ce(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Ce(4012,!1);this.location.detach();let t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){let t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new Ce(4013,!1);this._activatedRoute=t;let i=this.location,a=t.snapshot.component,u=this.parentContexts.getOrCreateContext(this.name).children,l=new Ia(t,u,i.injector);this.activated=i.createComponent(a,{index:i.length,injector:l,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275dir=Ui({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Bi]})}}return n})(),Ia=class n{__ngOutletInjector(e){return new n(this.route,this.childContexts,e)}constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Rt?this.route:e===Ur?this.childContexts:this.parent.get(e,t)}},as=new _e(""),ad=(()=>{class n{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(t){this.unsubscribeFromRouteData(t),this.subscribeToRouteData(t)}unsubscribeFromRouteData(t){this.outletDataSubscriptions.get(t)?.unsubscribe(),this.outletDataSubscriptions.delete(t)}subscribeToRouteData(t){let{activatedRoute:r}=t,i=Li([r.queryParams,r.params,r.data]).pipe(je(([o,a,u],l)=>(u=O(O(O({},o),a),u),l===0?L(u):Promise.resolve(u)))).subscribe(o=>{if(!t.isActivated||!t.activatedComponentRef||t.activatedRoute!==r||r.component===null){this.unsubscribeFromRouteData(t);return}let a=Jh(r.component);if(!a){this.unsubscribeFromRouteData(t);return}for(let{templateName:u}of a.inputs)t.activatedComponentRef.setInput(u,o[u])});this.outletDataSubscriptions.set(t,i)}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})();function bm(n,e,t){let r=kr(n,e._root,t?t._root:void 0);return new ts(r,e)}function kr(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){let r=t.value;r._futureSnapshot=e.value;let i=Rm(n,e,t);return new Oe(r,i)}else{if(n.shouldAttach(e.value)){let o=n.retrieve(e.value);if(o!==null){let a=o.route;return a.value._futureSnapshot=e.value,a.children=e.children.map(u=>kr(n,u)),a}}let r=Cm(e.value),i=e.children.map(o=>kr(n,o));return new Oe(r,i)}}function Rm(n,e,t){return e.children.map(r=>{for(let i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return kr(n,r,i);return kr(n,r)})}function Cm(n){return new Rt(new Fe(n.url),new Fe(n.params),new Fe(n.queryParams),new Fe(n.fragment),new Fe(n.data),n.outlet,n.component,n)}var Nr=class{constructor(e,t){this.redirectTo=e,this.navigationBehaviorOptions=t}},Nd="ngNavigationCancelingError";function is(n,e){let{redirectTo:t,navigationBehaviorOptions:r}=Wt(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=Od(!1,xe.Redirect);return i.url=t,i.navigationBehaviorOptions=r,i}function Od(n,e){let t=new Error(`NavigationCancelingError: ${n||""}`);return t[Nd]=!0,t.cancellationCode=e,t}function Pm(n){return xd(n)&&Wt(n.url)}function xd(n){return!!n&&n[Nd]}var Dm=(n,e,t,r)=>X(i=>(new wa(e,i.targetRouterState,i.currentRouterState,t,r).activate(n),i)),wa=class{constructor(e,t,r,i,o){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i,this.inputBindingEnabled=o}activate(e){let t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Zo(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){let i=In(t);e.children.forEach(o=>{let a=o.value.outlet;this.deactivateRoutes(o,i[a],r),delete i[a]}),Object.values(i).forEach(o=>{this.deactivateRouteAndItsChildren(o,r)})}deactivateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(i===o)if(i.component){let a=r.getContext(i.outlet);a&&this.deactivateChildRoutes(e,t,a.children)}else this.deactivateChildRoutes(e,t,r);else o&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=In(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);if(r&&r.outlet){let a=r.outlet.detach(),u=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:a,route:e,contexts:u})}}deactivateRouteAndOutlet(e,t){let r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,o=In(e);for(let a of Object.values(o))this.deactivateRouteAndItsChildren(a,i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,t,r){let i=In(t);e.children.forEach(o=>{this.activateRoutes(o,i[o.value.outlet],r),this.forwardEvent(new ga(o.value.snapshot))}),e.children.length&&this.forwardEvent(new fa(e.value.snapshot))}activateRoutes(e,t,r){let i=e.value,o=t?t.value:null;if(Zo(i),i===o)if(i.component){let a=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,a.children)}else this.activateChildRoutes(e,t,r);else if(i.component){let a=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let u=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),a.children.onOutletReAttached(u.contexts),a.attachRef=u.componentRef,a.route=u.route.value,a.outlet&&a.outlet.attach(u.componentRef,u.route.value),Zo(u.route.value),this.activateChildRoutes(e,null,a.children)}else a.attachRef=null,a.route=i,a.outlet&&a.outlet.activateWith(i,a.injector),this.activateChildRoutes(e,null,a.children)}else this.activateChildRoutes(e,null,r)}},ss=class{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}},Tn=class{constructor(e,t){this.component=e,this.route=t}};function km(n,e,t){let r=n._root,i=e?e._root:null;return Tr(r,i,t,[r.value])}function Nm(n){let e=n.routeConfig?n.routeConfig.canActivateChild:null;return!e||e.length===0?null:{node:n,guards:e}}function Pn(n,e){let t=Symbol(),r=e.get(n,t);return r===t?typeof n=="function"&&!bh(n)?n:e.get(n):r}function Tr(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=In(e);return n.children.forEach(a=>{Om(a,o[a.value.outlet],t,r.concat([a.value]),i),delete o[a.value.outlet]}),Object.entries(o).forEach(([a,u])=>Rr(u,t.getContext(a),i)),i}function Om(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){let o=n.value,a=e?e.value:null,u=t?t.getContext(n.value.outlet):null;if(a&&o.routeConfig===a.routeConfig){let l=xm(a,o,o.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new ss(r)):(o.data=a.data,o._resolvedData=a._resolvedData),o.component?Tr(n,e,u?u.children:null,r,i):Tr(n,e,t,r,i),l&&u&&u.outlet&&u.outlet.isActivated&&i.canDeactivateChecks.push(new Tn(u.outlet.component,a))}else a&&Rr(e,u,i),i.canActivateChecks.push(new ss(r)),o.component?Tr(n,null,u?u.children:null,r,i):Tr(n,null,t,r,i);return i}function xm(n,e,t){if(typeof t=="function")return t(n,e);switch(t){case"pathParamsChange":return!Gt(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Gt(n.url,e.url)||!Ye(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!va(n,e)||!Ye(n.queryParams,e.queryParams);case"paramsChange":default:return!va(n,e)}}function Rr(n,e,t){let r=In(n),i=n.value;Object.entries(r).forEach(([o,a])=>{i.component?e?Rr(a,e.children.getContext(o),t):Rr(a,null,t):Rr(a,e,t)}),i.component?e&&e.outlet&&e.outlet.isActivated?t.canDeactivateChecks.push(new Tn(e.outlet.component,i)):t.canDeactivateChecks.push(new Tn(null,i)):t.canDeactivateChecks.push(new Tn(null,i))}function Br(n){return typeof n=="function"}function Vm(n){return typeof n=="boolean"}function Mm(n){return n&&Br(n.canLoad)}function Lm(n){return n&&Br(n.canActivate)}function Fm(n){return n&&Br(n.canActivateChild)}function Um(n){return n&&Br(n.canDeactivate)}function Bm(n){return n&&Br(n.canMatch)}function Vd(n){return n instanceof _h||n?.name==="EmptyError"}var Gi=Symbol("INITIAL_VALUE");function Cn(){return je(n=>Li(n.map(e=>e.pipe(mn(1),Th(Gi)))).pipe(X(e=>{for(let t of e)if(t!==!0){if(t===Gi)return Gi;if(t===!1||$m(t))return t}return!0}),qt(e=>e!==Gi),mn(1)))}function $m(n){return Wt(n)||n instanceof Nr}function qm(n,e){return Ne(t=>{let{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:a}}=t;return a.length===0&&o.length===0?L(le(O({},t),{guardsResult:!0})):jm(a,r,i,n).pipe(Ne(u=>u&&Vm(u)?zm(r,o,n,e):L(u)),X(u=>le(O({},t),{guardsResult:u})))})}function jm(n,e,t,r){return De(n).pipe(Ne(i=>Qm(i.component,i.route,t,e,r)),St(i=>i!==!0,!0))}function zm(n,e,t,r){return De(e).pipe(gn(i=>vh(Wm(i.route.parent,r),Gm(i.route,r),Hm(n,i.path,t),Km(n,i.route,t))),St(i=>i!==!0,!0))}function Gm(n,e){return n!==null&&e&&e(new pa(n)),L(!0)}function Wm(n,e){return n!==null&&e&&e(new da(n)),L(!0)}function Km(n,e,t){let r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||r.length===0)return L(!0);let i=r.map(o=>Bo(()=>{let a=Fr(e)??t,u=Pn(o,a),l=Lm(u)?u.canActivate(e,n):Je(a,()=>u(e,n));return Ct(l).pipe(St())}));return L(i).pipe(Cn())}function Hm(n,e,t){let r=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(a=>Nm(a)).filter(a=>a!==null).map(a=>Bo(()=>{let u=a.guards.map(l=>{let d=Fr(a.node)??t,y=Pn(l,d),E=Fm(y)?y.canActivateChild(r,n):Je(d,()=>y(r,n));return Ct(E).pipe(St())});return L(u).pipe(Cn())}));return L(o).pipe(Cn())}function Qm(n,e,t,r,i){let o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||o.length===0)return L(!0);let a=o.map(u=>{let l=Fr(e)??i,d=Pn(u,l),y=Um(d)?d.canDeactivate(n,e,t,r):Je(l,()=>d(n,e,t,r));return Ct(y).pipe(St())});return L(a).pipe(Cn())}function Jm(n,e,t,r){let i=e.canLoad;if(i===void 0||i.length===0)return L(!0);let o=i.map(a=>{let u=Pn(a,n),l=Mm(u)?u.canLoad(e,t):Je(n,()=>u(e,t));return Ct(l)});return L(o).pipe(Cn(),Md(r))}function Md(n){return ph(he(e=>{if(typeof e!="boolean")throw is(n,e)}),X(e=>e===!0))}function Ym(n,e,t,r){let i=e.canMatch;if(!i||i.length===0)return L(!0);let o=i.map(a=>{let u=Pn(a,n),l=Bm(u)?u.canMatch(e,t):Je(n,()=>u(e,t));return Ct(l)});return L(o).pipe(Cn(),Md(r))}var Or=class{constructor(e){this.segmentGroup=e||null}},xr=class extends Error{constructor(e){super(),this.urlTree=e}};function vn(n){return yr(new Or(n))}function Xm(n){return yr(new Ce(4e3,!1))}function Zm(n){return yr(Od(!1,xe.GuardRejected))}var Ea=class{constructor(e,t){this.urlSerializer=e,this.urlTree=t}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),i.numberOfChildren===0)return L(r);if(i.numberOfChildren>1||!i.children[U])return Xm(`${e.redirectTo}`);i=i.children[U]}}applyRedirectCommands(e,t,r,i,o){if(typeof t!="string"){let u=t,{queryParams:l,fragment:d,routeConfig:y,url:E,outlet:b,params:D,data:k,title:V}=i,N=Je(o,()=>u({params:D,data:k,queryParams:l,fragment:d,routeConfig:y,url:E,outlet:b,title:V}));if(N instanceof ht)throw new xr(N);t=N}let a=this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r);if(t[0]==="/")throw new xr(a);return a}applyRedirectCreateUrlTree(e,t,r,i){let o=this.createSegmentGroup(e,t.root,r,i);return new ht(o,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){let r={};return Object.entries(e).forEach(([i,o])=>{if(typeof o=="string"&&o[0]===":"){let u=o.substring(1);r[i]=t[u]}else r[i]=o}),r}createSegmentGroup(e,t,r,i){let o=this.createSegments(e,t.segments,r,i),a={};return Object.entries(t.children).forEach(([u,l])=>{a[u]=this.createSegmentGroup(e,l,r,i)}),new H(o,a)}createSegments(e,t,r,i){return t.map(o=>o.path[0]===":"?this.findPosParam(e,o,i):this.findOrReturn(o,r))}findPosParam(e,t,r){let i=r[t.path.substring(1)];if(!i)throw new Ce(4001,!1);return i}findOrReturn(e,t){let r=0;for(let i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}},Ta={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function ey(n,e,t,r,i){let o=Ld(n,e,t);return o.matched?(r=Em(e,r),Ym(r,e,t,i).pipe(X(a=>a===!0?o:O({},Ta)))):L(o)}function Ld(n,e,t){if(e.path==="**")return ty(t);if(e.path==="")return e.pathMatch==="full"&&(n.hasChildren()||t.length>0)?O({},Ta):{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};let i=(e.matcher||Jg)(t,n,e);if(!i)return O({},Ta);let o={};Object.entries(i.posParams??{}).forEach(([u,l])=>{o[u]=l.path});let a=i.consumed.length>0?O(O({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:a,positionalParamSegments:i.posParams??{}}}function ty(n){return{matched:!0,parameters:n.length>0?md(n).parameters:{},consumedSegments:n,remainingSegments:[],positionalParamSegments:{}}}function cd(n,e,t,r){return t.length>0&&iy(n,t,r)?{segmentGroup:new H(e,ry(r,new H(t,n.children))),slicedSegments:[]}:t.length===0&&sy(n,t,r)?{segmentGroup:new H(n.segments,ny(n,t,r,n.children)),slicedSegments:t}:{segmentGroup:new H(n.segments,n.children),slicedSegments:t}}function ny(n,e,t,r){let i={};for(let o of t)if(cs(n,e,o)&&!r[We(o)]){let a=new H([],{});i[We(o)]=a}return O(O({},r),i)}function ry(n,e){let t={};t[U]=e;for(let r of n)if(r.path===""&&We(r)!==U){let i=new H([],{});t[We(r)]=i}return t}function iy(n,e,t){return t.some(r=>cs(n,e,r)&&We(r)!==U)}function sy(n,e,t){return t.some(r=>cs(n,e,r))}function cs(n,e,t){return(n.hasChildren()||e.length>0)&&t.pathMatch==="full"?!1:t.path===""}function oy(n,e,t){return e.length===0&&!n.children[t]}var Aa=class{};function ay(n,e,t,r,i,o,a="emptyOnly"){return new Sa(n,e,t,r,i,a,o).recognize()}var cy=31,Sa=class{constructor(e,t,r,i,o,a,u){this.injector=e,this.configLoader=t,this.rootComponentType=r,this.config=i,this.urlTree=o,this.paramsInheritanceStrategy=a,this.urlSerializer=u,this.applyRedirects=new Ea(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(e){return new Ce(4002,`'${e.segmentGroup}'`)}recognize(){let e=cd(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(e).pipe(X(({children:t,rootSnapshot:r})=>{let i=new Oe(r,t),o=new rs("",i),a=gm(r,[],this.urlTree.queryParams,this.urlTree.fragment);return a.queryParams=this.urlTree.queryParams,o.url=this.urlSerializer.serialize(a),{state:o,tree:a}}))}match(e){let t=new En([],Object.freeze({}),Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,Object.freeze({}),U,this.rootComponentType,null,{});return this.processSegmentGroup(this.injector,this.config,e,U,t).pipe(X(r=>({children:r,rootSnapshot:t})),pn(r=>{if(r instanceof xr)return this.urlTree=r.urlTree,this.match(r.urlTree.root);throw r instanceof Or?this.noMatchError(r):r}))}processSegmentGroup(e,t,r,i,o){return r.segments.length===0&&r.hasChildren()?this.processChildren(e,t,r,o):this.processSegment(e,t,r,r.segments,i,!0,o).pipe(X(a=>a instanceof Oe?[a]:[]))}processChildren(e,t,r,i){let o=[];for(let a of Object.keys(r.children))a==="primary"?o.unshift(a):o.push(a);return De(o).pipe(gn(a=>{let u=r.children[a],l=Tm(t,a);return this.processSegmentGroup(e,l,u,a,i)}),Eh((a,u)=>(a.push(...u),a)),$o(null),wh(),Ne(a=>{if(a===null)return vn(r);let u=Fd(a);return uy(u),L(u)}))}processSegment(e,t,r,i,o,a,u){return De(t).pipe(gn(l=>this.processSegmentAgainstRoute(l._injector??e,t,l,r,i,o,a,u).pipe(pn(d=>{if(d instanceof Or)return L(null);throw d}))),St(l=>!!l),pn(l=>{if(Vd(l))return oy(r,i,o)?L(new Aa):vn(r);throw l}))}processSegmentAgainstRoute(e,t,r,i,o,a,u,l){return We(r)!==a&&(a===U||!cs(i,o,r))?vn(i):r.redirectTo===void 0?this.matchSegmentAgainstRoute(e,i,r,o,a,l):this.allowRedirects&&u?this.expandSegmentAgainstRouteUsingRedirect(e,i,t,r,o,a,l):vn(i)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,o,a,u){let{matched:l,parameters:d,consumedSegments:y,positionalParamSegments:E,remainingSegments:b}=Ld(t,i,o);if(!l)return vn(t);typeof i.redirectTo=="string"&&i.redirectTo[0]==="/"&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>cy&&(this.allowRedirects=!1));let D=new En(o,d,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,ud(i),We(i),i.component??i._loadedComponent??null,i,ld(i)),k=ns(D,u,this.paramsInheritanceStrategy);D.params=Object.freeze(k.params),D.data=Object.freeze(k.data);let V=this.applyRedirects.applyRedirectCommands(y,i.redirectTo,E,D,e);return this.applyRedirects.lineralizeSegments(i,V).pipe(Ne(N=>this.processSegment(e,r,t,N.concat(b),a,!1,u)))}matchSegmentAgainstRoute(e,t,r,i,o,a){let u=ey(t,r,i,e,this.urlSerializer);return r.path==="**"&&(t.children={}),u.pipe(je(l=>l.matched?(e=r._injector??e,this.getChildConfig(e,r,i).pipe(je(({routes:d})=>{let y=r._loadedInjector??e,{parameters:E,consumedSegments:b,remainingSegments:D}=l,k=new En(b,E,Object.freeze(O({},this.urlTree.queryParams)),this.urlTree.fragment,ud(r),We(r),r.component??r._loadedComponent??null,r,ld(r)),V=ns(k,a,this.paramsInheritanceStrategy);k.params=Object.freeze(V.params),k.data=Object.freeze(V.data);let{segmentGroup:N,slicedSegments:G}=cd(t,b,D,d);if(G.length===0&&N.hasChildren())return this.processChildren(y,d,N,k).pipe(X(K=>new Oe(k,K)));if(d.length===0&&G.length===0)return L(new Oe(k,[]));let Q=We(r)===o;return this.processSegment(y,d,N,G,Q?U:o,!0,k).pipe(X(K=>new Oe(k,K instanceof Oe?[K]:[])))}))):vn(t)))}getChildConfig(e,t,r){return t.children?L({routes:t.children,injector:e}):t.loadChildren?t._loadedRoutes!==void 0?L({routes:t._loadedRoutes,injector:t._loadedInjector}):Jm(e,t,r,this.urlSerializer).pipe(Ne(i=>i?this.configLoader.loadChildren(e,t).pipe(he(o=>{t._loadedRoutes=o.routes,t._loadedInjector=o.injector})):Zm(t))):L({routes:[],injector:e})}};function uy(n){n.sort((e,t)=>e.value.outlet===U?-1:t.value.outlet===U?1:e.value.outlet.localeCompare(t.value.outlet))}function ly(n){let e=n.value.routeConfig;return e&&e.path===""}function Fd(n){let e=[],t=new Set;for(let r of n){if(!ly(r)){e.push(r);continue}let i=e.find(o=>r.value.routeConfig===o.value.routeConfig);i!==void 0?(i.children.push(...r.children),t.add(i)):e.push(r)}for(let r of t){let i=Fd(r.children);e.push(new Oe(r.value,i))}return e.filter(r=>!t.has(r))}function ud(n){return n.data||{}}function ld(n){return n.resolve||{}}function hy(n,e,t,r,i,o){return Ne(a=>ay(n,e,t,r,a.extractedUrl,i,o).pipe(X(({state:u,tree:l})=>le(O({},a),{targetSnapshot:u,urlAfterRedirects:l}))))}function dy(n,e){return Ne(t=>{let{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return L(t);let o=new Set(i.map(l=>l.route)),a=new Set;for(let l of o)if(!a.has(l))for(let d of Ud(l))a.add(d);let u=0;return De(a).pipe(gn(l=>o.has(l)?fy(l,r,n,e):(l.data=ns(l,l.parent,n).resolve,L(void 0))),he(()=>u++),qo(1),Ne(l=>u===a.size?L(t):At))})}function Ud(n){let e=n.children.map(t=>Ud(t)).flat();return[n,...e]}function fy(n,e,t,r){let i=n.routeConfig,o=n._resolve;return i?.title!==void 0&&!kd(i)&&(o[Mr]=i.title),py(o,n,e,r).pipe(X(a=>(n._resolvedData=a,n.data=ns(n,n.parent,t).resolve,null)))}function py(n,e,t,r){let i=na(n);if(i.length===0)return L({});let o={};return De(i).pipe(Ne(a=>gy(n[a],e,t,r).pipe(St(),he(u=>{if(u instanceof Nr)throw is(new Sn,u);o[a]=u}))),qo(1),Ih(o),pn(a=>Vd(a)?At:yr(a)))}function gy(n,e,t,r){let i=Fr(e)??r,o=Pn(n,i),a=o.resolve?o.resolve(e,t):Je(i,()=>o(e,t));return Ct(a)}function ea(n){return je(e=>{let t=n(e);return t?De(t).pipe(X(()=>e)):L(e)})}var Bd=(()=>{class n{buildTitle(t){let r,i=t.root;for(;i!==void 0;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(o=>o.outlet===U);return r}getResolvedTitleForRoute(t){return t.data[Mr]}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>F(my),providedIn:"root"})}}return n})(),my=(()=>{class n extends Bd{constructor(t){super(),this.title=t}updateTitle(t){let r=this.buildTitle(t);r!==void 0&&this.title.setTitle(r)}static{this.\u0275fac=function(r){return new(r||n)(ze(nd))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),$r=new _e("",{providedIn:"root",factory:()=>({})}),yy=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275cmp=Ch({type:n,selectors:[["ng-component"]],standalone:!0,features:[Gh],decls:1,vars:0,template:function(r,i){r&1&&Bh(0,"router-outlet")},dependencies:[Sm],encapsulation:2})}}return n})();function Ca(n){let e=n.children&&n.children.map(Ca),t=e?le(O({},n),{children:e}):O({},n);return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==U&&(t.component=yy),t}var Vr=new _e(""),Pa=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=F($i)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return L(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);let r=Ct(t.loadComponent()).pipe(X($d),he(o=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=o}),Fi(()=>{this.componentLoaders.delete(t)})),i=new Mo(r,()=>new Tt).pipe(Vo());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return L({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);let o=_y(r,this.compiler,t,this.onLoadEndListener).pipe(Fi(()=>{this.childrenLoaders.delete(r)})),a=new Mo(o,()=>new Tt).pipe(Vo());return this.childrenLoaders.set(r,a),a}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function _y(n,e,t,r){return Ct(n.loadChildren()).pipe(X($d),Ne(i=>i instanceof Lh||Array.isArray(i)?L(i):De(e.compileModuleAsync(i))),X(i=>{r&&r(n);let o,a,u=!1;return Array.isArray(i)?(a=i,u=!0):(o=i.create(t).injector,a=o.get(Vr,[],{optional:!0,self:!0}).flat()),{routes:a.map(Ca),injector:o}}))}function vy(n){return n&&typeof n=="object"&&"default"in n}function $d(n){return vy(n)?n.default:n}var Da=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>F(Iy),providedIn:"root"})}}return n})(),Iy=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),qd=new _e(""),jd=new _e("");function wy(n,e,t){let r=n.get(jd),i=n.get(Yh);return n.get(ut).runOutsideAngular(()=>{if(!i.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(d=>setTimeout(d));let o,a=new Promise(d=>{o=d}),u=i.startViewTransition(()=>(o(),Ey(n))),{onViewTransitionCreated:l}=r;return l&&Je(n,()=>l({transition:u,from:e,to:t})),a})}function Ey(n){return new Promise(e=>{Fh({read:()=>setTimeout(e)},{injector:n})})}var Ty=new _e(""),ka=(()=>{class n{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new Tt,this.transitionAbortSubject=new Tt,this.configLoader=F(Pa),this.environmentInjector=F(vr),this.urlSerializer=F(Lr),this.rootContexts=F(Ur),this.location=F(wr),this.inputBindingEnabled=F(as,{optional:!0})!==null,this.titleStrategy=F(Bd),this.options=F($r,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=F(Da),this.createViewTransition=F(qd,{optional:!0}),this.navigationErrorHandler=F(Ty,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>L(void 0),this.rootComponentType=null;let t=i=>this.events.next(new la(i)),r=i=>this.events.next(new ha(i));this.configLoader.onLoadEndListener=r,this.configLoader.onLoadStartListener=t}complete(){this.transitions?.complete()}handleNavigationRequest(t){let r=++this.navigationId;this.transitions?.next(le(O(O({},this.transitions.value),t),{id:r}))}setupNavigations(t,r,i){return this.transitions=new Fe({id:0,currentUrlTree:r,currentRawUrl:r,extractedUrl:this.urlHandlingStrategy.extract(r),urlAfterRedirects:this.urlHandlingStrategy.extract(r),rawUrl:r,extras:{},resolve:()=>{},reject:()=>{},promise:Promise.resolve(!0),source:br,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(qt(o=>o.id!==0),X(o=>le(O({},o),{extractedUrl:this.urlHandlingStrategy.extract(o.rawUrl)})),je(o=>{let a=!1,u=!1;return L(o).pipe(je(l=>{if(this.navigationId>o.id)return this.cancelNavigationTransition(o,"",xe.SupersededByNewNavigation),At;this.currentTransition=o,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,targetBrowserUrl:typeof l.extras.browserUrl=="string"?this.urlSerializer.parse(l.extras.browserUrl):l.extras.browserUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?le(O({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let d=!t.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),y=l.extras.onSameUrlNavigation??t.onSameUrlNavigation;if(!d&&y!=="reload"){let E="";return this.events.next(new bt(l.id,this.urlSerializer.serialize(l.rawUrl),E,Yi.IgnoredSameUrlNavigation)),l.resolve(!1),At}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return L(l).pipe(je(E=>{let b=this.transitions?.getValue();return this.events.next(new bn(E.id,this.urlSerializer.serialize(E.extractedUrl),E.source,E.restoredState)),b!==this.transitions?.getValue()?At:Promise.resolve(E)}),hy(this.environmentInjector,this.configLoader,this.rootComponentType,t.config,this.urlSerializer,this.paramsInheritanceStrategy),he(E=>{o.targetSnapshot=E.targetSnapshot,o.urlAfterRedirects=E.urlAfterRedirects,this.currentNavigation=le(O({},this.currentNavigation),{finalUrl:E.urlAfterRedirects});let b=new Xi(E.id,this.urlSerializer.serialize(E.extractedUrl),this.urlSerializer.serialize(E.urlAfterRedirects),E.targetSnapshot);this.events.next(b)}));if(d&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:E,extractedUrl:b,source:D,restoredState:k,extras:V}=l,N=new bn(E,this.urlSerializer.serialize(b),D,k);this.events.next(N);let G=Pd(this.rootComponentType).snapshot;return this.currentTransition=o=le(O({},l),{targetSnapshot:G,urlAfterRedirects:b,extras:le(O({},V),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=b,L(o)}else{let E="";return this.events.next(new bt(l.id,this.urlSerializer.serialize(l.extractedUrl),E,Yi.IgnoredByUrlHandlingStrategy)),l.resolve(!1),At}}),he(l=>{let d=new oa(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(d)}),X(l=>(this.currentTransition=o=le(O({},l),{guards:km(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),o)),qm(this.environmentInjector,l=>this.events.next(l)),he(l=>{if(o.guardsResult=l.guardsResult,l.guardsResult&&typeof l.guardsResult!="boolean")throw is(this.urlSerializer,l.guardsResult);let d=new aa(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(d)}),qt(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",xe.GuardRejected),!1)),ea(l=>{if(l.guards.canActivateChecks.length)return L(l).pipe(he(d=>{let y=new ca(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(y)}),je(d=>{let y=!1;return L(d).pipe(dy(this.paramsInheritanceStrategy,this.environmentInjector),he({next:()=>y=!0,complete:()=>{y||this.cancelNavigationTransition(d,"",xe.NoDataFromResolver)}}))}),he(d=>{let y=new ua(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(y)}))}),ea(l=>{let d=y=>{let E=[];y.routeConfig?.loadComponent&&!y.routeConfig._loadedComponent&&E.push(this.configLoader.loadComponent(y.routeConfig).pipe(he(b=>{y.component=b}),X(()=>{})));for(let b of y.children)E.push(...d(b));return E};return Li(d(l.targetSnapshot.root)).pipe($o(null),mn(1))}),ea(()=>this.afterPreactivation()),je(()=>{let{currentSnapshot:l,targetSnapshot:d}=o,y=this.createViewTransition?.(this.environmentInjector,l.root,d.root);return y?De(y).pipe(X(()=>o)):L(o)}),X(l=>{let d=bm(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=o=le(O({},l),{targetRouterState:d}),this.currentNavigation.targetRouterState=d,o}),he(()=>{this.events.next(new Dr)}),Dm(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),mn(1),he({next:l=>{a=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new Ke(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{a=!0}}),Ah(this.transitionAbortSubject.pipe(he(l=>{throw l}))),Fi(()=>{!a&&!u&&this.cancelNavigationTransition(o,"",xe.SupersededByNewNavigation),this.currentTransition?.id===o.id&&(this.currentNavigation=null,this.currentTransition=null)}),pn(l=>{if(u=!0,xd(l))this.events.next(new lt(o.id,this.urlSerializer.serialize(o.extractedUrl),l.message,l.cancellationCode)),Pm(l)?this.events.next(new Rn(l.url,l.navigationBehaviorOptions)):o.resolve(!1);else{let d=new Pr(o.id,this.urlSerializer.serialize(o.extractedUrl),l,o.targetSnapshot??void 0);try{let y=Je(this.environmentInjector,()=>this.navigationErrorHandler?.(d));if(y instanceof Nr){let{message:E,cancellationCode:b}=is(this.urlSerializer,y);this.events.next(new lt(o.id,this.urlSerializer.serialize(o.extractedUrl),E,b)),this.events.next(new Rn(y.redirectTo,y.navigationBehaviorOptions))}else{this.events.next(d);let E=t.errorHandler(l);o.resolve(!!E)}}catch(y){this.options.resolveNavigationPromiseOnError?o.resolve(!1):o.reject(y)}}return At}))}))}cancelNavigationTransition(t,r,i){let o=new lt(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(o),t.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){let t=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=this.currentNavigation?.targetBrowserUrl??this.currentNavigation?.extractedUrl;return t.toString()!==r?.toString()&&!this.currentNavigation?.extras.skipLocationChange}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Ay(n){return n!==br}var Sy=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>F(by),providedIn:"root"})}}return n})(),ba=class{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}},by=(()=>{class n extends ba{static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=zo(n)))(i||n)}})()}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),zd=(()=>{class n{static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:()=>F(Ry),providedIn:"root"})}}return n})(),Ry=(()=>{class n extends zd{constructor(){super(...arguments),this.location=F(wr),this.urlSerializer=F(Lr),this.options=F($r,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=F(Da),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new ht,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Pd(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(t){return this.location.subscribe(r=>{r.type==="popstate"&&t(r.url,r.state)})}handleRouterEvent(t,r){if(t instanceof bn)this.stateMemento=this.createStateMemento();else if(t instanceof bt)this.rawUrlTree=r.initialUrl;else if(t instanceof Xi){if(this.urlUpdateStrategy==="eager"&&!r.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl);this.setBrowserUrl(r.targetBrowserUrl??i,r)}}else t instanceof Dr?(this.currentUrlTree=r.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(r.finalUrl,r.initialUrl),this.routerState=r.targetRouterState,this.urlUpdateStrategy==="deferred"&&!r.extras.skipLocationChange&&this.setBrowserUrl(r.targetBrowserUrl??this.rawUrlTree,r)):t instanceof lt&&(t.code===xe.GuardRejected||t.code===xe.NoDataFromResolver)?this.restoreHistory(r):t instanceof Pr?this.restoreHistory(r,!0):t instanceof Ke&&(this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId)}setBrowserUrl(t,r){let i=t instanceof ht?this.urlSerializer.serialize(t):t;if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){let o=this.browserPageId,a=O(O({},r.extras.state),this.generateNgRouterState(r.id,o));this.location.replaceState(i,"",a)}else{let o=O(O({},r.extras.state),this.generateNgRouterState(r.id,this.browserPageId+1));this.location.go(i,"",o)}}restoreHistory(t,r=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,o=this.currentPageId-i;o!==0?this.location.historyGo(o):this.currentUrlTree===t.finalUrl&&o===0&&(this.resetState(t),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return this.canceledNavigationResolution==="computed"?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}static{this.\u0275fac=(()=>{let t;return function(i){return(t||(t=zo(n)))(i||n)}})()}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Ar=function(n){return n[n.COMPLETE=0]="COMPLETE",n[n.FAILED=1]="FAILED",n[n.REDIRECTING=2]="REDIRECTING",n}(Ar||{});function Gd(n,e){n.events.pipe(qt(t=>t instanceof Ke||t instanceof lt||t instanceof Pr||t instanceof bt),X(t=>t instanceof Ke||t instanceof bt?Ar.COMPLETE:(t instanceof lt?t.code===xe.Redirect||t.code===xe.SupersededByNewNavigation:!1)?Ar.REDIRECTING:Ar.FAILED),qt(t=>t!==Ar.REDIRECTING),mn(1)).subscribe(()=>{e()})}function Cy(n){throw n}var Py={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},Dy={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},Xe=(()=>{class n{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.console=F(Kh),this.stateManager=F(zd),this.options=F($r,{optional:!0})||{},this.pendingTasks=F(kh),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=F(ka),this.urlSerializer=F(Lr),this.location=F(wr),this.urlHandlingStrategy=F(Da),this._events=new Tt,this.errorHandler=this.options.errorHandler||Cy,this.navigated=!1,this.routeReuseStrategy=F(Sy),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=F(Vr,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!F(as,{optional:!0}),this.eventsSubscription=new fh,this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:t=>{this.console.warn(t)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let t=this.navigationTransitions.events.subscribe(r=>{try{let i=this.navigationTransitions.currentTransition,o=this.navigationTransitions.currentNavigation;if(i!==null&&o!==null){if(this.stateManager.handleRouterEvent(r,o),r instanceof lt&&r.code!==xe.Redirect&&r.code!==xe.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Ke)this.navigated=!0;else if(r instanceof Rn){let a=r.navigationBehaviorOptions,u=this.urlHandlingStrategy.merge(r.url,i.currentRawUrl),l=O({browserUrl:i.extras.browserUrl,info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:i.extras.replaceUrl||this.urlUpdateStrategy==="eager"||Ay(i.source)},a);this.scheduleNavigation(u,br,null,l,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}Ny(r)&&this._events.next(r)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(t)}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),br,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((t,r)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(t,"popstate",r)},0)})}navigateToSyncWithBrowser(t,r,i){let o={replaceUrl:!0},a=i?.navigationId?i:null;if(i){let l=O({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(o.state=l)}let u=this.parseUrl(t);this.scheduleNavigation(u,r,a,o)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(t){this.config=t.map(Ca),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(t,r={}){let{relativeTo:i,queryParams:o,fragment:a,queryParamsHandling:u,preserveFragment:l}=r,d=l?this.currentUrlTree.fragment:a,y=null;switch(u??this.options.defaultQueryParamsHandling){case"merge":y=O(O({},this.currentUrlTree.queryParams),o);break;case"preserve":y=this.currentUrlTree.queryParams;break;default:y=o||null}y!==null&&(y=this.removeEmptyProps(y));let E;try{let b=i?i.snapshot:this.routerState.snapshot.root;E=Sd(b)}catch{(typeof t[0]!="string"||t[0][0]!=="/")&&(t=[]),E=this.currentUrlTree.root}return bd(E,t,y,d??null)}navigateByUrl(t,r={skipLocationChange:!1}){let i=Wt(t)?t:this.parseUrl(t),o=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(o,br,null,r)}navigate(t,r={skipLocationChange:!1}){return ky(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){try{return this.urlSerializer.parse(t)}catch{return this.urlSerializer.parse("/")}}isActive(t,r){let i;if(r===!0?i=O({},Py):r===!1?i=O({},Dy):i=r,Wt(t))return rd(this.currentUrlTree,t,i);let o=this.parseUrl(t);return rd(this.currentUrlTree,o,i)}removeEmptyProps(t){return Object.entries(t).reduce((r,[i,o])=>(o!=null&&(r[i]=o),r),{})}scheduleNavigation(t,r,i,o,a){if(this.disposed)return Promise.resolve(!1);let u,l,d;a?(u=a.resolve,l=a.reject,d=a.promise):d=new Promise((E,b)=>{u=E,l=b});let y=this.pendingTasks.add();return Gd(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(y))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:o,resolve:u,reject:l,promise:d,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),d.catch(E=>Promise.reject(E))}static{this.\u0275fac=function(r){return new(r||n)}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function ky(n){for(let e=0;e<n.length;e++)if(n[e]==null)throw new Ce(4008,!1)}function Ny(n){return!(n instanceof Dr)&&!(n instanceof Rn)}var hd=(()=>{class n{constructor(t,r,i,o,a,u){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=o,this.el=a,this.locationStrategy=u,this.href=null,this.onChanges=new Tt,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1,this.routerLinkInput=null;let l=a.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=t.events.subscribe(d=>{d instanceof Ke&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(t){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){t==null?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(Wt(t)?this.routerLinkInput=t:this.routerLinkInput=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0"))}onClick(t,r,i,o,a){let u=this.urlTree;if(u===null||this.isAnchorElement&&(t!==0||r||i||o||a||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(u,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let t=this.urlTree;this.href=t!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(t)):null;let r=this.href===null?null:Oh(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",r)}applyAttributeValue(t,r){let i=this.renderer,o=this.el.nativeElement;r!==null?i.setAttribute(o,t,r):i.removeAttribute(o,t)}get urlTree(){return this.routerLinkInput===null?null:Wt(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(r){return new(r||n)(Ge(Xe),Ge(Rt),Dh("tabindex"),Ge(Wo),Ge(Go),Ge(Ir))}}static{this.\u0275dir=Ui({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(r,i){r&1&&$h("click",function(a){return i.onClick(a.button,a.ctrlKey,a.shiftKey,a.altKey,a.metaKey)}),r&2&&Uh("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",ji],skipLocationChange:[2,"skipLocationChange","skipLocationChange",ji],replaceUrl:[2,"replaceUrl","replaceUrl",ji],routerLink:"routerLink"},standalone:!0,features:[Mh,Bi]})}}return n})(),nT=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,o,a){this.router=t,this.element=r,this.renderer=i,this.cdr=o,this.link=a,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new _n,this.routerEventsSubscription=t.events.subscribe(u=>{u instanceof Ke&&this.update()})}ngAfterContentInit(){L(this.links.changes,L(null)).pipe(_r()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();let t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=De(t).pipe(_r()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){let r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||queueMicrotask(()=>{let t=this.hasActiveLinks();this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&this.ariaCurrentWhenActive!==void 0?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.isActiveChange.emit(t))})}isLinkActive(t){let r=Oy(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>{let o=i.urlTree;return o?t.isActive(o,r):!1}}hasActiveLinks(){let t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}static{this.\u0275fac=function(r){return new(r||n)(Ge(Xe),Ge(Go),Ge(Wo),Ge(qi),Ge(hd,8))}}static{this.\u0275dir=Ui({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(r,i,o){if(r&1&&qh(o,hd,5),r&2){let a;jh(a=zh())&&(i.links=a)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[Bi]})}}return n})();function Oy(n){return!!n.paths}var os=class{};var xy=(()=>{class n{constructor(t,r,i,o,a){this.router=t,this.injector=i,this.preloadingStrategy=o,this.loader=a}setUpPreloading(){this.subscription=this.router.events.pipe(qt(t=>t instanceof Ke),gn(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){let i=[];for(let o of r){o.providers&&!o._injector&&(o._injector=Ko(o.providers,t,`Route: ${o.path}`));let a=o._injector??t,u=o._loadedInjector??a;(o.loadChildren&&!o._loadedRoutes&&o.canLoad===void 0||o.loadComponent&&!o._loadedComponent)&&i.push(this.preloadConfig(a,o)),(o.children||o._loadedRoutes)&&i.push(this.processRoutes(u,o.children??o._loadedRoutes))}return De(i).pipe(_r())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;r.loadChildren&&r.canLoad===void 0?i=this.loader.loadChildren(t,r):i=L(null);let o=i.pipe(Ne(a=>a===null?L(void 0):(r._loadedRoutes=a.routes,r._loadedInjector=a.injector,this.processRoutes(a.injector??t,a.routes))));if(r.loadComponent&&!r._loadedComponent){let a=this.loader.loadComponent(r);return De([o,a]).pipe(_r())}else return o})}static{this.\u0275fac=function(r){return new(r||n)(ze(Xe),ze($i),ze(vr),ze(os),ze(Pa))}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})(),Wd=new _e(""),Vy=(()=>{class n{constructor(t,r,i,o,a={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=o,this.options=a,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},a.scrollPositionRestoration||="disabled",a.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof bn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof Ke?(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment)):t instanceof bt&&t.code===Yi.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Zi&&(t.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(t.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new Zi(t,this.lastSource==="popstate"?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(r){xh()}}static{this.\u0275prov=ne({token:n,factory:n.\u0275fac})}}return n})();function rT(n,...e){return yn([{provide:Vr,multi:!0,useValue:n},[],{provide:Rt,useFactory:Kd,deps:[Xe]},{provide:Jo,multi:!0,useFactory:Hd},e.map(t=>t.\u0275providers)])}function Kd(n){return n.routerState.root}function qr(n,e){return{\u0275kind:n,\u0275providers:e}}function Hd(){let n=F(jt);return e=>{let t=n.get(Qh);if(e!==t.components[0])return;let r=n.get(Xe),i=n.get(Qd);n.get(Na)===1&&r.initialNavigation(),n.get(Jd,null,jo.Optional)?.setUpPreloading(),n.get(Wd,null,jo.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var Qd=new _e("",{factory:()=>new Tt}),Na=new _e("",{providedIn:"root",factory:()=>1});function My(){return qr(2,[{provide:Na,useValue:0},{provide:Qo,multi:!0,deps:[jt],useFactory:e=>{let t=e.get(Xh,Promise.resolve());return()=>t.then(()=>new Promise(r=>{let i=e.get(Xe),o=e.get(Qd);Gd(i,()=>{r(!0)}),e.get(ka).afterPreactivation=()=>(r(!0),o.closed?L(void 0):o),i.initialNavigation()}))}}])}function Ly(){return qr(3,[{provide:Qo,multi:!0,useFactory:()=>{let e=F(Xe);return()=>{e.setUpLocationChangeListener()}}},{provide:Na,useValue:2}])}var Jd=new _e("");function Fy(n){return qr(0,[{provide:Jd,useExisting:xy},{provide:os,useExisting:n}])}function Uy(){return qr(8,[ad,{provide:as,useExisting:ad}])}function By(n){let e=[{provide:qd,useValue:wy},{provide:jd,useValue:O({skipNextTransition:!!n?.skipInitialTransition},n)}];return qr(9,e)}var dd=new _e("ROUTER_FORROOT_GUARD"),$y=[wr,{provide:Lr,useClass:Sn},Xe,Ur,{provide:Rt,useFactory:Kd,deps:[Xe]},Pa,[]],iT=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[$y,[],{provide:Vr,multi:!0,useValue:t},{provide:dd,useFactory:Gy,deps:[[Xe,new Qe,new Rh]]},{provide:$r,useValue:r||{}},r?.useHash?jy():zy(),qy(),r?.preloadingStrategy?Fy(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?Wy(r):[],r?.bindToComponentInputs?Uy().\u0275providers:[],r?.enableViewTransitions?By().\u0275providers:[],Ky()]}}static forChild(t){return{ngModule:n,providers:[{provide:Vr,multi:!0,useValue:t}]}}static{this.\u0275fac=function(r){return new(r||n)(ze(dd,8))}}static{this.\u0275mod=Ph({type:n})}static{this.\u0275inj=Sh({})}}return n})();function qy(){return{provide:Wd,useFactory:()=>{let n=F(td),e=F(ut),t=F($r),r=F(ka),i=F(Lr);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Vy(i,r,n,e,t)}}}function jy(){return{provide:Ir,useClass:ed}}function zy(){return{provide:Ir,useClass:Zh}}function Gy(n){return"guarded"}function Wy(n){return[n.initialNavigation==="disabled"?Ly().\u0275providers:[],n.initialNavigation==="enabledBlocking"?My().\u0275providers:[]]}var fd=new _e("");function Ky(){return[{provide:fd,useFactory:Hd},{provide:Jo,multi:!0,useExisting:fd}]}var Va=(n,e)=>e.some(t=>n instanceof t),Yd,Xd;function Hy(){return Yd||(Yd=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Qy(){return Xd||(Xd=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Ma=new WeakMap,Oa=new WeakMap,us=new WeakMap;function Jy(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(Kt(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return us.set(e,n),e}function Yy(n){if(Ma.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});Ma.set(n,e)}var La={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Ma.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return Kt(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function nf(n){La=n(La)}function Xy(n){return Qy().includes(n)?function(...e){return n.apply(Fa(this),e),Kt(this.request)}:function(...e){return Kt(n.apply(Fa(this),e))}}function Zy(n){return typeof n=="function"?Xy(n):(n instanceof IDBTransaction&&Yy(n),Va(n,Hy())?new Proxy(n,La):n)}function Kt(n){if(n instanceof IDBRequest)return Jy(n);if(Oa.has(n))return Oa.get(n);let e=Zy(n);return e!==n&&(Oa.set(n,e),us.set(e,n)),e}var Fa=n=>us.get(n);function rf(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let a=indexedDB.open(n,e),u=Kt(a);return r&&a.addEventListener("upgradeneeded",l=>{r(Kt(a.result),l.oldVersion,l.newVersion,Kt(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),u.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}var e_=["get","getKey","getAll","getAllKeys","count"],t_=["put","add","delete","clear"],xa=new Map;function Zd(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(xa.get(e))return xa.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=t_.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||e_.includes(t)))return;let o=function(a,...u){return S(this,null,function*(){let l=this.transaction(a,i?"readwrite":"readonly"),d=l.store;return r&&(d=d.index(u.shift())),(yield Promise.all([d[t](...u),i&&l.done]))[0]})};return xa.set(e,o),o}nf(n=>le(O({},n),{get:(e,t,r)=>Zd(e,t)||n.get(e,t,r),has:(e,t)=>!!Zd(e,t)||n.has(e,t)}));var n_=["continue","continuePrimaryKey","advance"],ef={},Ua=new WeakMap,sf=new WeakMap,r_={get(n,e){if(!n_.includes(e))return n[e];let t=ef[e];return t||(t=ef[e]=function(...r){Ua.set(this,sf.get(this)[e](...r))}),t}};function i_(...n){return dh(this,null,function*(){let e=this;if(e instanceof IDBCursor||(e=yield new Oo(e.openCursor(...n))),!e)return;e=e;let t=new Proxy(e,r_);for(sf.set(t,e),us.set(t,Fa(e));e;)yield t,e=yield new Oo(Ua.get(t)||e.continue()),Ua.delete(t)})}function tf(n,e){return e===Symbol.asyncIterator&&Va(n,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&Va(n,[IDBIndex,IDBObjectStore])}nf(n=>le(O({},n),{get(e,t,r){return tf(e,t)?i_:n.get(e,t,r)},has(e,t){return tf(e,t)||n.has(e,t)}}));var of=class n{database="KinvoExtendedDB";databaseVersion=1;initDB(){return S(this,null,function*(){let e=t=>S(this,null,function*(){t.objectStoreNames.contains("keys")||t.createObjectStore("keys",{keyPath:"id"})});return yield rf(this.database,this.databaseVersion,{upgrade:e})})}generateAndStoreCryptoKey(){return S(this,null,function*(){let e=yield crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]),t=yield this.initDB(),r=yield crypto.subtle.exportKey("jwk",e);return yield t.put("keys",{id:"encryptionKey",key:r}),e})}loadCryptoKey(){return S(this,null,function*(){let t=yield(yield this.initDB()).get("keys","encryptionKey");if(!t)throw new Error("Chave de criptografia n\xE3o encontrada no IndexedDB.");return yield crypto.subtle.importKey("jwk",t.key,{name:"AES-GCM"},!0,["encrypt","decrypt"])})}encryptAndStoreData(e,t){return S(this,null,function*(){let r=JSON.stringify(t),o=new TextEncoder().encode(r),a=crypto.getRandomValues(new Uint8Array(12)),u=yield crypto.subtle.encrypt({name:"AES-GCM",iv:a},e,o);localStorage.setItem("encryptedData",btoa(String.fromCharCode(...new Uint8Array(u)))),localStorage.setItem("iv",btoa(String.fromCharCode(...a)))})}decryptDataFromStorage(e){return S(this,null,function*(){let t=localStorage.getItem("encryptedData"),r=localStorage.getItem("iv");if(!t||!r)throw new Error("Dados criptografados ou IV n\xE3o encontrados no localStorage.");let i=Uint8Array.from(atob(t),y=>y.charCodeAt(0)),o=Uint8Array.from(atob(r),y=>y.charCodeAt(0)),a=yield crypto.subtle.decrypt({name:"AES-GCM",iv:o},e,i),l=new TextDecoder().decode(a);return JSON.parse(l)})}isEncryptedDataInStorage(){return S(this,null,function*(){let t=yield(yield this.initDB()).get("keys","encryptionKey");return!!localStorage.getItem("encryptedData")&&!!localStorage.getItem("iv")&&!!t})}clearEncryptedDataFromStorage(){return S(this,null,function*(){localStorage.removeItem("encryptedData"),localStorage.removeItem("iv"),yield(yield this.initDB()).clear("keys")})}static \u0275fac=function(t){return new(t||n)};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})};var cf=function(n){let e=[],t=0;for(let r=0;r<n.length;r++){let i=n.charCodeAt(r);i<128?e[t++]=i:i<2048?(e[t++]=i>>6|192,e[t++]=i&63|128):(i&64512)===55296&&r+1<n.length&&(n.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(n.charCodeAt(++r)&1023),e[t++]=i>>18|240,e[t++]=i>>12&63|128,e[t++]=i>>6&63|128,e[t++]=i&63|128):(e[t++]=i>>12|224,e[t++]=i>>6&63|128,e[t++]=i&63|128)}return e},s_=function(n){let e=[],t=0,r=0;for(;t<n.length;){let i=n[t++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){let o=n[t++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){let o=n[t++],a=n[t++],u=n[t++],l=((i&7)<<18|(o&63)<<12|(a&63)<<6|u&63)-65536;e[r++]=String.fromCharCode(55296+(l>>10)),e[r++]=String.fromCharCode(56320+(l&1023))}else{let o=n[t++],a=n[t++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|a&63)}}return e.join("")},uf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();let t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<n.length;i+=3){let o=n[i],a=i+1<n.length,u=a?n[i+1]:0,l=i+2<n.length,d=l?n[i+2]:0,y=o>>2,E=(o&3)<<4|u>>4,b=(u&15)<<2|d>>6,D=d&63;l||(D=64,a||(b=64)),r.push(t[y],t[E],t[b],t[D])}return r.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(cf(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):s_(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();let t=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<n.length;){let o=t[n.charAt(i++)],u=i<n.length?t[n.charAt(i)]:0;++i;let d=i<n.length?t[n.charAt(i)]:64;++i;let E=i<n.length?t[n.charAt(i)]:64;if(++i,o==null||u==null||d==null||E==null)throw new $a;let b=o<<2|u>>4;if(r.push(b),d!==64){let D=u<<4&240|d>>2;if(r.push(D),E!==64){let k=d<<6&192|E;r.push(k)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}},$a=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}},o_=function(n){let e=cf(n);return uf.encodeByteArray(e,!0)},jr=function(n){return o_(n).replace(/\./g,"")},ja=function(n){try{return uf.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};function a_(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}var c_=()=>a_().__FIREBASE_DEFAULTS__,u_=()=>{if(typeof process>"u"||typeof process.env>"u")return;let n=process.env.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},l_=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}let e=n&&ja(n[1]);return e&&JSON.parse(e)},hs=()=>{try{return c_()||u_()||l_()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},lf=n=>{var e,t;return(t=(e=hs())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},hf=n=>{let e=lf(n);if(!e)return;let t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);let r=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),r]:[e.substring(0,t),r]},za=()=>{var n;return(n=hs())===null||n===void 0?void 0:n.config},df=n=>{var e;return(e=hs())===null||e===void 0?void 0:e[`_${n}`]};var ls=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,r)=>{t?this.reject(t):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,r))}}};function ff(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');let t={alg:"none",type:"JWT"},r=e||"demo-project",i=n.iat||0,o=n.sub||n.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");let a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},n);return[jr(JSON.stringify(t)),jr(JSON.stringify(a)),""].join(".")}function Ve(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pf(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ve())}function h_(){var n;let e=(n=hs())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gf(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function mf(){let n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function yf(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _f(){return!h_()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ga(){try{return typeof indexedDB=="object"}catch{return!1}}function vf(){return new Promise((n,e)=>{try{let t=!0,r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),t||self.indexedDB.deleteDatabase(r),n(!0)},i.onupgradeneeded=()=>{t=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(t){e(t)}})}var d_="FirebaseError",Be=class n extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name=d_,Object.setPrototypeOf(this,n.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dt.prototype.create)}},dt=class{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){let r=t[0]||{},i=`${this.service}/${e}`,o=this.errors[e],a=o?f_(o,r):"Error",u=`${this.serviceName}: ${a} (${i}).`;return new Be(i,u,r)}};function f_(n,e){return n.replace(p_,(t,r)=>{let i=e[r];return i!=null?String(i):`<${r}?>`})}var p_=/\{\$([^}]+)}/g;function Dn(n,e){if(n===e)return!0;let t=Object.keys(n),r=Object.keys(e);for(let i of t){if(!r.includes(i))return!1;let o=n[i],a=e[i];if(af(o)&&af(a)){if(!Dn(o,a))return!1}else if(o!==a)return!1}for(let i of r)if(!t.includes(i))return!1;return!0}function af(n){return n!==null&&typeof n=="object"}function Wa(n){let e=[];for(let[t,r]of Object.entries(n))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function If(n,e){let t=new qa(n,e);return t.subscribe.bind(t)}var qa=class{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(e===void 0&&t===void 0&&r===void 0)throw new Error("Missing Observer.");g_(e,["next","error","complete"])?i=e:i={next:e,error:t,complete:r},i.next===void 0&&(i.next=Ba),i.error===void 0&&(i.error=Ba),i.complete===void 0&&(i.complete=Ba);let o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function g_(n,e){if(typeof n!="object"||n===null)return!1;for(let t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function Ba(){}var pT=4*60*60*1e3;function Ze(n){return n&&n._delegate?n._delegate:n}var $e=class{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}};var Ht="[DEFAULT]";var Ka=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){let t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){let r=new ls;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{let i=this.getOrInitializeService({instanceIdentifier:t});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;let r=this.normalizeInstanceIdentifier(e?.identifier),i=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(y_(e))try{this.getOrInitializeService({instanceIdentifier:Ht})}catch{}for(let[t,r]of this.instancesDeferred.entries()){let i=this.normalizeInstanceIdentifier(t);try{let o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Ht){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}delete(){return S(this,null,function*(){let e=Array.from(this.instances.values());yield Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])})}isComponentSet(){return this.component!=null}isInitialized(e=Ht){return this.instances.has(e)}getOptions(e=Ht){return this.instancesOptions.get(e)||{}}initialize(e={}){let{options:t={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);let i=this.getOrInitializeService({instanceIdentifier:r,options:t});for(let[o,a]of this.instancesDeferred.entries()){let u=this.normalizeInstanceIdentifier(o);r===u&&a.resolve(i)}return i}onInit(e,t){var r;let i=this.normalizeInstanceIdentifier(t),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);let a=this.instances.get(i);return a&&e(a,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){let r=this.onInitCallbacks.get(t);if(r)for(let i of r)try{i(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:m_(e),options:t}),this.instances.set(e,r),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ht){return this.component?this.component.multipleInstances?e:Ht:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function m_(n){return n===Ht?void 0:n}function y_(n){return n.instantiationMode==="EAGER"}var ds=class{constructor(e){this.name=e,this.providers=new Map}addComponent(e){let t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);let t=new Ka(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}};var __=[],$=function(n){return n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT",n}($||{}),v_={debug:$.DEBUG,verbose:$.VERBOSE,info:$.INFO,warn:$.WARN,error:$.ERROR,silent:$.SILENT},I_=$.INFO,w_={[$.DEBUG]:"log",[$.VERBOSE]:"log",[$.INFO]:"info",[$.WARN]:"warn",[$.ERROR]:"error"},E_=(n,e,...t)=>{if(e<n.logLevel)return;let r=new Date().toISOString(),i=w_[e];if(i)console[i](`[${r}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)},Pt=class{constructor(e){this.name=e,this._logLevel=I_,this._logHandler=E_,this._userLogHandler=null,__.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in $))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?v_[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,$.DEBUG,...e),this._logHandler(this,$.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,$.VERBOSE,...e),this._logHandler(this,$.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,$.INFO,...e),this._logHandler(this,$.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,$.WARN,...e),this._logHandler(this,$.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,$.ERROR,...e),this._logHandler(this,$.ERROR,...e)}};var T_=(n,e)=>e.some(t=>n instanceof t),wf,Ef;function A_(){return wf||(wf=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function S_(){return Ef||(Ef=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var Tf=new WeakMap,Qa=new WeakMap,Af=new WeakMap,Ha=new WeakMap,Ya=new WeakMap;function b_(n){let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("success",o),n.removeEventListener("error",a)},o=()=>{t(et(n.result)),i()},a=()=>{r(n.error),i()};n.addEventListener("success",o),n.addEventListener("error",a)});return e.then(t=>{t instanceof IDBCursor&&Tf.set(t,n)}).catch(()=>{}),Ya.set(e,n),e}function R_(n){if(Qa.has(n))return;let e=new Promise((t,r)=>{let i=()=>{n.removeEventListener("complete",o),n.removeEventListener("error",a),n.removeEventListener("abort",a)},o=()=>{t(),i()},a=()=>{r(n.error||new DOMException("AbortError","AbortError")),i()};n.addEventListener("complete",o),n.addEventListener("error",a),n.addEventListener("abort",a)});Qa.set(n,e)}var Ja={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Qa.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Af.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return et(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Sf(n){Ja=n(Ja)}function C_(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){let r=n.call(fs(this),e,...t);return Af.set(r,e.sort?e.sort():[e]),et(r)}:S_().includes(n)?function(...e){return n.apply(fs(this),e),et(Tf.get(this))}:function(...e){return et(n.apply(fs(this),e))}}function P_(n){return typeof n=="function"?C_(n):(n instanceof IDBTransaction&&R_(n),T_(n,A_())?new Proxy(n,Ja):n)}function et(n){if(n instanceof IDBRequest)return b_(n);if(Ha.has(n))return Ha.get(n);let e=P_(n);return e!==n&&(Ha.set(n,e),Ya.set(e,n)),e}var fs=n=>Ya.get(n);function Rf(n,e,{blocked:t,upgrade:r,blocking:i,terminated:o}={}){let a=indexedDB.open(n,e),u=et(a);return r&&a.addEventListener("upgradeneeded",l=>{r(et(a.result),l.oldVersion,l.newVersion,et(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),u.then(l=>{o&&l.addEventListener("close",()=>o()),i&&l.addEventListener("versionchange",d=>i(d.oldVersion,d.newVersion,d))}).catch(()=>{}),u}var D_=["get","getKey","getAll","getAllKeys","count"],k_=["put","add","delete","clear"],Xa=new Map;function bf(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(Xa.get(e))return Xa.get(e);let t=e.replace(/FromIndex$/,""),r=e!==t,i=k_.includes(t);if(!(t in(r?IDBIndex:IDBObjectStore).prototype)||!(i||D_.includes(t)))return;let o=function(a,...u){return S(this,null,function*(){let l=this.transaction(a,i?"readwrite":"readonly"),d=l.store;return r&&(d=d.index(u.shift())),(yield Promise.all([d[t](...u),i&&l.done]))[0]})};return Xa.set(e,o),o}Sf(n=>le(O({},n),{get:(e,t,r)=>bf(e,t)||n.get(e,t,r),has:(e,t)=>!!bf(e,t)||n.has(e,t)}));var ec=class{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(N_(t)){let r=t.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(t=>t).join(" ")}};function N_(n){let e=n.getComponent();return e?.type==="VERSION"}var tc="@firebase/app",Cf="0.10.12";var ft=new Pt("@firebase/app"),O_="@firebase/app-compat",x_="@firebase/analytics-compat",V_="@firebase/analytics",M_="@firebase/app-check-compat",L_="@firebase/app-check",F_="@firebase/auth",U_="@firebase/auth-compat",B_="@firebase/database",$_="@firebase/data-connect",q_="@firebase/database-compat",j_="@firebase/functions",z_="@firebase/functions-compat",G_="@firebase/installations",W_="@firebase/installations-compat",K_="@firebase/messaging",H_="@firebase/messaging-compat",Q_="@firebase/performance",J_="@firebase/performance-compat",Y_="@firebase/remote-config",X_="@firebase/remote-config-compat",Z_="@firebase/storage",ev="@firebase/storage-compat",tv="@firebase/firestore",nv="@firebase/vertexai-preview",rv="@firebase/firestore-compat",iv="firebase",sv="10.14.0";var nc="[DEFAULT]",ov={[tc]:"fire-core",[O_]:"fire-core-compat",[V_]:"fire-analytics",[x_]:"fire-analytics-compat",[L_]:"fire-app-check",[M_]:"fire-app-check-compat",[F_]:"fire-auth",[U_]:"fire-auth-compat",[B_]:"fire-rtdb",[$_]:"fire-data-connect",[q_]:"fire-rtdb-compat",[j_]:"fire-fn",[z_]:"fire-fn-compat",[G_]:"fire-iid",[W_]:"fire-iid-compat",[K_]:"fire-fcm",[H_]:"fire-fcm-compat",[Q_]:"fire-perf",[J_]:"fire-perf-compat",[Y_]:"fire-rc",[X_]:"fire-rc-compat",[Z_]:"fire-gcs",[ev]:"fire-gcs-compat",[tv]:"fire-fst",[rv]:"fire-fst-compat",[nv]:"fire-vertex","fire-js":"fire-js",[iv]:"fire-js-all"};var zr=new Map,av=new Map,rc=new Map;function Pf(n,e){try{n.container.addComponent(e)}catch(t){ft.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function kt(n){let e=n.name;if(rc.has(e))return ft.debug(`There were multiple attempts to register component ${e}.`),!1;rc.set(e,n);for(let t of zr.values())Pf(t,n);for(let t of av.values())Pf(t,n);return!0}function ac(n,e){let t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function kn(n){return n.settings!==void 0}var cv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Dt=new dt("app","Firebase",cv);var ic=class{constructor(e,t,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new $e("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Dt.create("app-deleted",{appName:this._name})}};var Nn=sv;function cc(n,e={}){let t=n;typeof e!="object"&&(e={name:e});let r=Object.assign({name:nc,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Dt.create("bad-app-name",{appName:String(i)});if(t||(t=za()),!t)throw Dt.create("no-options");let o=zr.get(i);if(o){if(Dn(t,o.options)&&Dn(r,o.config))return o;throw Dt.create("duplicate-app",{appName:i})}let a=new ds(i);for(let l of rc.values())a.addComponent(l);let u=new ic(t,r,a);return zr.set(i,u),u}function Wr(n=nc){let e=zr.get(n);if(!e&&n===nc&&za())return cc();if(!e)throw Dt.create("no-app",{appName:n});return e}function ps(){return Array.from(zr.values())}function fe(n,e,t){var r;let i=(r=ov[n])!==null&&r!==void 0?r:n;t&&(i+=`-${t}`);let o=i.match(/\s|\//),a=e.match(/\s|\//);if(o||a){let u=[`Unable to register library "${i}" with version "${e}":`];o&&u.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&a&&u.push("and"),a&&u.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ft.warn(u.join(" "));return}kt(new $e(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}var uv="firebase-heartbeat-database",lv=1,Gr="firebase-heartbeat-store",Za=null;function Of(){return Za||(Za=Rf(uv,lv,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Gr)}catch(t){console.warn(t)}}}}).catch(n=>{throw Dt.create("idb-open",{originalErrorMessage:n.message})})),Za}function hv(n){return S(this,null,function*(){try{let t=(yield Of()).transaction(Gr),r=yield t.objectStore(Gr).get(xf(n));return yield t.done,r}catch(e){if(e instanceof Be)ft.warn(e.message);else{let t=Dt.create("idb-get",{originalErrorMessage:e?.message});ft.warn(t.message)}}})}function Df(n,e){return S(this,null,function*(){try{let r=(yield Of()).transaction(Gr,"readwrite");yield r.objectStore(Gr).put(e,xf(n)),yield r.done}catch(t){if(t instanceof Be)ft.warn(t.message);else{let r=Dt.create("idb-set",{originalErrorMessage:t?.message});ft.warn(r.message)}}})}function xf(n){return`${n.name}!${n.options.appId}`}var dv=1024,fv=30*24*60*60*1e3,sc=class{constructor(e){this.container=e,this._heartbeatsCache=null;let t=this.container.getProvider("app").getImmediate();this._storage=new oc(t),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}triggerHeartbeat(){return S(this,null,function*(){var e,t;try{let i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=kf();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=yield this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(a=>a.date===o)?void 0:(this._heartbeatsCache.heartbeats.push({date:o,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(a=>{let u=new Date(a.date).valueOf();return Date.now()-u<=fv}),this._storage.overwrite(this._heartbeatsCache))}catch(r){ft.warn(r)}})}getHeartbeatsHeader(){return S(this,null,function*(){var e;try{if(this._heartbeatsCache===null&&(yield this._heartbeatsCachePromise),((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";let t=kf(),{heartbeatsToSend:r,unsentEntries:i}=pv(this._heartbeatsCache.heartbeats),o=jr(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=t,i.length>0?(this._heartbeatsCache.heartbeats=i,yield this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(t){return ft.warn(t),""}})}};function kf(){return new Date().toISOString().substring(0,10)}function pv(n,e=dv){let t=[],r=n.slice();for(let i of n){let o=t.find(a=>a.agent===i.agent);if(o){if(o.dates.push(i.date),Nf(t)>e){o.dates.pop();break}}else if(t.push({agent:i.agent,dates:[i.date]}),Nf(t)>e){t.pop();break}r=r.slice(1)}return{heartbeatsToSend:t,unsentEntries:r}}var oc=class{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return S(this,null,function*(){return Ga()?vf().then(()=>!0).catch(()=>!1):!1})}read(){return S(this,null,function*(){if(yield this._canUseIndexedDBPromise){let t=yield hv(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}})}overwrite(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Df(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return})}add(e){return S(this,null,function*(){var t;if(yield this._canUseIndexedDBPromise){let i=yield this.read();return Df(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return})}};function Nf(n){return jr(JSON.stringify({version:2,heartbeats:n})).length}function gv(n){kt(new $e("platform-logger",e=>new ec(e),"PRIVATE")),kt(new $e("heartbeat",e=>new sc(e),"PRIVATE")),fe(tc,Cf,n),fe(tc,Cf,"esm2017"),fe("fire-js","")}gv("");var mv="firebase",yv="10.14.0";fe(mv,yv,"app");var xn=new Ho("ANGULARFIRE2_VERSION");function lc(n,e,t){if(e){if(e.length===1)return e[0];let o=e.filter(a=>a.app===t);if(o.length===1)return o[0]}return t.container.getProvider(n).getImmediate({optional:!0})}var Hr=(n,e)=>{let t=e?[e]:ps(),r=[];return t.forEach(i=>{i.container.getProvider(n).instances.forEach(a=>{r.includes(a)||r.push(a)})}),r},Kr=class{constructor(){return Hr(_v)}},_v="app-check";function On(){}var gs=class{zone;delegate;constructor(e,t=mh){this.zone=e,this.delegate=t}now(){return this.delegate.now()}schedule(e,t,r){let i=this.zone,o=function(a){i.runGuarded(()=>{e.apply(this,[a])})};return this.delegate.schedule(o,t,r)}},uc=class{zone;task=null;constructor(e){this.zone=e}call(e,t){let r=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",On,{},On,On)),t.pipe(he({next:r,complete:r,error:r})).subscribe(e).add(r)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},Qr=(()=>{class n{ngZone;outsideAngular;insideAngular;constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new gs(Zone.current)),this.insideAngular=t.run(()=>new gs(Zone.current,gh)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(r){return new(r||n)(ze(ut))};static \u0275prov=ne({token:n,factory:n.\u0275fac,providedIn:"root"})}return n})();function ms(){let n=globalThis.\u0275AngularFireScheduler;if(!n)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return n}function vv(n){return ms().ngZone.runOutsideAngular(()=>n())}function Qt(n){return ms().ngZone.run(()=>n())}function Iv(n){return wv(ms())(n)}function wv(n){return function(t){return t=t.lift(new uc(n.ngZone)),t.pipe(Uo(n.outsideAngular),Fo(n.insideAngular))}}var Ev=(n,e)=>function(){let r=arguments;return e&&setTimeout(()=>{e.state==="scheduled"&&e.invoke()},10),Qt(()=>n.apply(void 0,r))},Nt=(n,e)=>function(){let t,r=arguments;for(let o=0;o<arguments.length;o++)typeof r[o]=="function"&&(e&&(t||=Qt(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",On,{},On,On))),r[o]=Ev(r[o],t));let i=vv(()=>n.apply(this,r));if(!e)if(i instanceof xo){let o=ms();return i.pipe(Uo(o.outsideAngular),Fo(o.insideAngular))}else return Qt(()=>i);return i instanceof xo?i.pipe(Iv):i instanceof Promise?Qt(()=>new Promise((o,a)=>i.then(u=>Qt(()=>o(u)),u=>Qt(()=>a(u))))):typeof i=="function"&&t?function(){return setTimeout(()=>{t&&t.state==="scheduled"&&t.invoke()},10),i.apply(this,arguments)}:Qt(()=>i)};var Jt=class{constructor(e){return e}},Jr=class{constructor(){return ps()}};function Tv(n){return n&&n.length===1?n[0]:new Jt(Wr())}var hc=new _e("angularfire2._apps"),Av={provide:Jt,useFactory:Tv,deps:[[new Qe,hc]]},Sv={provide:Jr,deps:[[new Qe,hc]]};function bv(n){return(e,t)=>{let r=t.get(Nh);fe("angularfire",xn.full,"core"),fe("angularfire",xn.full,"app"),fe("angular",Wh.full,r.toString());let i=e.runOutsideAngular(()=>n(t));return new Jt(i)}}function eA(n,...e){return yn([Av,Sv,{provide:hc,useFactory:bv(n),multi:!0,deps:[ut,jt,Qr,...e]}])}var tA=Nt(cc,!0);function qf(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}var jf=qf,zf=new dt("auth","Firebase",qf());var Is=new Pt("@firebase/auth");function Cv(n,...e){Is.logLevel<=$.WARN&&Is.warn(`Auth (${Nn}): ${n}`,...e)}function _s(n,...e){Is.logLevel<=$.ERROR&&Is.error(`Auth (${Nn}): ${n}`,...e)}function Vf(n,...e){throw Tc(n,...e)}function Ec(n,...e){return Tc(n,...e)}function Gf(n,e,t){let r=Object.assign(Object.assign({},jf()),{[e]:t});return new dt("auth","Firebase",r).create(e,{appName:n.name})}function vs(n){return Gf(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tc(n,...e){if(typeof n!="string"){let t=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=n.name),n._errorFactory.create(t,...r)}return zf.create(n,...e)}function W(n,e,...t){if(!n)throw Tc(e,...t)}function Yr(n){let e="INTERNAL ASSERTION FAILED: "+n;throw _s(e),new Error(e)}function ws(n,e){n||Yr(e)}function Pv(){return Mf()==="http:"||Mf()==="https:"}function Mf(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}function Dv(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Pv()||mf()||"connection"in navigator)?navigator.onLine:!0}function kv(){if(typeof navigator>"u")return null;let n=navigator;return n.languages&&n.languages[0]||n.language||null}var Xt=class{constructor(e,t){this.shortDelay=e,this.longDelay=t,ws(t>e,"Short delay should be less than long delay!"),this.isMobile=pf()||yf()}get(){return Dv()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};function Nv(n,e){ws(n.emulator,"Emulator should always be set here");let{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}var Es=class{static initialize(e,t,r){this.fetchImpl=e,t&&(this.headersImpl=t),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Yr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Yr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Yr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};var Ov={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};var xv=new Xt(3e4,6e4);function Wf(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}function bs(o,a,u,l){return S(this,arguments,function*(n,e,t,r,i={}){return Kf(n,i,()=>S(this,null,function*(){let d={},y={};r&&(e==="GET"?y=r:d={body:JSON.stringify(r)});let E=Wa(Object.assign({key:n.config.apiKey},y)).slice(1),b=yield n._getAdditionalHeaders();b["Content-Type"]="application/json",n.languageCode&&(b["X-Firebase-Locale"]=n.languageCode);let D=Object.assign({method:e,headers:b},d);return gf()||(D.referrerPolicy="no-referrer"),Es.fetch()(Hf(n,n.config.apiHost,t,E),D)}))})}function Kf(n,e,t){return S(this,null,function*(){n._canInitEmulator=!1;let r=Object.assign(Object.assign({},Ov),e);try{let i=new pc(n),o=yield Promise.race([t(),i.promise]);i.clearNetworkTimeout();let a=yield o.json();if("needConfirmation"in a)throw ys(n,"account-exists-with-different-credential",a);if(o.ok&&!("errorMessage"in a))return a;{let u=o.ok?a.errorMessage:a.error.message,[l,d]=u.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw ys(n,"credential-already-in-use",a);if(l==="EMAIL_EXISTS")throw ys(n,"email-already-in-use",a);if(l==="USER_DISABLED")throw ys(n,"user-disabled",a);let y=r[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(d)throw Gf(n,y,d);Vf(n,y)}}catch(i){if(i instanceof Be)throw i;Vf(n,"network-request-failed",{message:String(i)})}})}function Hf(n,e,t,r){let i=`${e}${t}?${r}`;return n.config.emulator?Nv(n.config,i):`${n.config.apiScheme}://${i}`}var pc=class{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,r)=>{this.timer=setTimeout(()=>r(Ec(this.auth,"network-request-failed")),xv.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}};function ys(n,e,t){let r={appName:n.name};t.email&&(r.email=t.email),t.phoneNumber&&(r.phoneNumber=t.phoneNumber);let i=Ec(n,e,r);return i.customData._tokenResponse=t,i}function Vv(n,e){return S(this,null,function*(){return bs(n,"POST","/v1/accounts:delete",e)})}function Qf(n,e){return S(this,null,function*(){return bs(n,"POST","/v1/accounts:lookup",e)})}function Xr(n){if(n)try{let e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}function Ac(n,e=!1){return S(this,null,function*(){let t=Ze(n),r=yield t.getIdToken(e),i=Jf(r);W(i&&i.exp&&i.auth_time&&i.iat,t.auth,"internal-error");let o=typeof i.firebase=="object"?i.firebase:void 0,a=o?.sign_in_provider;return{claims:i,token:r,authTime:Xr(dc(i.auth_time)),issuedAtTime:Xr(dc(i.iat)),expirationTime:Xr(dc(i.exp)),signInProvider:a||null,signInSecondFactor:o?.sign_in_second_factor||null}})}function dc(n){return Number(n)*1e3}function Jf(n){let[e,t,r]=n.split(".");if(e===void 0||t===void 0||r===void 0)return _s("JWT malformed, contained fewer than 3 sections"),null;try{let i=ja(t);return i?JSON.parse(i):(_s("Failed to decode base64 JWT payload"),null)}catch(i){return _s("Caught error parsing JWT payload as JSON",i?.toString()),null}}function Lf(n){let e=Jf(n);return W(e,"internal-error"),W(typeof e.exp<"u","internal-error"),W(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}function gc(n,e,t=!1){return S(this,null,function*(){if(t)return e;try{return yield e}catch(r){throw r instanceof Be&&Mv(r)&&n.auth.currentUser===n&&(yield n.auth.signOut()),r}})}function Mv({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}var mc=class{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){let r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;let i=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;let t=this.getInterval(e);this.timerId=setTimeout(()=>S(this,null,function*(){yield this.iteration()}),t)}iteration(){return S(this,null,function*(){try{yield this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()})}};var ei=class{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xr(this.lastLoginAt),this.creationTime=Xr(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};function Ts(n){return S(this,null,function*(){var e;let t=n.auth,r=yield n.getIdToken(),i=yield gc(n,Qf(t,{idToken:r}));W(i?.users.length,t,"internal-error");let o=i.users[0];n._notifyReloadListener(o);let a=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Yf(o.providerUserInfo):[],u=Lv(n.providerData,a),l=n.isAnonymous,d=!(n.email&&o.passwordHash)&&!u?.length,y=l?d:!1,E={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:u,metadata:new ei(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,E)})}function Sc(n){return S(this,null,function*(){let e=Ze(n);yield Ts(e),yield e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)})}function Lv(n,e){return[...n.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Yf(n){return n.map(e=>{var{providerId:t}=e,r=Lo(e,["providerId"]);return{providerId:t,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}function Fv(n,e){return S(this,null,function*(){let t=yield Kf(n,{},()=>S(this,null,function*(){let r=Wa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=n.config,a=Hf(n,i,"/v1/token",`key=${o}`),u=yield n._getAdditionalHeaders();return u["Content-Type"]="application/x-www-form-urlencoded",Es.fetch()(a,{method:"POST",headers:u,body:r})}));return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}})}function Uv(n,e){return S(this,null,function*(){return bs(n,"POST","/v2/accounts:revokeToken",Wf(n,e))})}var Zr=class n{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){W(e.idToken,"internal-error"),W(typeof e.idToken<"u","internal-error"),W(typeof e.refreshToken<"u","internal-error");let t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Lf(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){W(e.length!==0,"internal-error");let t=Lf(e);this.updateTokensAndExpiration(e,null,t)}getToken(e,t=!1){return S(this,null,function*(){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(W(this.refreshToken,e,"user-token-expired"),this.refreshToken?(yield this.refresh(e,this.refreshToken),this.accessToken):null)})}clearRefreshToken(){this.refreshToken=null}refresh(e,t){return S(this,null,function*(){let{accessToken:r,refreshToken:i,expiresIn:o}=yield Fv(e,t);this.updateTokensAndExpiration(r,i,Number(o))})}updateTokensAndExpiration(e,t,r){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,t){let{refreshToken:r,accessToken:i,expirationTime:o}=t,a=new n;return r&&(W(typeof r=="string","internal-error",{appName:e}),a.refreshToken=r),i&&(W(typeof i=="string","internal-error",{appName:e}),a.accessToken=i),o&&(W(typeof o=="number","internal-error",{appName:e}),a.expirationTime=o),a}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new n,this.toJSON())}_performRefresh(){return Yr("not implemented")}};function Ot(n,e){W(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}var ti=class n{constructor(e){var{uid:t,auth:r,stsTokenManager:i}=e,o=Lo(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new mc(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new ei(o.createdAt||void 0,o.lastLoginAt||void 0)}getIdToken(e){return S(this,null,function*(){let t=yield gc(this,this.stsTokenManager.getToken(this.auth,e));return W(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,yield this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t})}getIdTokenResult(e){return Ac(this,e)}reload(){return Sc(this)}_assign(e){this!==e&&(W(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){let t=new n(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){W(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(e,t=!1){return S(this,null,function*(){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),t&&(yield Ts(this)),yield this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)})}delete(){return S(this,null,function*(){if(kn(this.auth.app))return Promise.reject(vs(this.auth));let e=yield this.getIdToken();return yield gc(this,Vv(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()})}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var r,i,o,a,u,l,d,y;let E=(r=t.displayName)!==null&&r!==void 0?r:void 0,b=(i=t.email)!==null&&i!==void 0?i:void 0,D=(o=t.phoneNumber)!==null&&o!==void 0?o:void 0,k=(a=t.photoURL)!==null&&a!==void 0?a:void 0,V=(u=t.tenantId)!==null&&u!==void 0?u:void 0,N=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,G=(d=t.createdAt)!==null&&d!==void 0?d:void 0,Q=(y=t.lastLoginAt)!==null&&y!==void 0?y:void 0,{uid:K,emailVerified:ce,isAnonymous:He,providerData:ue,stsTokenManager:I}=t;W(K&&I,e,"internal-error");let p=Zr.fromJSON(this.name,I);W(typeof K=="string",e,"internal-error"),Ot(E,e.name),Ot(b,e.name),W(typeof ce=="boolean",e,"internal-error"),W(typeof He=="boolean",e,"internal-error"),Ot(D,e.name),Ot(k,e.name),Ot(V,e.name),Ot(N,e.name),Ot(G,e.name),Ot(Q,e.name);let m=new n({uid:K,auth:e,email:b,emailVerified:ce,displayName:E,isAnonymous:He,photoURL:k,phoneNumber:D,tenantId:V,stsTokenManager:p,createdAt:G,lastLoginAt:Q});return ue&&Array.isArray(ue)&&(m.providerData=ue.map(_=>Object.assign({},_))),N&&(m._redirectEventId=N),m}static _fromIdTokenResponse(e,t,r=!1){return S(this,null,function*(){let i=new Zr;i.updateFromServerResponse(t);let o=new n({uid:t.localId,auth:e,stsTokenManager:i,isAnonymous:r});return yield Ts(o),o})}static _fromGetAccountInfoResponse(e,t,r){return S(this,null,function*(){let i=t.users[0];W(i.localId!==void 0,"internal-error");let o=i.providerUserInfo!==void 0?Yf(i.providerUserInfo):[],a=!(i.email&&i.passwordHash)&&!o?.length,u=new Zr;u.updateFromIdToken(r);let l=new n({uid:i.localId,auth:e,stsTokenManager:u,isAnonymous:a}),d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new ei(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!o?.length};return Object.assign(l,d),l})}};var Ff=new Map;function Yt(n){ws(n instanceof Function,"Expected a class definition");let e=Ff.get(n);return e?(ws(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Ff.set(n,e),e)}var Bv=(()=>{class n{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return S(this,null,function*(){return!0})}_set(t,r){return S(this,null,function*(){this.storage[t]=r})}_get(t){return S(this,null,function*(){let r=this.storage[t];return r===void 0?null:r})}_remove(t){return S(this,null,function*(){delete this.storage[t]})}_addListener(t,r){}_removeListener(t,r){}}return n.type="NONE",n})(),yc=Bv;function fc(n,e,t){return`firebase:${n}:${e}:${t}`}var As=class n{constructor(e,t,r){this.persistence=e,this.auth=t,this.userKey=r;let{config:i,name:o}=this.auth;this.fullUserKey=fc(this.userKey,i.apiKey,o),this.fullPersistenceKey=fc("persistence",i.apiKey,o),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}getCurrentUser(){return S(this,null,function*(){let e=yield this.persistence._get(this.fullUserKey);return e?ti._fromJSON(this.auth,e):null})}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(e){return S(this,null,function*(){if(this.persistence===e)return;let t=yield this.getCurrentUser();if(yield this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)})}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(e,t,r="authUser"){return S(this,null,function*(){if(!t.length)return new n(Yt(yc),e,r);let i=(yield Promise.all(t.map(d=>S(this,null,function*(){if(yield d._isAvailable())return d})))).filter(d=>d),o=i[0]||Yt(yc),a=fc(r,e.config.apiKey,e.name),u=null;for(let d of t)try{let y=yield d._get(a);if(y){let E=ti._fromJSON(e,y);d!==o&&(u=E),o=d;break}}catch{}let l=i.filter(d=>d._shouldAllowMigration);return!o._shouldAllowMigration||!l.length?new n(o,e,r):(o=l[0],u&&(yield o._set(a,u.toJSON())),yield Promise.all(t.map(d=>S(this,null,function*(){if(d!==o)try{yield d._remove(a)}catch{}}))),new n(o,e,r))})}};function Uf(n){let e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(zv(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if($v(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Wv(e))return"Blackberry";if(Kv(e))return"Webos";if(qv(e))return"Safari";if((e.includes("chrome/")||jv(e))&&!e.includes("edge/"))return"Chrome";if(Gv(e))return"Android";{let t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=n.match(t);if(r?.length===2)return r[1]}return"Other"}function $v(n=Ve()){return/firefox\//i.test(n)}function qv(n=Ve()){let e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function jv(n=Ve()){return/crios\//i.test(n)}function zv(n=Ve()){return/iemobile/i.test(n)}function Gv(n=Ve()){return/android/i.test(n)}function Wv(n=Ve()){return/blackberry/i.test(n)}function Kv(n=Ve()){return/webos/i.test(n)}function Xf(n,e=[]){let t;switch(n){case"Browser":t=Uf(Ve());break;case"Worker":t=`${Uf(Ve())}-${n}`;break;default:t=n}let r=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Nn}/${r}`}var _c=class{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){let r=o=>new Promise((a,u)=>{try{let l=e(o);a(l)}catch(l){u(l)}});r.onAbort=t,this.queue.push(r);let i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}runMiddleware(e){return S(this,null,function*(){if(this.auth.currentUser===e)return;let t=[];try{for(let r of this.queue)yield r(e),r.onAbort&&t.push(r.onAbort)}catch(r){t.reverse();for(let i of t)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}})}};function Hv(t){return S(this,arguments,function*(n,e={}){return bs(n,"GET","/v2/passwordPolicy",Wf(n,e))})}var Qv=6,vc=class{constructor(e){var t,r,i,o;let a=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=a.minPasswordLength)!==null&&t!==void 0?t:Qv,a.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=a.maxPasswordLength),a.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=a.containsLowercaseCharacter),a.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=a.containsUppercaseCharacter),a.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=a.containsNumericCharacter),a.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=a.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,r,i,o,a,u;let l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(r=l.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(i=l.containsLowercaseLetter)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(o=l.containsUppercaseLetter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNumericCharacter)!==null&&a!==void 0?a:!0),l.isValid&&(l.isValid=(u=l.containsNonAlphanumericCharacter)!==null&&u!==void 0?u:!0),l}validatePasswordLengthOptions(e,t){let r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(t.meetsMinPasswordLength=e.length>=r),i&&(t.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(t,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,t,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}};var Ic=class{constructor(e,t,r,i){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Ss(this),this.idTokenSubscription=new Ss(this),this.beforeStateQueue=new _c(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=zf,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Yt(t)),this._initializationPromise=this.queue(()=>S(this,null,function*(){var r,i;if(!this._deleted&&(this.persistenceManager=yield As.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{yield this._popupRedirectResolver._initialize(this)}catch{}yield this.initializeCurrentUser(t),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){return S(this,null,function*(){if(this._deleted)return;let e=yield this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),yield this.currentUser.getIdToken();return}yield this._updateCurrentUser(e,!0)}})}initializeCurrentUserFromIdToken(e){return S(this,null,function*(){try{let t=yield Qf(this,{idToken:e}),r=yield ti._fromGetAccountInfoResponse(this,t,e);yield this.directlySetCurrentUser(r)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),yield this.directlySetCurrentUser(null)}})}initializeCurrentUser(e){return S(this,null,function*(){var t;if(kn(this.app)){let a=this.app.settings.authIdToken;return a?new Promise(u=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(a).then(u,u))}):this.directlySetCurrentUser(null)}let r=yield this.assertedPersistence.getCurrentUser(),i=r,o=!1;if(e&&this.config.authDomain){yield this.getOrInitRedirectPersistenceManager();let a=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,u=i?._redirectEventId,l=yield this.tryRedirectSignIn(e);(!a||a===u)&&l?.user&&(i=l.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{yield this.beforeStateQueue.runMiddleware(i)}catch(a){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(a))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return W(this._popupRedirectResolver,this,"argument-error"),yield this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)})}tryRedirectSignIn(e){return S(this,null,function*(){let t=null;try{t=yield this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{yield this._setRedirectUser(null)}return t})}reloadAndSetCurrentUserOrClear(e){return S(this,null,function*(){try{yield Ts(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)})}useDeviceLanguage(){this.languageCode=kv()}_delete(){return S(this,null,function*(){this._deleted=!0})}updateCurrentUser(e){return S(this,null,function*(){if(kn(this.app))return Promise.reject(vs(this));let t=e?Ze(e):null;return t&&W(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))})}_updateCurrentUser(e,t=!1){return S(this,null,function*(){if(!this._deleted)return e&&W(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||(yield this.beforeStateQueue.runMiddleware(e)),this.queue(()=>S(this,null,function*(){yield this.directlySetCurrentUser(e),this.notifyAuthListeners()}))})}signOut(){return S(this,null,function*(){return kn(this.app)?Promise.reject(vs(this)):(yield this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&(yield this._setRedirectUser(null)),this._updateCurrentUser(null,!0))})}setPersistence(e){return kn(this.app)?Promise.reject(vs(this)):this.queue(()=>S(this,null,function*(){yield this.assertedPersistence.setPersistence(Yt(e))}))}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}validatePassword(e){return S(this,null,function*(){this._getPasswordPolicyInternal()||(yield this._updatePasswordPolicy());let t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)})}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}_updatePasswordPolicy(){return S(this,null,function*(){let e=yield Hv(this),t=new vc(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t})}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new dt("auth","Firebase",e())}onAuthStateChanged(e,t,r){return this.registerStateListener(this.authStateSubscription,e,t,r)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,r){return this.registerStateListener(this.idTokenSubscription,e,t,r)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{let r=this.onAuthStateChanged(()=>{r(),e()},t)}})}revokeAccessToken(e){return S(this,null,function*(){if(this.currentUser){let t=yield this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(r.tenantId=this.tenantId),yield Uv(this,r)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}_setRedirectUser(e,t){return S(this,null,function*(){let r=yield this.getOrInitRedirectPersistenceManager(t);return e===null?r.removeCurrentUser():r.setCurrentUser(e)})}getOrInitRedirectPersistenceManager(e){return S(this,null,function*(){if(!this.redirectPersistenceManager){let t=e&&Yt(e)||this._popupRedirectResolver;W(t,this,"argument-error"),this.redirectPersistenceManager=yield As.create(this,[Yt(t._redirectPersistence)],"redirectUser"),this.redirectUser=yield this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager})}_redirectUserForId(e){return S(this,null,function*(){var t,r;return this._isInitialized&&(yield this.queue(()=>S(this,null,function*(){}))),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null})}_persistUserIfCurrent(e){return S(this,null,function*(){if(e===this.currentUser)return this.queue(()=>S(this,null,function*(){return this.directlySetCurrentUser(e)}))})}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);let r=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,r,i){if(this._deleted)return()=>{};let o=typeof t=="function"?t:t.next.bind(t),a=!1,u=this._isInitialized?Promise.resolve():this._initializationPromise;if(W(u,this,"internal-error"),u.then(()=>{a||o(this.currentUser)}),typeof t=="function"){let l=e.addObserver(t,r,i);return()=>{a=!0,l()}}else{let l=e.addObserver(t);return()=>{a=!0,l()}}}directlySetCurrentUser(e){return S(this,null,function*(){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?yield this.assertedPersistence.setCurrentUser(e):yield this.assertedPersistence.removeCurrentUser()})}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return W(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Xf(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){return S(this,null,function*(){var e;let t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);let r=yield(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader();r&&(t["X-Firebase-Client"]=r);let i=yield this._getAppCheckToken();return i&&(t["X-Firebase-AppCheck"]=i),t})}_getAppCheckToken(){return S(this,null,function*(){var e;let t=yield(e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken();return t?.error&&Cv(`Error while retrieving App Check token: ${t.error}`),t?.token})}};function Jv(n){return Ze(n)}var Ss=class{constructor(e){this.auth=e,this.observer=null,this.addObserver=If(t=>this.observer=t)}get next(){return W(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};var Yv={loadJS(){return S(this,null,function*(){throw new Error("Unable to load external scripts")})},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Xv(n){Yv=n}function Zv(n){return`__${n}${Math.floor(Math.random()*1e6)}`}function eI(n,e){let t=e?.persistence||[],r=(Array.isArray(t)?t:[t]).map(Yt);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(r,e?.popupRedirectResolver)}var fA=Zv("rcb"),pA=new Xt(3e4,6e4);var gA=new Xt(2e3,1e4);var mA=10*60*1e3;var yA=new Xt(3e4,6e4);var _A=new Xt(5e3,15e3);var vA=encodeURIComponent("fac");var Bf="@firebase/auth",$f="1.7.9";var wc=class{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}getToken(e){return S(this,null,function*(){return this.assertAuthConfigured(),yield this.auth._initializationPromise,this.auth.currentUser?{accessToken:yield this.auth.currentUser.getIdToken(e)}:null})}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;let t=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();let t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){W(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};function tI(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function nI(n){kt(new $e("auth",(e,{options:t})=>{let r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:a,authDomain:u}=r.options;W(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});let l={apiKey:a,authDomain:u,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Xf(n)},d=new Ic(r,i,o,l);return eI(d,t),d},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,r)=>{e.getProvider("auth-internal").initialize()})),kt(new $e("auth-internal",e=>{let t=Jv(e.getProvider("auth").getImmediate());return(r=>new wc(r))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),fe(Bf,$f,tI(n)),fe(Bf,$f,"esm2017")}var rI=5*60,IA=df("authIdTokenMaxAge")||rI;function iI(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Xv({loadJS(n){return new Promise((e,t)=>{let r=document.createElement("script");r.setAttribute("src",n),r.onload=e,r.onerror=i=>{let o=Ec("internal-error");o.customData=i,t(o)},r.type="text/javascript",r.charset="UTF-8",iI().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});nI("Browser");var rw="auth";var Rs=class{constructor(){return Hr(rw)}};var Zf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ep={};var bc,tp;(function(){var n;function e(I,p){function m(){}m.prototype=p.prototype,I.D=p.prototype,I.prototype=new m,I.prototype.constructor=I,I.C=function(_,v,T){for(var g=Array(arguments.length-2),ot=2;ot<arguments.length;ot++)g[ot-2]=arguments[ot];return p.prototype[v].apply(_,g)}}function t(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(r,t),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(I,p,m){m||(m=0);var _=Array(16);if(typeof p=="string")for(var v=0;16>v;++v)_[v]=p.charCodeAt(m++)|p.charCodeAt(m++)<<8|p.charCodeAt(m++)<<16|p.charCodeAt(m++)<<24;else for(v=0;16>v;++v)_[v]=p[m++]|p[m++]<<8|p[m++]<<16|p[m++]<<24;p=I.g[0],m=I.g[1],v=I.g[2];var T=I.g[3],g=p+(T^m&(v^T))+_[0]+3614090360&4294967295;p=m+(g<<7&4294967295|g>>>25),g=T+(v^p&(m^v))+_[1]+3905402710&4294967295,T=p+(g<<12&4294967295|g>>>20),g=v+(m^T&(p^m))+_[2]+606105819&4294967295,v=T+(g<<17&4294967295|g>>>15),g=m+(p^v&(T^p))+_[3]+3250441966&4294967295,m=v+(g<<22&4294967295|g>>>10),g=p+(T^m&(v^T))+_[4]+4118548399&4294967295,p=m+(g<<7&4294967295|g>>>25),g=T+(v^p&(m^v))+_[5]+1200080426&4294967295,T=p+(g<<12&4294967295|g>>>20),g=v+(m^T&(p^m))+_[6]+2821735955&4294967295,v=T+(g<<17&4294967295|g>>>15),g=m+(p^v&(T^p))+_[7]+4249261313&4294967295,m=v+(g<<22&4294967295|g>>>10),g=p+(T^m&(v^T))+_[8]+1770035416&4294967295,p=m+(g<<7&4294967295|g>>>25),g=T+(v^p&(m^v))+_[9]+2336552879&4294967295,T=p+(g<<12&4294967295|g>>>20),g=v+(m^T&(p^m))+_[10]+4294925233&4294967295,v=T+(g<<17&4294967295|g>>>15),g=m+(p^v&(T^p))+_[11]+2304563134&4294967295,m=v+(g<<22&4294967295|g>>>10),g=p+(T^m&(v^T))+_[12]+1804603682&4294967295,p=m+(g<<7&4294967295|g>>>25),g=T+(v^p&(m^v))+_[13]+4254626195&4294967295,T=p+(g<<12&4294967295|g>>>20),g=v+(m^T&(p^m))+_[14]+2792965006&4294967295,v=T+(g<<17&4294967295|g>>>15),g=m+(p^v&(T^p))+_[15]+1236535329&4294967295,m=v+(g<<22&4294967295|g>>>10),g=p+(v^T&(m^v))+_[1]+4129170786&4294967295,p=m+(g<<5&4294967295|g>>>27),g=T+(m^v&(p^m))+_[6]+3225465664&4294967295,T=p+(g<<9&4294967295|g>>>23),g=v+(p^m&(T^p))+_[11]+643717713&4294967295,v=T+(g<<14&4294967295|g>>>18),g=m+(T^p&(v^T))+_[0]+3921069994&4294967295,m=v+(g<<20&4294967295|g>>>12),g=p+(v^T&(m^v))+_[5]+3593408605&4294967295,p=m+(g<<5&4294967295|g>>>27),g=T+(m^v&(p^m))+_[10]+38016083&4294967295,T=p+(g<<9&4294967295|g>>>23),g=v+(p^m&(T^p))+_[15]+3634488961&4294967295,v=T+(g<<14&4294967295|g>>>18),g=m+(T^p&(v^T))+_[4]+3889429448&4294967295,m=v+(g<<20&4294967295|g>>>12),g=p+(v^T&(m^v))+_[9]+568446438&4294967295,p=m+(g<<5&4294967295|g>>>27),g=T+(m^v&(p^m))+_[14]+3275163606&4294967295,T=p+(g<<9&4294967295|g>>>23),g=v+(p^m&(T^p))+_[3]+4107603335&4294967295,v=T+(g<<14&4294967295|g>>>18),g=m+(T^p&(v^T))+_[8]+1163531501&4294967295,m=v+(g<<20&4294967295|g>>>12),g=p+(v^T&(m^v))+_[13]+2850285829&4294967295,p=m+(g<<5&4294967295|g>>>27),g=T+(m^v&(p^m))+_[2]+4243563512&4294967295,T=p+(g<<9&4294967295|g>>>23),g=v+(p^m&(T^p))+_[7]+1735328473&4294967295,v=T+(g<<14&4294967295|g>>>18),g=m+(T^p&(v^T))+_[12]+2368359562&4294967295,m=v+(g<<20&4294967295|g>>>12),g=p+(m^v^T)+_[5]+4294588738&4294967295,p=m+(g<<4&4294967295|g>>>28),g=T+(p^m^v)+_[8]+2272392833&4294967295,T=p+(g<<11&4294967295|g>>>21),g=v+(T^p^m)+_[11]+1839030562&4294967295,v=T+(g<<16&4294967295|g>>>16),g=m+(v^T^p)+_[14]+4259657740&4294967295,m=v+(g<<23&4294967295|g>>>9),g=p+(m^v^T)+_[1]+2763975236&4294967295,p=m+(g<<4&4294967295|g>>>28),g=T+(p^m^v)+_[4]+1272893353&4294967295,T=p+(g<<11&4294967295|g>>>21),g=v+(T^p^m)+_[7]+4139469664&4294967295,v=T+(g<<16&4294967295|g>>>16),g=m+(v^T^p)+_[10]+3200236656&4294967295,m=v+(g<<23&4294967295|g>>>9),g=p+(m^v^T)+_[13]+681279174&4294967295,p=m+(g<<4&4294967295|g>>>28),g=T+(p^m^v)+_[0]+3936430074&4294967295,T=p+(g<<11&4294967295|g>>>21),g=v+(T^p^m)+_[3]+3572445317&4294967295,v=T+(g<<16&4294967295|g>>>16),g=m+(v^T^p)+_[6]+76029189&4294967295,m=v+(g<<23&4294967295|g>>>9),g=p+(m^v^T)+_[9]+3654602809&4294967295,p=m+(g<<4&4294967295|g>>>28),g=T+(p^m^v)+_[12]+3873151461&4294967295,T=p+(g<<11&4294967295|g>>>21),g=v+(T^p^m)+_[15]+530742520&4294967295,v=T+(g<<16&4294967295|g>>>16),g=m+(v^T^p)+_[2]+3299628645&4294967295,m=v+(g<<23&4294967295|g>>>9),g=p+(v^(m|~T))+_[0]+4096336452&4294967295,p=m+(g<<6&4294967295|g>>>26),g=T+(m^(p|~v))+_[7]+1126891415&4294967295,T=p+(g<<10&4294967295|g>>>22),g=v+(p^(T|~m))+_[14]+2878612391&4294967295,v=T+(g<<15&4294967295|g>>>17),g=m+(T^(v|~p))+_[5]+4237533241&4294967295,m=v+(g<<21&4294967295|g>>>11),g=p+(v^(m|~T))+_[12]+1700485571&4294967295,p=m+(g<<6&4294967295|g>>>26),g=T+(m^(p|~v))+_[3]+2399980690&4294967295,T=p+(g<<10&4294967295|g>>>22),g=v+(p^(T|~m))+_[10]+4293915773&4294967295,v=T+(g<<15&4294967295|g>>>17),g=m+(T^(v|~p))+_[1]+2240044497&4294967295,m=v+(g<<21&4294967295|g>>>11),g=p+(v^(m|~T))+_[8]+1873313359&4294967295,p=m+(g<<6&4294967295|g>>>26),g=T+(m^(p|~v))+_[15]+4264355552&4294967295,T=p+(g<<10&4294967295|g>>>22),g=v+(p^(T|~m))+_[6]+2734768916&4294967295,v=T+(g<<15&4294967295|g>>>17),g=m+(T^(v|~p))+_[13]+1309151649&4294967295,m=v+(g<<21&4294967295|g>>>11),g=p+(v^(m|~T))+_[4]+4149444226&4294967295,p=m+(g<<6&4294967295|g>>>26),g=T+(m^(p|~v))+_[11]+3174756917&4294967295,T=p+(g<<10&4294967295|g>>>22),g=v+(p^(T|~m))+_[2]+718787259&4294967295,v=T+(g<<15&4294967295|g>>>17),g=m+(T^(v|~p))+_[9]+3951481745&4294967295,I.g[0]=I.g[0]+p&4294967295,I.g[1]=I.g[1]+(v+(g<<21&4294967295|g>>>11))&4294967295,I.g[2]=I.g[2]+v&4294967295,I.g[3]=I.g[3]+T&4294967295}r.prototype.u=function(I,p){p===void 0&&(p=I.length);for(var m=p-this.blockSize,_=this.B,v=this.h,T=0;T<p;){if(v==0)for(;T<=m;)i(this,I,T),T+=this.blockSize;if(typeof I=="string"){for(;T<p;)if(_[v++]=I.charCodeAt(T++),v==this.blockSize){i(this,_),v=0;break}}else for(;T<p;)if(_[v++]=I[T++],v==this.blockSize){i(this,_),v=0;break}}this.h=v,this.o+=p},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var p=1;p<I.length-8;++p)I[p]=0;var m=8*this.o;for(p=I.length-8;p<I.length;++p)I[p]=m&255,m/=256;for(this.u(I),I=Array(16),p=m=0;4>p;++p)for(var _=0;32>_;_+=8)I[m++]=this.g[p]>>>_&255;return I};function o(I,p){var m=u;return Object.prototype.hasOwnProperty.call(m,I)?m[I]:m[I]=p(I)}function a(I,p){this.h=p;for(var m=[],_=!0,v=I.length-1;0<=v;v--){var T=I[v]|0;_&&T==p||(m[v]=T,_=!1)}this.g=m}var u={};function l(I){return-128<=I&&128>I?o(I,function(p){return new a([p|0],0>p?-1:0)}):new a([I|0],0>I?-1:0)}function d(I){if(isNaN(I)||!isFinite(I))return E;if(0>I)return N(d(-I));for(var p=[],m=1,_=0;I>=m;_++)p[_]=I/m|0,m*=4294967296;return new a(p,0)}function y(I,p){if(I.length==0)throw Error("number format error: empty string");if(p=p||10,2>p||36<p)throw Error("radix out of range: "+p);if(I.charAt(0)=="-")return N(y(I.substring(1),p));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var m=d(Math.pow(p,8)),_=E,v=0;v<I.length;v+=8){var T=Math.min(8,I.length-v),g=parseInt(I.substring(v,v+T),p);8>T?(T=d(Math.pow(p,T)),_=_.j(T).add(d(g))):(_=_.j(m),_=_.add(d(g)))}return _}var E=l(0),b=l(1),D=l(16777216);n=a.prototype,n.m=function(){if(V(this))return-N(this).m();for(var I=0,p=1,m=0;m<this.g.length;m++){var _=this.i(m);I+=(0<=_?_:4294967296+_)*p,p*=4294967296}return I},n.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(k(this))return"0";if(V(this))return"-"+N(this).toString(I);for(var p=d(Math.pow(I,6)),m=this,_="";;){var v=ce(m,p).g;m=G(m,v.j(p));var T=((0<m.g.length?m.g[0]:m.h)>>>0).toString(I);if(m=v,k(m))return T+_;for(;6>T.length;)T="0"+T;_=T+_}},n.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function k(I){if(I.h!=0)return!1;for(var p=0;p<I.g.length;p++)if(I.g[p]!=0)return!1;return!0}function V(I){return I.h==-1}n.l=function(I){return I=G(this,I),V(I)?-1:k(I)?0:1};function N(I){for(var p=I.g.length,m=[],_=0;_<p;_++)m[_]=~I.g[_];return new a(m,~I.h).add(b)}n.abs=function(){return V(this)?N(this):this},n.add=function(I){for(var p=Math.max(this.g.length,I.g.length),m=[],_=0,v=0;v<=p;v++){var T=_+(this.i(v)&65535)+(I.i(v)&65535),g=(T>>>16)+(this.i(v)>>>16)+(I.i(v)>>>16);_=g>>>16,T&=65535,g&=65535,m[v]=g<<16|T}return new a(m,m[m.length-1]&-2147483648?-1:0)};function G(I,p){return I.add(N(p))}n.j=function(I){if(k(this)||k(I))return E;if(V(this))return V(I)?N(this).j(N(I)):N(N(this).j(I));if(V(I))return N(this.j(N(I)));if(0>this.l(D)&&0>I.l(D))return d(this.m()*I.m());for(var p=this.g.length+I.g.length,m=[],_=0;_<2*p;_++)m[_]=0;for(_=0;_<this.g.length;_++)for(var v=0;v<I.g.length;v++){var T=this.i(_)>>>16,g=this.i(_)&65535,ot=I.i(v)>>>16,Xn=I.i(v)&65535;m[2*_+2*v]+=g*Xn,Q(m,2*_+2*v),m[2*_+2*v+1]+=T*Xn,Q(m,2*_+2*v+1),m[2*_+2*v+1]+=g*ot,Q(m,2*_+2*v+1),m[2*_+2*v+2]+=T*ot,Q(m,2*_+2*v+2)}for(_=0;_<p;_++)m[_]=m[2*_+1]<<16|m[2*_];for(_=p;_<2*p;_++)m[_]=0;return new a(m,0)};function Q(I,p){for(;(I[p]&65535)!=I[p];)I[p+1]+=I[p]>>>16,I[p]&=65535,p++}function K(I,p){this.g=I,this.h=p}function ce(I,p){if(k(p))throw Error("division by zero");if(k(I))return new K(E,E);if(V(I))return p=ce(N(I),p),new K(N(p.g),N(p.h));if(V(p))return p=ce(I,N(p)),new K(N(p.g),p.h);if(30<I.g.length){if(V(I)||V(p))throw Error("slowDivide_ only works with positive integers.");for(var m=b,_=p;0>=_.l(I);)m=He(m),_=He(_);var v=ue(m,1),T=ue(_,1);for(_=ue(_,2),m=ue(m,2);!k(_);){var g=T.add(_);0>=g.l(I)&&(v=v.add(m),T=g),_=ue(_,1),m=ue(m,1)}return p=G(I,v.j(p)),new K(v,p)}for(v=E;0<=I.l(p);){for(m=Math.max(1,Math.floor(I.m()/p.m())),_=Math.ceil(Math.log(m)/Math.LN2),_=48>=_?1:Math.pow(2,_-48),T=d(m),g=T.j(p);V(g)||0<g.l(I);)m-=_,T=d(m),g=T.j(p);k(T)&&(T=b),v=v.add(T),I=G(I,g)}return new K(v,I)}n.A=function(I){return ce(this,I).h},n.and=function(I){for(var p=Math.max(this.g.length,I.g.length),m=[],_=0;_<p;_++)m[_]=this.i(_)&I.i(_);return new a(m,this.h&I.h)},n.or=function(I){for(var p=Math.max(this.g.length,I.g.length),m=[],_=0;_<p;_++)m[_]=this.i(_)|I.i(_);return new a(m,this.h|I.h)},n.xor=function(I){for(var p=Math.max(this.g.length,I.g.length),m=[],_=0;_<p;_++)m[_]=this.i(_)^I.i(_);return new a(m,this.h^I.h)};function He(I){for(var p=I.g.length+1,m=[],_=0;_<p;_++)m[_]=I.i(_)<<1|I.i(_-1)>>>31;return new a(m,I.h)}function ue(I,p){var m=p>>5;p%=32;for(var _=I.g.length-m,v=[],T=0;T<_;T++)v[T]=0<p?I.i(T+m)>>>p|I.i(T+m+1)<<32-p:I.i(T+m);return new a(v,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,tp=ep.Md5=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=d,a.fromString=y,bc=ep.Integer=a}).apply(typeof Zf<"u"?Zf:typeof self<"u"?self:typeof window<"u"?window:{});var Cs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},pt={};var Rc,iw,Vn,Cc,ni,Ps,Pc,Dc,kc;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(s,c,h){return s==Array.prototype||s==Object.prototype||(s[c]=h.value),s};function t(s){s=[typeof globalThis=="object"&&globalThis,s,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cs=="object"&&Cs];for(var c=0;c<s.length;++c){var h=s[c];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=t(this);function i(s,c){if(c)e:{var h=r;s=s.split(".");for(var f=0;f<s.length-1;f++){var w=s[f];if(!(w in h))break e;h=h[w]}s=s[s.length-1],f=h[s],c=c(f),c!=f&&c!=null&&e(h,s,{configurable:!0,writable:!0,value:c})}}function o(s,c){s instanceof String&&(s+="");var h=0,f=!1,w={next:function(){if(!f&&h<s.length){var A=h++;return{value:c(A,s[A]),done:!1}}return f=!0,{done:!0,value:void 0}}};return w[Symbol.iterator]=function(){return w},w}i("Array.prototype.values",function(s){return s||function(){return o(this,function(c,h){return h})}});var a=a||{},u=this||self;function l(s){var c=typeof s;return c=c!="object"?c:s?Array.isArray(s)?"array":c:"null",c=="array"||c=="object"&&typeof s.length=="number"}function d(s){var c=typeof s;return c=="object"&&s!=null||c=="function"}function y(s,c,h){return s.call.apply(s.bind,arguments)}function E(s,c,h){if(!s)throw Error();if(2<arguments.length){var f=Array.prototype.slice.call(arguments,2);return function(){var w=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(w,f),s.apply(c,w)}}return function(){return s.apply(c,arguments)}}function b(s,c,h){return b=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?y:E,b.apply(null,arguments)}function D(s,c){var h=Array.prototype.slice.call(arguments,1);return function(){var f=h.slice();return f.push.apply(f,arguments),s.apply(this,f)}}function k(s,c){function h(){}h.prototype=c.prototype,s.aa=c.prototype,s.prototype=new h,s.prototype.constructor=s,s.Qb=function(f,w,A){for(var P=Array(arguments.length-2),J=2;J<arguments.length;J++)P[J-2]=arguments[J];return c.prototype[w].apply(f,P)}}function V(s){let c=s.length;if(0<c){let h=Array(c);for(let f=0;f<c;f++)h[f]=s[f];return h}return[]}function N(s,c){for(let h=1;h<arguments.length;h++){let f=arguments[h];if(l(f)){let w=s.length||0,A=f.length||0;s.length=w+A;for(let P=0;P<A;P++)s[w+P]=f[P]}else s.push(f)}}class G{constructor(c,h){this.i=c,this.j=h,this.h=0,this.g=null}get(){let c;return 0<this.h?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function Q(s){return/^[\s\xa0]*$/.test(s)}function K(){var s=u.navigator;return s&&(s=s.userAgent)?s:""}function ce(s){return ce[" "](s),s}ce[" "]=function(){};var He=K().indexOf("Gecko")!=-1&&!(K().toLowerCase().indexOf("webkit")!=-1&&K().indexOf("Edge")==-1)&&!(K().indexOf("Trident")!=-1||K().indexOf("MSIE")!=-1)&&K().indexOf("Edge")==-1;function ue(s,c,h){for(let f in s)c.call(h,s[f],f,s)}function I(s,c){for(let h in s)c.call(void 0,s[h],h,s)}function p(s){let c={};for(let h in s)c[h]=s[h];return c}let m="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _(s,c){let h,f;for(let w=1;w<arguments.length;w++){f=arguments[w];for(h in f)s[h]=f[h];for(let A=0;A<m.length;A++)h=m[A],Object.prototype.hasOwnProperty.call(f,h)&&(s[h]=f[h])}}function v(s){var c=1;s=s.split(":");let h=[];for(;0<c&&s.length;)h.push(s.shift()),c--;return s.length&&h.push(s.join(":")),h}function T(s){u.setTimeout(()=>{throw s},0)}function g(){var s=ao;let c=null;return s.g&&(c=s.g,s.g=s.g.next,s.g||(s.h=null),c.next=null),c}class ot{constructor(){this.h=this.g=null}add(c,h){let f=Xn.get();f.set(c,h),this.h?this.h.next=f:this.g=f,this.h=f}}var Xn=new G(()=>new mg,s=>s.reset());class mg{constructor(){this.next=this.g=this.h=null}set(c,h){this.h=c,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let Zn,er=!1,ao=new ot,hl=()=>{let s=u.Promise.resolve(void 0);Zn=()=>{s.then(yg)}};var yg=()=>{for(var s;s=g();){try{s.h.call(s.g)}catch(h){T(h)}var c=Xn;c.j(s),100>c.h&&(c.h++,s.next=c.g,c.g=s)}er=!1};function vt(){this.s=this.s,this.C=this.C}vt.prototype.s=!1,vt.prototype.ma=function(){this.s||(this.s=!0,this.N())},vt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ve(s,c){this.type=s,this.g=this.target=c,this.defaultPrevented=!1}ve.prototype.h=function(){this.defaultPrevented=!0};var _g=function(){if(!u.addEventListener||!Object.defineProperty)return!1;var s=!1,c=Object.defineProperty({},"passive",{get:function(){s=!0}});try{let h=()=>{};u.addEventListener("test",h,c),u.removeEventListener("test",h,c)}catch{}return s}();function tr(s,c){if(ve.call(this,s?s.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,s){var h=this.type=s.type,f=s.changedTouches&&s.changedTouches.length?s.changedTouches[0]:null;if(this.target=s.target||s.srcElement,this.g=c,c=s.relatedTarget){if(He){e:{try{ce(c.nodeName);var w=!0;break e}catch{}w=!1}w||(c=null)}}else h=="mouseover"?c=s.fromElement:h=="mouseout"&&(c=s.toElement);this.relatedTarget=c,f?(this.clientX=f.clientX!==void 0?f.clientX:f.pageX,this.clientY=f.clientY!==void 0?f.clientY:f.pageY,this.screenX=f.screenX||0,this.screenY=f.screenY||0):(this.clientX=s.clientX!==void 0?s.clientX:s.pageX,this.clientY=s.clientY!==void 0?s.clientY:s.pageY,this.screenX=s.screenX||0,this.screenY=s.screenY||0),this.button=s.button,this.key=s.key||"",this.ctrlKey=s.ctrlKey,this.altKey=s.altKey,this.shiftKey=s.shiftKey,this.metaKey=s.metaKey,this.pointerId=s.pointerId||0,this.pointerType=typeof s.pointerType=="string"?s.pointerType:vg[s.pointerType]||"",this.state=s.state,this.i=s,s.defaultPrevented&&tr.aa.h.call(this)}}k(tr,ve);var vg={2:"touch",3:"pen",4:"mouse"};tr.prototype.h=function(){tr.aa.h.call(this);var s=this.i;s.preventDefault?s.preventDefault():s.returnValue=!1};var nr="closure_listenable_"+(1e6*Math.random()|0),Ig=0;function wg(s,c,h,f,w){this.listener=s,this.proxy=null,this.src=c,this.type=h,this.capture=!!f,this.ha=w,this.key=++Ig,this.da=this.fa=!1}function Ii(s){s.da=!0,s.listener=null,s.proxy=null,s.src=null,s.ha=null}function wi(s){this.src=s,this.g={},this.h=0}wi.prototype.add=function(s,c,h,f,w){var A=s.toString();s=this.g[A],s||(s=this.g[A]=[],this.h++);var P=uo(s,c,f,w);return-1<P?(c=s[P],h||(c.fa=!1)):(c=new wg(c,this.src,A,!!f,w),c.fa=h,s.push(c)),c};function co(s,c){var h=c.type;if(h in s.g){var f=s.g[h],w=Array.prototype.indexOf.call(f,c,void 0),A;(A=0<=w)&&Array.prototype.splice.call(f,w,1),A&&(Ii(c),s.g[h].length==0&&(delete s.g[h],s.h--))}}function uo(s,c,h,f){for(var w=0;w<s.length;++w){var A=s[w];if(!A.da&&A.listener==c&&A.capture==!!h&&A.ha==f)return w}return-1}var lo="closure_lm_"+(1e6*Math.random()|0),ho={};function dl(s,c,h,f,w){if(f&&f.once)return pl(s,c,h,f,w);if(Array.isArray(c)){for(var A=0;A<c.length;A++)dl(s,c[A],h,f,w);return null}return h=mo(h),s&&s[nr]?s.K(c,h,d(f)?!!f.capture:!!f,w):fl(s,c,h,!1,f,w)}function fl(s,c,h,f,w,A){if(!c)throw Error("Invalid event type");var P=d(w)?!!w.capture:!!w,J=po(s);if(J||(s[lo]=J=new wi(s)),h=J.add(c,h,f,P,A),h.proxy)return h;if(f=Eg(),h.proxy=f,f.src=s,f.listener=h,s.addEventListener)_g||(w=P),w===void 0&&(w=!1),s.addEventListener(c.toString(),f,w);else if(s.attachEvent)s.attachEvent(ml(c.toString()),f);else if(s.addListener&&s.removeListener)s.addListener(f);else throw Error("addEventListener and attachEvent are unavailable.");return h}function Eg(){function s(h){return c.call(s.src,s.listener,h)}let c=Tg;return s}function pl(s,c,h,f,w){if(Array.isArray(c)){for(var A=0;A<c.length;A++)pl(s,c[A],h,f,w);return null}return h=mo(h),s&&s[nr]?s.L(c,h,d(f)?!!f.capture:!!f,w):fl(s,c,h,!0,f,w)}function gl(s,c,h,f,w){if(Array.isArray(c))for(var A=0;A<c.length;A++)gl(s,c[A],h,f,w);else f=d(f)?!!f.capture:!!f,h=mo(h),s&&s[nr]?(s=s.i,c=String(c).toString(),c in s.g&&(A=s.g[c],h=uo(A,h,f,w),-1<h&&(Ii(A[h]),Array.prototype.splice.call(A,h,1),A.length==0&&(delete s.g[c],s.h--)))):s&&(s=po(s))&&(c=s.g[c.toString()],s=-1,c&&(s=uo(c,h,f,w)),(h=-1<s?c[s]:null)&&fo(h))}function fo(s){if(typeof s!="number"&&s&&!s.da){var c=s.src;if(c&&c[nr])co(c.i,s);else{var h=s.type,f=s.proxy;c.removeEventListener?c.removeEventListener(h,f,s.capture):c.detachEvent?c.detachEvent(ml(h),f):c.addListener&&c.removeListener&&c.removeListener(f),(h=po(c))?(co(h,s),h.h==0&&(h.src=null,c[lo]=null)):Ii(s)}}}function ml(s){return s in ho?ho[s]:ho[s]="on"+s}function Tg(s,c){if(s.da)s=!0;else{c=new tr(c,this);var h=s.listener,f=s.ha||s.src;s.fa&&fo(s),s=h.call(f,c)}return s}function po(s){return s=s[lo],s instanceof wi?s:null}var go="__closure_events_fn_"+(1e9*Math.random()>>>0);function mo(s){return typeof s=="function"?s:(s[go]||(s[go]=function(c){return s.handleEvent(c)}),s[go])}function Ie(){vt.call(this),this.i=new wi(this),this.M=this,this.F=null}k(Ie,vt),Ie.prototype[nr]=!0,Ie.prototype.removeEventListener=function(s,c,h,f){gl(this,s,c,h,f)};function be(s,c){var h,f=s.F;if(f)for(h=[];f;f=f.F)h.push(f);if(s=s.M,f=c.type||c,typeof c=="string")c=new ve(c,s);else if(c instanceof ve)c.target=c.target||s;else{var w=c;c=new ve(f,s),_(c,w)}if(w=!0,h)for(var A=h.length-1;0<=A;A--){var P=c.g=h[A];w=Ei(P,f,!0,c)&&w}if(P=c.g=s,w=Ei(P,f,!0,c)&&w,w=Ei(P,f,!1,c)&&w,h)for(A=0;A<h.length;A++)P=c.g=h[A],w=Ei(P,f,!1,c)&&w}Ie.prototype.N=function(){if(Ie.aa.N.call(this),this.i){var s=this.i,c;for(c in s.g){for(var h=s.g[c],f=0;f<h.length;f++)Ii(h[f]);delete s.g[c],s.h--}}this.F=null},Ie.prototype.K=function(s,c,h,f){return this.i.add(String(s),c,!1,h,f)},Ie.prototype.L=function(s,c,h,f){return this.i.add(String(s),c,!0,h,f)};function Ei(s,c,h,f){if(c=s.i.g[String(c)],!c)return!0;c=c.concat();for(var w=!0,A=0;A<c.length;++A){var P=c[A];if(P&&!P.da&&P.capture==h){var J=P.listener,ye=P.ha||P.src;P.fa&&co(s.i,P),w=J.call(ye,f)!==!1&&w}}return w&&!f.defaultPrevented}function yl(s,c,h){if(typeof s=="function")h&&(s=b(s,h));else if(s&&typeof s.handleEvent=="function")s=b(s.handleEvent,s);else throw Error("Invalid listener argument");return 2147483647<Number(c)?-1:u.setTimeout(s,c||0)}function _l(s){s.g=yl(()=>{s.g=null,s.i&&(s.i=!1,_l(s))},s.l);let c=s.h;s.h=null,s.m.apply(null,c)}class Ag extends vt{constructor(c,h){super(),this.m=c,this.l=h,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:_l(this)}N(){super.N(),this.g&&(u.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function rr(s){vt.call(this),this.h=s,this.g={}}k(rr,vt);var vl=[];function Il(s){ue(s.g,function(c,h){this.g.hasOwnProperty(h)&&fo(c)},s),s.g={}}rr.prototype.N=function(){rr.aa.N.call(this),Il(this)},rr.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yo=u.JSON.stringify,Sg=u.JSON.parse,bg=class{stringify(s){return u.JSON.stringify(s,void 0)}parse(s){return u.JSON.parse(s,void 0)}};function _o(){}_o.prototype.h=null;function wl(s){return s.h||(s.h=s.i())}function El(){}var ir={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function vo(){ve.call(this,"d")}k(vo,ve);function Io(){ve.call(this,"c")}k(Io,ve);var Ft={},Tl=null;function Ti(){return Tl=Tl||new Ie}Ft.La="serverreachability";function Al(s){ve.call(this,Ft.La,s)}k(Al,ve);function sr(s){let c=Ti();be(c,new Al(c))}Ft.STAT_EVENT="statevent";function Sl(s,c){ve.call(this,Ft.STAT_EVENT,s),this.stat=c}k(Sl,ve);function Re(s){let c=Ti();be(c,new Sl(c,s))}Ft.Ma="timingevent";function bl(s,c){ve.call(this,Ft.Ma,s),this.size=c}k(bl,ve);function or(s,c){if(typeof s!="function")throw Error("Fn must not be null and must be a function");return u.setTimeout(function(){s()},c)}function ar(){this.g=!0}ar.prototype.xa=function(){this.g=!1};function Rg(s,c,h,f,w,A){s.info(function(){if(s.g)if(A)for(var P="",J=A.split("&"),ye=0;ye<J.length;ye++){var z=J[ye].split("=");if(1<z.length){var we=z[0];z=z[1];var Ee=we.split("_");P=2<=Ee.length&&Ee[1]=="type"?P+(we+"="+z+"&"):P+(we+"=redacted&")}}else P=null;else P=A;return"XMLHTTP REQ ("+f+") [attempt "+w+"]: "+c+`
`+h+`
`+P})}function Cg(s,c,h,f,w,A,P){s.info(function(){return"XMLHTTP RESP ("+f+") [ attempt "+w+"]: "+c+`
`+h+`
`+A+" "+P})}function ln(s,c,h,f){s.info(function(){return"XMLHTTP TEXT ("+c+"): "+Dg(s,h)+(f?" "+f:"")})}function Pg(s,c){s.info(function(){return"TIMEOUT: "+c})}ar.prototype.info=function(){};function Dg(s,c){if(!s.g)return c;if(!c)return null;try{var h=JSON.parse(c);if(h){for(s=0;s<h.length;s++)if(Array.isArray(h[s])){var f=h[s];if(!(2>f.length)){var w=f[1];if(Array.isArray(w)&&!(1>w.length)){var A=w[0];if(A!="noop"&&A!="stop"&&A!="close")for(var P=1;P<w.length;P++)w[P]=""}}}}return yo(h)}catch{return c}}var Ai={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Rl={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},wo;function Si(){}k(Si,_o),Si.prototype.g=function(){return new XMLHttpRequest},Si.prototype.i=function(){return{}},wo=new Si;function It(s,c,h,f){this.j=s,this.i=c,this.l=h,this.R=f||1,this.U=new rr(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Cl}function Cl(){this.i=null,this.g="",this.h=!1}var Pl={},Eo={};function To(s,c,h){s.L=1,s.v=Pi(at(c)),s.m=h,s.P=!0,Dl(s,null)}function Dl(s,c){s.F=Date.now(),bi(s),s.A=at(s.v);var h=s.A,f=s.R;Array.isArray(f)||(f=[String(f)]),zl(h.i,"t",f),s.C=0,h=s.j.J,s.h=new Cl,s.g=ch(s.j,h?c:null,!s.m),0<s.O&&(s.M=new Ag(b(s.Y,s,s.g),s.O)),c=s.U,h=s.g,f=s.ca;var w="readystatechange";Array.isArray(w)||(w&&(vl[0]=w.toString()),w=vl);for(var A=0;A<w.length;A++){var P=dl(h,w[A],f||c.handleEvent,!1,c.h||c);if(!P)break;c.g[P.key]=P}c=s.H?p(s.H):{},s.m?(s.u||(s.u="POST"),c["Content-Type"]="application/x-www-form-urlencoded",s.g.ea(s.A,s.u,s.m,c)):(s.u="GET",s.g.ea(s.A,s.u,null,c)),sr(),Rg(s.i,s.u,s.A,s.l,s.R,s.m)}It.prototype.ca=function(s){s=s.target;let c=this.M;c&&ct(s)==3?c.j():this.Y(s)},It.prototype.Y=function(s){try{if(s==this.g)e:{let Ee=ct(this.g);var c=this.g.Ba();let fn=this.g.Z();if(!(3>Ee)&&(Ee!=3||this.g&&(this.h.h||this.g.oa()||Yl(this.g)))){this.J||Ee!=4||c==7||(c==8||0>=fn?sr(3):sr(2)),Ao(this);var h=this.g.Z();this.X=h;t:if(kl(this)){var f=Yl(this.g);s="";var w=f.length,A=ct(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ut(this),cr(this);var P="";break t}this.h.i=new u.TextDecoder}for(c=0;c<w;c++)this.h.h=!0,s+=this.h.i.decode(f[c],{stream:!(A&&c==w-1)});f.length=0,this.h.g+=s,this.C=0,P=this.h.g}else P=this.g.oa();if(this.o=h==200,Cg(this.i,this.u,this.A,this.l,this.R,Ee,h),this.o){if(this.T&&!this.K){t:{if(this.g){var J,ye=this.g;if((J=ye.g?ye.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Q(J)){var z=J;break t}}z=null}if(h=z)ln(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,So(this,h);else{this.o=!1,this.s=3,Re(12),Ut(this),cr(this);break e}}if(this.P){h=!0;let qe;for(;!this.J&&this.C<P.length;)if(qe=kg(this,P),qe==Eo){Ee==4&&(this.s=4,Re(14),h=!1),ln(this.i,this.l,null,"[Incomplete Response]");break}else if(qe==Pl){this.s=4,Re(15),ln(this.i,this.l,P,"[Invalid Chunk]"),h=!1;break}else ln(this.i,this.l,qe,null),So(this,qe);if(kl(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ee!=4||P.length!=0||this.h.h||(this.s=1,Re(16),h=!1),this.o=this.o&&h,!h)ln(this.i,this.l,P,"[Invalid Chunked Response]"),Ut(this),cr(this);else if(0<P.length&&!this.W){this.W=!0;var we=this.j;we.g==this&&we.ba&&!we.M&&(we.j.info("Great, no buffering proxy detected. Bytes received: "+P.length),ko(we),we.M=!0,Re(11))}}else ln(this.i,this.l,P,null),So(this,P);Ee==4&&Ut(this),this.o&&!this.J&&(Ee==4?ih(this.j,this):(this.o=!1,bi(this)))}else Hg(this.g),h==400&&0<P.indexOf("Unknown SID")?(this.s=3,Re(12)):(this.s=0,Re(13)),Ut(this),cr(this)}}}catch{}finally{}};function kl(s){return s.g?s.u=="GET"&&s.L!=2&&s.j.Ca:!1}function kg(s,c){var h=s.C,f=c.indexOf(`
`,h);return f==-1?Eo:(h=Number(c.substring(h,f)),isNaN(h)?Pl:(f+=1,f+h>c.length?Eo:(c=c.slice(f,f+h),s.C=f+h,c)))}It.prototype.cancel=function(){this.J=!0,Ut(this)};function bi(s){s.S=Date.now()+s.I,Nl(s,s.I)}function Nl(s,c){if(s.B!=null)throw Error("WatchDog timer not null");s.B=or(b(s.ba,s),c)}function Ao(s){s.B&&(u.clearTimeout(s.B),s.B=null)}It.prototype.ba=function(){this.B=null;let s=Date.now();0<=s-this.S?(Pg(this.i,this.A),this.L!=2&&(sr(),Re(17)),Ut(this),this.s=2,cr(this)):Nl(this,this.S-s)};function cr(s){s.j.G==0||s.J||ih(s.j,s)}function Ut(s){Ao(s);var c=s.M;c&&typeof c.ma=="function"&&c.ma(),s.M=null,Il(s.U),s.g&&(c=s.g,s.g=null,c.abort(),c.ma())}function So(s,c){try{var h=s.j;if(h.G!=0&&(h.g==s||bo(h.h,s))){if(!s.K&&bo(h.h,s)&&h.G==3){try{var f=h.Da.g.parse(c)}catch{f=null}if(Array.isArray(f)&&f.length==3){var w=f;if(w[0]==0){e:if(!h.u){if(h.g)if(h.g.F+3e3<s.F)xi(h),Ni(h);else break e;Do(h),Re(18)}}else h.za=w[1],0<h.za-h.T&&37500>w[2]&&h.F&&h.v==0&&!h.C&&(h.C=or(b(h.Za,h),6e3));if(1>=Vl(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else $t(h,11)}else if((s.K||h.g==s)&&xi(h),!Q(c))for(w=h.Da.g.parse(c),c=0;c<w.length;c++){let z=w[c];if(h.T=z[0],z=z[1],h.G==2)if(z[0]=="c"){h.K=z[1],h.ia=z[2];let we=z[3];we!=null&&(h.la=we,h.j.info("VER="+h.la));let Ee=z[4];Ee!=null&&(h.Aa=Ee,h.j.info("SVER="+h.Aa));let fn=z[5];fn!=null&&typeof fn=="number"&&0<fn&&(f=1.5*fn,h.L=f,h.j.info("backChannelRequestTimeoutMs_="+f)),f=h;let qe=s.g;if(qe){let Mi=qe.g?qe.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Mi){var A=f.h;A.g||Mi.indexOf("spdy")==-1&&Mi.indexOf("quic")==-1&&Mi.indexOf("h2")==-1||(A.j=A.l,A.g=new Set,A.h&&(Ro(A,A.h),A.h=null))}if(f.D){let No=qe.g?qe.g.getResponseHeader("X-HTTP-Session-Id"):null;No&&(f.ya=No,ee(f.I,f.D,No))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-s.F,h.j.info("Handshake RTT: "+h.R+"ms")),f=h;var P=s;if(f.qa=ah(f,f.J?f.ia:null,f.W),P.K){Ml(f.h,P);var J=P,ye=f.L;ye&&(J.I=ye),J.B&&(Ao(J),bi(J)),f.g=P}else nh(f);0<h.i.length&&Oi(h)}else z[0]!="stop"&&z[0]!="close"||$t(h,7);else h.G==3&&(z[0]=="stop"||z[0]=="close"?z[0]=="stop"?$t(h,7):Po(h):z[0]!="noop"&&h.l&&h.l.ta(z),h.v=0)}}sr(4)}catch{}}var Ng=class{constructor(s,c){this.g=s,this.map=c}};function Ol(s){this.l=s||10,u.PerformanceNavigationTiming?(s=u.performance.getEntriesByType("navigation"),s=0<s.length&&(s[0].nextHopProtocol=="hq"||s[0].nextHopProtocol=="h2")):s=!!(u.chrome&&u.chrome.loadTimes&&u.chrome.loadTimes()&&u.chrome.loadTimes().wasFetchedViaSpdy),this.j=s?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function xl(s){return s.h?!0:s.g?s.g.size>=s.j:!1}function Vl(s){return s.h?1:s.g?s.g.size:0}function bo(s,c){return s.h?s.h==c:s.g?s.g.has(c):!1}function Ro(s,c){s.g?s.g.add(c):s.h=c}function Ml(s,c){s.h&&s.h==c?s.h=null:s.g&&s.g.has(c)&&s.g.delete(c)}Ol.prototype.cancel=function(){if(this.i=Ll(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(let s of this.g.values())s.cancel();this.g.clear()}};function Ll(s){if(s.h!=null)return s.i.concat(s.h.D);if(s.g!=null&&s.g.size!==0){let c=s.i;for(let h of s.g.values())c=c.concat(h.D);return c}return V(s.i)}function Og(s){if(s.V&&typeof s.V=="function")return s.V();if(typeof Map<"u"&&s instanceof Map||typeof Set<"u"&&s instanceof Set)return Array.from(s.values());if(typeof s=="string")return s.split("");if(l(s)){for(var c=[],h=s.length,f=0;f<h;f++)c.push(s[f]);return c}c=[],h=0;for(f in s)c[h++]=s[f];return c}function xg(s){if(s.na&&typeof s.na=="function")return s.na();if(!s.V||typeof s.V!="function"){if(typeof Map<"u"&&s instanceof Map)return Array.from(s.keys());if(!(typeof Set<"u"&&s instanceof Set)){if(l(s)||typeof s=="string"){var c=[];s=s.length;for(var h=0;h<s;h++)c.push(h);return c}c=[],h=0;for(let f in s)c[h++]=f;return c}}}function Fl(s,c){if(s.forEach&&typeof s.forEach=="function")s.forEach(c,void 0);else if(l(s)||typeof s=="string")Array.prototype.forEach.call(s,c,void 0);else for(var h=xg(s),f=Og(s),w=f.length,A=0;A<w;A++)c.call(void 0,f[A],h&&h[A],s)}var Ul=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Vg(s,c){if(s){s=s.split("&");for(var h=0;h<s.length;h++){var f=s[h].indexOf("="),w=null;if(0<=f){var A=s[h].substring(0,f);w=s[h].substring(f+1)}else A=s[h];c(A,w?decodeURIComponent(w.replace(/\+/g," ")):"")}}}function Bt(s){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,s instanceof Bt){this.h=s.h,Ri(this,s.j),this.o=s.o,this.g=s.g,Ci(this,s.s),this.l=s.l;var c=s.i,h=new hr;h.i=c.i,c.g&&(h.g=new Map(c.g),h.h=c.h),Bl(this,h),this.m=s.m}else s&&(c=String(s).match(Ul))?(this.h=!1,Ri(this,c[1]||"",!0),this.o=ur(c[2]||""),this.g=ur(c[3]||"",!0),Ci(this,c[4]),this.l=ur(c[5]||"",!0),Bl(this,c[6]||"",!0),this.m=ur(c[7]||"")):(this.h=!1,this.i=new hr(null,this.h))}Bt.prototype.toString=function(){var s=[],c=this.j;c&&s.push(lr(c,$l,!0),":");var h=this.g;return(h||c=="file")&&(s.push("//"),(c=this.o)&&s.push(lr(c,$l,!0),"@"),s.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&s.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&s.push("/"),s.push(lr(h,h.charAt(0)=="/"?Fg:Lg,!0))),(h=this.i.toString())&&s.push("?",h),(h=this.m)&&s.push("#",lr(h,Bg)),s.join("")};function at(s){return new Bt(s)}function Ri(s,c,h){s.j=h?ur(c,!0):c,s.j&&(s.j=s.j.replace(/:$/,""))}function Ci(s,c){if(c){if(c=Number(c),isNaN(c)||0>c)throw Error("Bad port number "+c);s.s=c}else s.s=null}function Bl(s,c,h){c instanceof hr?(s.i=c,$g(s.i,s.h)):(h||(c=lr(c,Ug)),s.i=new hr(c,s.h))}function ee(s,c,h){s.i.set(c,h)}function Pi(s){return ee(s,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),s}function ur(s,c){return s?c?decodeURI(s.replace(/%25/g,"%2525")):decodeURIComponent(s):""}function lr(s,c,h){return typeof s=="string"?(s=encodeURI(s).replace(c,Mg),h&&(s=s.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s):null}function Mg(s){return s=s.charCodeAt(0),"%"+(s>>4&15).toString(16)+(s&15).toString(16)}var $l=/[#\/\?@]/g,Lg=/[#\?:]/g,Fg=/[#\?]/g,Ug=/[#\?@]/g,Bg=/#/g;function hr(s,c){this.h=this.g=null,this.i=s||null,this.j=!!c}function wt(s){s.g||(s.g=new Map,s.h=0,s.i&&Vg(s.i,function(c,h){s.add(decodeURIComponent(c.replace(/\+/g," ")),h)}))}n=hr.prototype,n.add=function(s,c){wt(this),this.i=null,s=hn(this,s);var h=this.g.get(s);return h||this.g.set(s,h=[]),h.push(c),this.h+=1,this};function ql(s,c){wt(s),c=hn(s,c),s.g.has(c)&&(s.i=null,s.h-=s.g.get(c).length,s.g.delete(c))}function jl(s,c){return wt(s),c=hn(s,c),s.g.has(c)}n.forEach=function(s,c){wt(this),this.g.forEach(function(h,f){h.forEach(function(w){s.call(c,w,f,this)},this)},this)},n.na=function(){wt(this);let s=Array.from(this.g.values()),c=Array.from(this.g.keys()),h=[];for(let f=0;f<c.length;f++){let w=s[f];for(let A=0;A<w.length;A++)h.push(c[f])}return h},n.V=function(s){wt(this);let c=[];if(typeof s=="string")jl(this,s)&&(c=c.concat(this.g.get(hn(this,s))));else{s=Array.from(this.g.values());for(let h=0;h<s.length;h++)c=c.concat(s[h])}return c},n.set=function(s,c){return wt(this),this.i=null,s=hn(this,s),jl(this,s)&&(this.h-=this.g.get(s).length),this.g.set(s,[c]),this.h+=1,this},n.get=function(s,c){return s?(s=this.V(s),0<s.length?String(s[0]):c):c};function zl(s,c,h){ql(s,c),0<h.length&&(s.i=null,s.g.set(hn(s,c),V(h)),s.h+=h.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";let s=[],c=Array.from(this.g.keys());for(var h=0;h<c.length;h++){var f=c[h];let A=encodeURIComponent(String(f)),P=this.V(f);for(f=0;f<P.length;f++){var w=A;P[f]!==""&&(w+="="+encodeURIComponent(String(P[f]))),s.push(w)}}return this.i=s.join("&")};function hn(s,c){return c=String(c),s.j&&(c=c.toLowerCase()),c}function $g(s,c){c&&!s.j&&(wt(s),s.i=null,s.g.forEach(function(h,f){var w=f.toLowerCase();f!=w&&(ql(this,f),zl(this,w,h))},s)),s.j=c}function qg(s,c){let h=new ar;if(u.Image){let f=new Image;f.onload=D(Et,h,"TestLoadImage: loaded",!0,c,f),f.onerror=D(Et,h,"TestLoadImage: error",!1,c,f),f.onabort=D(Et,h,"TestLoadImage: abort",!1,c,f),f.ontimeout=D(Et,h,"TestLoadImage: timeout",!1,c,f),u.setTimeout(function(){f.ontimeout&&f.ontimeout()},1e4),f.src=s}else c(!1)}function jg(s,c){let h=new ar,f=new AbortController,w=setTimeout(()=>{f.abort(),Et(h,"TestPingServer: timeout",!1,c)},1e4);fetch(s,{signal:f.signal}).then(A=>{clearTimeout(w),A.ok?Et(h,"TestPingServer: ok",!0,c):Et(h,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(w),Et(h,"TestPingServer: error",!1,c)})}function Et(s,c,h,f,w){try{w&&(w.onload=null,w.onerror=null,w.onabort=null,w.ontimeout=null),f(h)}catch{}}function zg(){this.g=new bg}function Gg(s,c,h){let f=h||"";try{Fl(s,function(w,A){let P=w;d(w)&&(P=yo(w)),c.push(f+A+"="+encodeURIComponent(P))})}catch(w){throw c.push(f+"type="+encodeURIComponent("_badmap")),w}}function dr(s){this.l=s.Ub||null,this.j=s.eb||!1}k(dr,_o),dr.prototype.g=function(){return new Di(this.l,this.j)},dr.prototype.i=function(s){return function(){return s}}({});function Di(s,c){Ie.call(this),this.D=s,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}k(Di,Ie),n=Di.prototype,n.open=function(s,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=s,this.A=c,this.readyState=1,pr(this)},n.send=function(s){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;let c={headers:this.u,method:this.B,credentials:this.m,cache:void 0};s&&(c.body=s),(this.D||u).fetch(new Request(this.A,c)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,fr(this)),this.readyState=0},n.Sa=function(s){if(this.g&&(this.l=s,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=s.headers,this.readyState=2,pr(this)),this.g&&(this.readyState=3,pr(this),this.g)))if(this.responseType==="arraybuffer")s.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof u.ReadableStream<"u"&&"body"in s){if(this.j=s.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;Gl(this)}else s.text().then(this.Ra.bind(this),this.ga.bind(this))};function Gl(s){s.j.read().then(s.Pa.bind(s)).catch(s.ga.bind(s))}n.Pa=function(s){if(this.g){if(this.o&&s.value)this.response.push(s.value);else if(!this.o){var c=s.value?s.value:new Uint8Array(0);(c=this.v.decode(c,{stream:!s.done}))&&(this.response=this.responseText+=c)}s.done?fr(this):pr(this),this.readyState==3&&Gl(this)}},n.Ra=function(s){this.g&&(this.response=this.responseText=s,fr(this))},n.Qa=function(s){this.g&&(this.response=s,fr(this))},n.ga=function(){this.g&&fr(this)};function fr(s){s.readyState=4,s.l=null,s.j=null,s.v=null,pr(s)}n.setRequestHeader=function(s,c){this.u.append(s,c)},n.getResponseHeader=function(s){return this.h&&this.h.get(s.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";let s=[],c=this.h.entries();for(var h=c.next();!h.done;)h=h.value,s.push(h[0]+": "+h[1]),h=c.next();return s.join(`\r
`)};function pr(s){s.onreadystatechange&&s.onreadystatechange.call(s)}Object.defineProperty(Di.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(s){this.m=s?"include":"same-origin"}});function Wl(s){let c="";return ue(s,function(h,f){c+=f,c+=":",c+=h,c+=`\r
`}),c}function Co(s,c,h){e:{for(f in h){var f=!1;break e}f=!0}f||(h=Wl(h),typeof s=="string"?h!=null&&encodeURIComponent(String(h)):ee(s,c,h))}function te(s){Ie.call(this),this.headers=new Map,this.o=s||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}k(te,Ie);var Wg=/^https?$/i,Kg=["POST","PUT"];n=te.prototype,n.Ha=function(s){this.J=s},n.ea=function(s,c,h,f){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+s);c=c?c.toUpperCase():"GET",this.D=s,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():wo.g(),this.v=this.o?wl(this.o):wl(wo),this.g.onreadystatechange=b(this.Ea,this);try{this.B=!0,this.g.open(c,String(s),!0),this.B=!1}catch(A){Kl(this,A);return}if(s=h||"",h=new Map(this.headers),f)if(Object.getPrototypeOf(f)===Object.prototype)for(var w in f)h.set(w,f[w]);else if(typeof f.keys=="function"&&typeof f.get=="function")for(let A of f.keys())h.set(A,f.get(A));else throw Error("Unknown input type for opt_headers: "+String(f));f=Array.from(h.keys()).find(A=>A.toLowerCase()=="content-type"),w=u.FormData&&s instanceof u.FormData,!(0<=Array.prototype.indexOf.call(Kg,c,void 0))||f||w||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(let[A,P]of h)this.g.setRequestHeader(A,P);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Jl(this),this.u=!0,this.g.send(s),this.u=!1}catch(A){Kl(this,A)}};function Kl(s,c){s.h=!1,s.g&&(s.j=!0,s.g.abort(),s.j=!1),s.l=c,s.m=5,Hl(s),ki(s)}function Hl(s){s.A||(s.A=!0,be(s,"complete"),be(s,"error"))}n.abort=function(s){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=s||7,be(this,"complete"),be(this,"abort"),ki(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ki(this,!0)),te.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Ql(this):this.bb())},n.bb=function(){Ql(this)};function Ql(s){if(s.h&&typeof a<"u"&&(!s.v[1]||ct(s)!=4||s.Z()!=2)){if(s.u&&ct(s)==4)yl(s.Ea,0,s);else if(be(s,"readystatechange"),ct(s)==4){s.h=!1;try{let P=s.Z();e:switch(P){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var h;if(!(h=c)){var f;if(f=P===0){var w=String(s.D).match(Ul)[1]||null;!w&&u.self&&u.self.location&&(w=u.self.location.protocol.slice(0,-1)),f=!Wg.test(w?w.toLowerCase():"")}h=f}if(h)be(s,"complete"),be(s,"success");else{s.m=6;try{var A=2<ct(s)?s.g.statusText:""}catch{A=""}s.l=A+" ["+s.Z()+"]",Hl(s)}}finally{ki(s)}}}}function ki(s,c){if(s.g){Jl(s);let h=s.g,f=s.v[0]?()=>{}:null;s.g=null,s.v=null,c||be(s,"ready");try{h.onreadystatechange=f}catch{}}}function Jl(s){s.I&&(u.clearTimeout(s.I),s.I=null)}n.isActive=function(){return!!this.g};function ct(s){return s.g?s.g.readyState:0}n.Z=function(){try{return 2<ct(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(s){if(this.g){var c=this.g.responseText;return s&&c.indexOf(s)==0&&(c=c.substring(s.length)),Sg(c)}};function Yl(s){try{if(!s.g)return null;if("response"in s.g)return s.g.response;switch(s.H){case"":case"text":return s.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in s.g)return s.g.mozResponseArrayBuffer}return null}catch{return null}}function Hg(s){let c={};s=(s.g&&2<=ct(s)&&s.g.getAllResponseHeaders()||"").split(`\r
`);for(let f=0;f<s.length;f++){if(Q(s[f]))continue;var h=v(s[f]);let w=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();let A=c[w]||[];c[w]=A,A.push(h)}I(c,function(f){return f.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function gr(s,c,h){return h&&h.internalChannelParams&&h.internalChannelParams[s]||c}function Xl(s){this.Aa=0,this.i=[],this.j=new ar,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=gr("failFast",!1,s),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=gr("baseRetryDelayMs",5e3,s),this.cb=gr("retryDelaySeedMs",1e4,s),this.Wa=gr("forwardChannelMaxRetries",2,s),this.wa=gr("forwardChannelRequestTimeoutMs",2e4,s),this.pa=s&&s.xmlHttpFactory||void 0,this.Xa=s&&s.Tb||void 0,this.Ca=s&&s.useFetchStreams||!1,this.L=void 0,this.J=s&&s.supportsCrossDomainXhr||!1,this.K="",this.h=new Ol(s&&s.concurrentRequestLimit),this.Da=new zg,this.P=s&&s.fastHandshake||!1,this.O=s&&s.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=s&&s.Rb||!1,s&&s.xa&&this.j.xa(),s&&s.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&s&&s.detectBufferingProxy||!1,this.ja=void 0,s&&s.longPollingTimeout&&0<s.longPollingTimeout&&(this.ja=s.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Xl.prototype,n.la=8,n.G=1,n.connect=function(s,c,h,f){Re(0),this.W=s,this.H=c||{},h&&f!==void 0&&(this.H.OSID=h,this.H.OAID=f),this.F=this.X,this.I=ah(this,null,this.W),Oi(this)};function Po(s){if(Zl(s),s.G==3){var c=s.U++,h=at(s.I);if(ee(h,"SID",s.K),ee(h,"RID",c),ee(h,"TYPE","terminate"),mr(s,h),c=new It(s,s.j,c),c.L=2,c.v=Pi(at(h)),h=!1,u.navigator&&u.navigator.sendBeacon)try{h=u.navigator.sendBeacon(c.v.toString(),"")}catch{}!h&&u.Image&&(new Image().src=c.v,h=!0),h||(c.g=ch(c.j,null),c.g.ea(c.v)),c.F=Date.now(),bi(c)}oh(s)}function Ni(s){s.g&&(ko(s),s.g.cancel(),s.g=null)}function Zl(s){Ni(s),s.u&&(u.clearTimeout(s.u),s.u=null),xi(s),s.h.cancel(),s.s&&(typeof s.s=="number"&&u.clearTimeout(s.s),s.s=null)}function Oi(s){if(!xl(s.h)&&!s.s){s.s=!0;var c=s.Ga;Zn||hl(),er||(Zn(),er=!0),ao.add(c,s),s.B=0}}function Qg(s,c){return Vl(s.h)>=s.h.j-(s.s?1:0)?!1:s.s?(s.i=c.D.concat(s.i),!0):s.G==1||s.G==2||s.B>=(s.Va?0:s.Wa)?!1:(s.s=or(b(s.Ga,s,c),sh(s,s.B)),s.B++,!0)}n.Ga=function(s){if(this.s)if(this.s=null,this.G==1){if(!s){this.U=Math.floor(1e5*Math.random()),s=this.U++;let w=new It(this,this.j,s),A=this.o;if(this.S&&(A?(A=p(A),_(A,this.S)):A=this.S),this.m!==null||this.O||(w.H=A,A=null),this.P)e:{for(var c=0,h=0;h<this.i.length;h++){t:{var f=this.i[h];if("__data__"in f.map&&(f=f.map.__data__,typeof f=="string")){f=f.length;break t}f=void 0}if(f===void 0)break;if(c+=f,4096<c){c=h;break e}if(c===4096||h===this.i.length-1){c=h+1;break e}}c=1e3}else c=1e3;c=th(this,w,c),h=at(this.I),ee(h,"RID",s),ee(h,"CVER",22),this.D&&ee(h,"X-HTTP-Session-Id",this.D),mr(this,h),A&&(this.O?c="headers="+encodeURIComponent(String(Wl(A)))+"&"+c:this.m&&Co(h,this.m,A)),Ro(this.h,w),this.Ua&&ee(h,"TYPE","init"),this.P?(ee(h,"$req",c),ee(h,"SID","null"),w.T=!0,To(w,h,null)):To(w,h,c),this.G=2}}else this.G==3&&(s?eh(this,s):this.i.length==0||xl(this.h)||eh(this))};function eh(s,c){var h;c?h=c.l:h=s.U++;let f=at(s.I);ee(f,"SID",s.K),ee(f,"RID",h),ee(f,"AID",s.T),mr(s,f),s.m&&s.o&&Co(f,s.m,s.o),h=new It(s,s.j,h,s.B+1),s.m===null&&(h.H=s.o),c&&(s.i=c.D.concat(s.i)),c=th(s,h,1e3),h.I=Math.round(.5*s.wa)+Math.round(.5*s.wa*Math.random()),Ro(s.h,h),To(h,f,c)}function mr(s,c){s.H&&ue(s.H,function(h,f){ee(c,f,h)}),s.l&&Fl({},function(h,f){ee(c,f,h)})}function th(s,c,h){h=Math.min(s.i.length,h);var f=s.l?b(s.l.Na,s.l,s):null;e:{var w=s.i;let A=-1;for(;;){let P=["count="+h];A==-1?0<h?(A=w[0].g,P.push("ofs="+A)):A=0:P.push("ofs="+A);let J=!0;for(let ye=0;ye<h;ye++){let z=w[ye].g,we=w[ye].map;if(z-=A,0>z)A=Math.max(0,w[ye].g-100),J=!1;else try{Gg(we,P,"req"+z+"_")}catch{f&&f(we)}}if(J){f=P.join("&");break e}}}return s=s.i.splice(0,h),c.D=s,f}function nh(s){if(!s.g&&!s.u){s.Y=1;var c=s.Fa;Zn||hl(),er||(Zn(),er=!0),ao.add(c,s),s.v=0}}function Do(s){return s.g||s.u||3<=s.v?!1:(s.Y++,s.u=or(b(s.Fa,s),sh(s,s.v)),s.v++,!0)}n.Fa=function(){if(this.u=null,rh(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var s=2*this.R;this.j.info("BP detection timer enabled: "+s),this.A=or(b(this.ab,this),s)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Re(10),Ni(this),rh(this))};function ko(s){s.A!=null&&(u.clearTimeout(s.A),s.A=null)}function rh(s){s.g=new It(s,s.j,"rpc",s.Y),s.m===null&&(s.g.H=s.o),s.g.O=0;var c=at(s.qa);ee(c,"RID","rpc"),ee(c,"SID",s.K),ee(c,"AID",s.T),ee(c,"CI",s.F?"0":"1"),!s.F&&s.ja&&ee(c,"TO",s.ja),ee(c,"TYPE","xmlhttp"),mr(s,c),s.m&&s.o&&Co(c,s.m,s.o),s.L&&(s.g.I=s.L);var h=s.g;s=s.ia,h.L=1,h.v=Pi(at(c)),h.m=null,h.P=!0,Dl(h,s)}n.Za=function(){this.C!=null&&(this.C=null,Ni(this),Do(this),Re(19))};function xi(s){s.C!=null&&(u.clearTimeout(s.C),s.C=null)}function ih(s,c){var h=null;if(s.g==c){xi(s),ko(s),s.g=null;var f=2}else if(bo(s.h,c))h=c.D,Ml(s.h,c),f=1;else return;if(s.G!=0){if(c.o)if(f==1){h=c.m?c.m.length:0,c=Date.now()-c.F;var w=s.B;f=Ti(),be(f,new bl(f,h)),Oi(s)}else nh(s);else if(w=c.s,w==3||w==0&&0<c.X||!(f==1&&Qg(s,c)||f==2&&Do(s)))switch(h&&0<h.length&&(c=s.h,c.i=c.i.concat(h)),w){case 1:$t(s,5);break;case 4:$t(s,10);break;case 3:$t(s,6);break;default:$t(s,2)}}}function sh(s,c){let h=s.Ta+Math.floor(Math.random()*s.cb);return s.isActive()||(h*=2),h*c}function $t(s,c){if(s.j.info("Error code "+c),c==2){var h=b(s.fb,s),f=s.Xa;let w=!f;f=new Bt(f||"//www.google.com/images/cleardot.gif"),u.location&&u.location.protocol=="http"||Ri(f,"https"),Pi(f),w?qg(f.toString(),h):jg(f.toString(),h)}else Re(2);s.G=0,s.l&&s.l.sa(c),oh(s),Zl(s)}n.fb=function(s){s?(this.j.info("Successfully pinged google.com"),Re(2)):(this.j.info("Failed to ping google.com"),Re(1))};function oh(s){if(s.G=0,s.ka=[],s.l){let c=Ll(s.h);(c.length!=0||s.i.length!=0)&&(N(s.ka,c),N(s.ka,s.i),s.h.i.length=0,V(s.i),s.i.length=0),s.l.ra()}}function ah(s,c,h){var f=h instanceof Bt?at(h):new Bt(h);if(f.g!="")c&&(f.g=c+"."+f.g),Ci(f,f.s);else{var w=u.location;f=w.protocol,c=c?c+"."+w.hostname:w.hostname,w=+w.port;var A=new Bt(null);f&&Ri(A,f),c&&(A.g=c),w&&Ci(A,w),h&&(A.l=h),f=A}return h=s.D,c=s.ya,h&&c&&ee(f,h,c),ee(f,"VER",s.la),mr(s,f),f}function ch(s,c,h){if(c&&!s.J)throw Error("Can't create secondary domain capable XhrIo object.");return c=s.Ca&&!s.pa?new te(new dr({eb:h})):new te(s.pa),c.Ha(s.J),c}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function uh(){}n=uh.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Vi(){}Vi.prototype.g=function(s,c){return new ke(s,c)};function ke(s,c){Ie.call(this),this.g=new Xl(c),this.l=s,this.h=c&&c.messageUrlParams||null,s=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(s?s["X-Client-Protocol"]="webchannel":s={"X-Client-Protocol":"webchannel"}),this.g.o=s,s=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(s?s["X-WebChannel-Content-Type"]=c.messageContentType:s={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.va&&(s?s["X-WebChannel-Client-Profile"]=c.va:s={"X-WebChannel-Client-Profile":c.va}),this.g.S=s,(s=c&&c.Sb)&&!Q(s)&&(this.g.m=s),this.v=c&&c.supportsCrossDomainXhr||!1,this.u=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!Q(c)&&(this.g.D=c,s=this.h,s!==null&&c in s&&(s=this.h,c in s&&delete s[c])),this.j=new dn(this)}k(ke,Ie),ke.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ke.prototype.close=function(){Po(this.g)},ke.prototype.o=function(s){var c=this.g;if(typeof s=="string"){var h={};h.__data__=s,s=h}else this.u&&(h={},h.__data__=yo(s),s=h);c.i.push(new Ng(c.Ya++,s)),c.G==3&&Oi(c)},ke.prototype.N=function(){this.g.l=null,delete this.j,Po(this.g),delete this.g,ke.aa.N.call(this)};function lh(s){vo.call(this),s.__headers__&&(this.headers=s.__headers__,this.statusCode=s.__status__,delete s.__headers__,delete s.__status__);var c=s.__sm__;if(c){e:{for(let h in c){s=h;break e}s=void 0}(this.i=s)&&(s=this.i,c=c!==null&&s in c?c[s]:void 0),this.data=c}else this.data=s}k(lh,vo);function hh(){Io.call(this),this.status=1}k(hh,Io);function dn(s){this.g=s}k(dn,uh),dn.prototype.ua=function(){be(this.g,"a")},dn.prototype.ta=function(s){be(this.g,new lh(s))},dn.prototype.sa=function(s){be(this.g,new hh)},dn.prototype.ra=function(){be(this.g,"b")},Vi.prototype.createWebChannel=Vi.prototype.g,ke.prototype.send=ke.prototype.o,ke.prototype.open=ke.prototype.m,ke.prototype.close=ke.prototype.close,kc=pt.createWebChannelTransport=function(){return new Vi},Dc=pt.getStatEventTarget=function(){return Ti()},Pc=pt.Event=Ft,Ps=pt.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ai.NO_ERROR=0,Ai.TIMEOUT=8,Ai.HTTP_ERROR=6,ni=pt.ErrorCode=Ai,Rl.COMPLETE="complete",Cc=pt.EventType=Rl,El.EventType=ir,ir.OPEN="a",ir.CLOSE="b",ir.ERROR="c",ir.MESSAGE="d",Ie.prototype.listen=Ie.prototype.K,Vn=pt.WebChannel=El,iw=pt.FetchXmlHttpFactory=dr,te.prototype.listenOnce=te.prototype.L,te.prototype.getLastError=te.prototype.Ka,te.prototype.getLastErrorCode=te.prototype.Ba,te.prototype.getStatus=te.prototype.Z,te.prototype.getResponseJson=te.prototype.Oa,te.prototype.getResponseText=te.prototype.oa,te.prototype.send=te.prototype.ea,te.prototype.setWithCredentials=te.prototype.Ha,Rc=pt.XhrIo=te}).apply(typeof Cs<"u"?Cs:typeof self<"u"?self:typeof window<"u"?window:{});var np="@firebase/firestore";var pe=class{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}};pe.UNAUTHENTICATED=new pe(null),pe.GOOGLE_CREDENTIALS=new pe("google-credentials-uid"),pe.FIRST_PARTY=new pe("first-party-uid"),pe.MOCK_USER=new pe("mock-user");var Yn="10.14.0";var nn=new Pt("@firebase/firestore");function ri(){return nn.logLevel}function x(n,...e){if(nn.logLevel<=$.DEBUG){let t=e.map(el);nn.debug(`Firestore (${Yn}): ${n}`,...t)}}function rn(n,...e){if(nn.logLevel<=$.ERROR){let t=e.map(el);nn.error(`Firestore (${Yn}): ${n}`,...t)}}function Vs(n,...e){if(nn.logLevel<=$.WARN){let t=e.map(el);nn.warn(`Firestore (${Yn}): ${n}`,...t)}}function el(n){if(typeof n=="string")return n;try{return function(t){return JSON.stringify(t)}(n)}catch{return n}}function q(n="Unexpected state"){let e=`FIRESTORE (${Yn}) INTERNAL ASSERTION FAILED: `+n;throw rn(e),new Error(e)}function ie(n,e){n||q()}function Z(n,e){return n}var R={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},M=class extends Be{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var gt=class{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}};var Ms=class{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}},Vc=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(pe.UNAUTHENTICATED))}shutdown(){}},Mc=class{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}},Lc=class{constructor(e){this.t=e,this.currentUser=pe.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){ie(this.o===void 0);let r=this.i,i=l=>this.i!==r?(r=this.i,t(l)):Promise.resolve(),o=new gt;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new gt,e.enqueueRetryable(()=>i(this.currentUser))};let a=()=>{let l=o;e.enqueueRetryable(()=>S(this,null,function*(){yield l.promise,yield i(this.currentUser)}))},u=l=>{x("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(l=>u(l)),setTimeout(()=>{if(!this.auth){let l=this.t.getImmediate({optional:!0});l?u(l):(x("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new gt)}},0),a()}getToken(){let e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(x("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ie(typeof r.accessToken=="string"),new Ms(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){let e=this.auth&&this.auth.getUid();return ie(e===null||typeof e=="string"),new pe(e)}},Fc=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r,this.type="FirstParty",this.user=pe.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);let e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}},Uc=class{constructor(e,t,r){this.l=e,this.h=t,this.P=r}getToken(){return Promise.resolve(new Fc(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(pe.FIRST_PARTY))}shutdown(){}invalidateToken(){}},Bc=class{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},$c=class{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){ie(this.o===void 0);let r=o=>{o.error!=null&&x("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);let a=o.token!==this.R;return this.R=o.token,x("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?t(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};let i=o=>{x("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){let o=this.A.getImmediate({optional:!0});o?i(o):x("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(ie(typeof t.token=="string"),this.R=t.token,new Bc(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}};function sw(n){let e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}var Ls=class{static newId(){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length,r="";for(;r.length<20;){let i=sw(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<t&&(r+=e.charAt(i[o]%e.length))}return r}};function Y(n,e){return n<e?-1:n>e?1:0}function Un(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}var Se=class n{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new M(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new M(R.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new M(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new M(R.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return n.fromMillis(Date.now())}static fromDate(e){return n.fromMillis(e.getTime())}static fromMillis(e){let t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new n(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Y(this.nanoseconds,e.nanoseconds):Y(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}};var re=class n{constructor(e){this.timestamp=e}static fromTimestamp(e){return new n(e)}static min(){return new n(new Se(0,0))}static max(){return new n(new Se(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var Fs=class n{constructor(e,t,r){t===void 0?t=0:t>e.length&&q(),r===void 0?r=e.length-t:r>e.length-t&&q(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return n.comparator(this,e)===0}child(e){let t=this.segments.slice(this.offset,this.limit());return e instanceof n?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){let r=Math.min(e.length,t.length);for(let i=0;i<r;i++){let o=e.get(i),a=t.get(i);if(o<a)return-1;if(o>a)return 1}return e.length<t.length?-1:e.length>t.length?1:0}},ge=class n extends Fs{construct(e,t,r){return new n(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){let t=[];for(let r of e){if(r.indexOf("//")>=0)throw new M(R.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new n(t)}static emptyPath(){return new n([])}},ow=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Me=class n extends Fs{construct(e,t,r){return new n(e,t,r)}static isValidIdentifier(e){return ow.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),n.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new n(["__name__"])}static fromServerFormat(e){let t=[],r="",i=0,o=()=>{if(r.length===0)throw new M(R.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""},a=!1;for(;i<e.length;){let u=e[i];if(u==="\\"){if(i+1===e.length)throw new M(R.INVALID_ARGUMENT,"Path has trailing escape character: "+e);let l=e[i+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new M(R.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=l,i+=2}else u==="`"?(a=!a,i++):u!=="."||a?(r+=u,i++):(o(),i++)}if(o(),a)throw new M(R.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new n(t)}static emptyPath(){return new n([])}};var B=class n{constructor(e){this.path=e}static fromPath(e){return new n(ge.fromString(e))}static fromName(e){return new n(ge.fromString(e).popFirst(5))}static empty(){return new n(ge.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ge.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ge.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new n(new ge(e.slice()))}};var qc=class{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}};qc.UNKNOWN_ID=-1;function aw(n,e){let t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=re.fromTimestamp(r===1e9?new Se(t+1,0):new Se(t,r));return new sn(i,B.empty(),e)}function cw(n){return new sn(n.readTime,n.key,-1)}var sn=class n{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new n(re.min(),B.empty(),-1)}static max(){return new n(re.max(),B.empty(),-1)}};function uw(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=B.comparator(n.documentKey,e.documentKey),t!==0?t:Y(n.largestBatchId,e.largestBatchId))}var lw="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",jc=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}};function Ap(n){return S(this,null,function*(){if(n.code!==R.FAILED_PRECONDITION||n.message!==lw)throw n;x("LocalStore","Unexpectedly lost primary lease")})}var C=class n{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&q(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new n((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(t,o).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{let t=e();return t instanceof n?t:n.resolve(t)}catch(t){return n.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):n.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):n.reject(t)}static resolve(e){return new n((t,r)=>{t(e)})}static reject(e){return new n((t,r)=>{r(e)})}static waitFor(e){return new n((t,r)=>{let i=0,o=0,a=!1;e.forEach(u=>{++i,u.next(()=>{++o,a&&o===i&&t()},l=>r(l))}),a=!0,o===i&&t()})}static or(e){let t=n.resolve(!1);for(let r of e)t=t.next(i=>i?n.resolve(i):r());return t}static forEach(e,t){let r=[];return e.forEach((i,o)=>{r.push(t.call(this,i,o))}),this.waitFor(r)}static mapArray(e,t){return new n((r,i)=>{let o=e.length,a=new Array(o),u=0;for(let l=0;l<o;l++){let d=l;t(e[d]).next(y=>{a[d]=y,++u,u===o&&r(a)},y=>i(y))}})}static doWhile(e,t){return new n((r,i)=>{let o=()=>{e()===!0?t().next(()=>{o()},i):r()};o()})}};function hw(n){let e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function no(n){return n.name==="IndexedDbTransactionError"}var dw=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ie(i),this.se=i=>r.writeSequenceNumber(i))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){let t=++this.previousValue;return this.se&&this.se(t),t}}return n.oe=-1,n})();function tl(n){return n==null}function ui(n){return n===0&&1/n==-1/0}function fw(n){return typeof n=="number"&&Number.isInteger(n)&&!ui(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}var pw=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],wS=[...pw,"documentOverlays"],gw=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],mw=gw,yw=[...mw,"indexConfiguration","indexState","indexEntries"];var ES=[...yw,"globals"];function rp(n){let e=0;for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function mi(n,e){for(let t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Sp(n){for(let e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}var Le=class n{constructor(e,t){this.comparator=e,this.root=t||it.EMPTY}insert(e,t){return new n(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,it.BLACK,null,null))}remove(e){return new n(this.comparator,this.root.remove(e,this.comparator).copy(null,null,it.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){let r=this.comparator(e,t.key);if(r===0)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){let i=this.comparator(e,r.key);if(i===0)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){let e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ln(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ln(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ln(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ln(this.root,e,this.comparator,!0)}},Ln=class{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=t?r(e.key,t):1,t&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop(),t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}},it=class n{constructor(e,t,r,i,o){this.key=e,this.value=t,this.color=r??n.RED,this.left=i??n.EMPTY,this.right=o??n.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,o){return new n(e??this.key,t??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this,o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,t,r),null):o===0?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return n.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),t(e,i.key)===0){if(i.right.isEmpty())return n.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw q();let e=this.left.check();if(e!==this.right.check())throw q();return e+(this.isRed()?0:1)}};it.EMPTY=null,it.RED=!0,it.BLACK=!1;it.EMPTY=new class{constructor(){this.size=0}get key(){throw q()}get value(){throw q()}get color(){throw q()}get left(){throw q()}get right(){throw q()}copy(e,t,r,i,o){return this}insert(e,t,r){return new it(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};var Pe=class n{constructor(e){this.comparator=e,this.data=new Le(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){let r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){let i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){let t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Us(this.data.getIterator())}getIteratorFrom(e){return new Us(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof n)||this.size!==e.size)return!1;let t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){let i=t.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){let e=[];return this.forEach(t=>{e.push(t)}),e}toString(){let e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){let t=new n(this.comparator);return t.data=e,t}},Us=class{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};var rt=class n{constructor(e){this.fields=e,e.sort(Me.comparator)}static empty(){return new n([])}unionWith(e){let t=new Pe(Me.comparator);for(let r of this.fields)t=t.add(r);for(let r of e)t=t.add(r);return new n(t.toArray())}covers(e){for(let t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Un(this.fields,e.fields,(t,r)=>t.isEqual(r))}};var zc=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var yt=class n{constructor(e){this.binaryString=e}static fromBase64String(e){let t=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new zc("Invalid base64 string: "+o):o}}(e);return new n(t)}static fromUint8Array(e){let t=function(i){let o="";for(let a=0;a<i.length;++a)o+=String.fromCharCode(i[a]);return o}(e);return new n(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){let r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Y(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}};yt.EMPTY_BYTE_STRING=new yt("");var _w=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function xt(n){if(ie(!!n),typeof n=="string"){let e=0,t=_w.exec(n);if(ie(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}let r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ae(n.seconds),nanos:ae(n.nanos)}}function ae(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Bn(n){return typeof n=="string"?yt.fromBase64String(n):yt.fromUint8Array(n)}function nl(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function bp(n){let e=n.mapValue.fields.__previous_value__;return nl(e)?bp(e):e}function Bs(n){let e=xt(n.mapValue.fields.__local_write_time__.timestampValue);return new Se(e.seconds,e.nanos)}var Gc=class{constructor(e,t,r,i,o,a,u,l,d){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=a,this.autoDetectLongPolling=u,this.longPollingOptions=l,this.useFetchStreams=d}},Wc=class n{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new n("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof n&&e.projectId===this.projectId&&e.database===this.database}};var Ds={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function $n(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?nl(n)?4:Cp(n)?9007199254740991:Rp(n)?10:11:q()}function st(n,e){if(n===e)return!0;let t=$n(n);if(t!==$n(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Bs(n).isEqual(Bs(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;let a=xt(i.timestampValue),u=xt(o.timestampValue);return a.seconds===u.seconds&&a.nanos===u.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(i,o){return Bn(i.bytesValue).isEqual(Bn(o.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(i,o){return ae(i.geoPointValue.latitude)===ae(o.geoPointValue.latitude)&&ae(i.geoPointValue.longitude)===ae(o.geoPointValue.longitude)}(n,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return ae(i.integerValue)===ae(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){let a=ae(i.doubleValue),u=ae(o.doubleValue);return a===u?ui(a)===ui(u):isNaN(a)&&isNaN(u)}return!1}(n,e);case 9:return Un(n.arrayValue.values||[],e.arrayValue.values||[],st);case 10:case 11:return function(i,o){let a=i.mapValue.fields||{},u=o.mapValue.fields||{};if(rp(a)!==rp(u))return!1;for(let l in a)if(a.hasOwnProperty(l)&&(u[l]===void 0||!st(a[l],u[l])))return!1;return!0}(n,e);default:return q()}}function li(n,e){return(n.values||[]).find(t=>st(t,e))!==void 0}function qn(n,e){if(n===e)return 0;let t=$n(n),r=$n(e);if(t!==r)return Y(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Y(n.booleanValue,e.booleanValue);case 2:return function(o,a){let u=ae(o.integerValue||o.doubleValue),l=ae(a.integerValue||a.doubleValue);return u<l?-1:u>l?1:u===l?0:isNaN(u)?isNaN(l)?0:-1:1}(n,e);case 3:return ip(n.timestampValue,e.timestampValue);case 4:return ip(Bs(n),Bs(e));case 5:return Y(n.stringValue,e.stringValue);case 6:return function(o,a){let u=Bn(o),l=Bn(a);return u.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(o,a){let u=o.split("/"),l=a.split("/");for(let d=0;d<u.length&&d<l.length;d++){let y=Y(u[d],l[d]);if(y!==0)return y}return Y(u.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(o,a){let u=Y(ae(o.latitude),ae(a.latitude));return u!==0?u:Y(ae(o.longitude),ae(a.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return sp(n.arrayValue,e.arrayValue);case 10:return function(o,a){var u,l,d,y;let E=o.fields||{},b=a.fields||{},D=(u=E.value)===null||u===void 0?void 0:u.arrayValue,k=(l=b.value)===null||l===void 0?void 0:l.arrayValue,V=Y(((d=D?.values)===null||d===void 0?void 0:d.length)||0,((y=k?.values)===null||y===void 0?void 0:y.length)||0);return V!==0?V:sp(D,k)}(n.mapValue,e.mapValue);case 11:return function(o,a){if(o===Ds.mapValue&&a===Ds.mapValue)return 0;if(o===Ds.mapValue)return 1;if(a===Ds.mapValue)return-1;let u=o.fields||{},l=Object.keys(u),d=a.fields||{},y=Object.keys(d);l.sort(),y.sort();for(let E=0;E<l.length&&E<y.length;++E){let b=Y(l[E],y[E]);if(b!==0)return b;let D=qn(u[l[E]],d[y[E]]);if(D!==0)return D}return Y(l.length,y.length)}(n.mapValue,e.mapValue);default:throw q()}}function ip(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Y(n,e);let t=xt(n),r=xt(e),i=Y(t.seconds,r.seconds);return i!==0?i:Y(t.nanos,r.nanos)}function sp(n,e){let t=n.values||[],r=e.values||[];for(let i=0;i<t.length&&i<r.length;++i){let o=qn(t[i],r[i]);if(o)return o}return Y(t.length,r.length)}function jn(n){return Kc(n)}function Kc(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){let r=xt(t);return`time(${r.seconds},${r.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Bn(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return B.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let r="[",i=!0;for(let o of t.values||[])i?i=!1:r+=",",r+=Kc(o);return r+"]"}(n.arrayValue):"mapValue"in n?function(t){let r=Object.keys(t.fields||{}).sort(),i="{",o=!0;for(let a of r)o?o=!1:i+=",",i+=`${a}:${Kc(t.fields[a])}`;return i+"}"}(n.mapValue):q()}function Hc(n){return!!n&&"integerValue"in n}function rl(n){return!!n&&"arrayValue"in n}function Os(n){return!!n&&"mapValue"in n}function Rp(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function si(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){let e={mapValue:{fields:{}}};return mi(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=si(r)),e}if(n.arrayValue){let e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=si(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Cp(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}var nt=class n{constructor(e){this.value=e}static empty(){return new n({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Os(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=si(t)}setAll(e){let t=Me.emptyPath(),r={},i=[];e.forEach((a,u)=>{if(!t.isImmediateParentOf(u)){let l=this.getFieldsMap(t);this.applyChanges(l,r,i),r={},i=[],t=u.popLast()}a?r[u.lastSegment()]=si(a):i.push(u.lastSegment())});let o=this.getFieldsMap(t);this.applyChanges(o,r,i)}delete(e){let t=this.field(e.popLast());Os(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return st(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Os(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){mi(t,(i,o)=>e[i]=o);for(let i of r)delete e[i]}clone(){return new n(si(this.value))}};function Pp(n){let e=[];return mi(n.fields,(t,r)=>{let i=new Me([t]);if(Os(r)){let o=Pp(r.mapValue).fields;if(o.length===0)e.push(i);else for(let a of o)e.push(i.child(a))}else e.push(i)}),new rt(e)}var zn=class n{constructor(e,t,r,i,o,a,u){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=o,this.data=a,this.documentState=u}static newInvalidDocument(e){return new n(e,0,re.min(),re.min(),re.min(),nt.empty(),0)}static newFoundDocument(e,t,r,i){return new n(e,1,t,re.min(),r,i,0)}static newNoDocument(e,t){return new n(e,2,t,re.min(),re.min(),nt.empty(),0)}static newUnknownDocument(e,t){return new n(e,3,t,re.min(),re.min(),nt.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof n&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new n(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};var Gn=class{constructor(e,t){this.position=e,this.inclusive=t}};function op(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){let o=e[i],a=n.position[i];if(o.field.isKeyField()?r=B.comparator(B.fromName(a.referenceValue),t.key):r=qn(a,t.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function ap(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!st(n.position[t],e.position[t]))return!1;return!0}var Wn=class{constructor(e,t="asc"){this.field=e,this.dir=t}};function vw(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}var $s=class{},me=class n extends $s{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,r):new Jc(e,t,r):t==="array-contains"?new Zc(e,r):t==="in"?new eu(e,r):t==="not-in"?new tu(e,r):t==="array-contains-any"?new nu(e,r):new n(e,t,r)}static createKeyFieldInFilter(e,t,r){return t==="in"?new Yc(e,r):new Xc(e,r)}matches(e){let t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(qn(t,this.value)):t!==null&&$n(this.value)===$n(t)&&this.matchesComparison(qn(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return q()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},Vt=class n extends $s{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new n(e,t)}matches(e){return Dp(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}};function Dp(n){return n.op==="and"}function kp(n){return Iw(n)&&Dp(n)}function Iw(n){for(let e of n.filters)if(e instanceof Vt)return!1;return!0}function Qc(n){if(n instanceof me)return n.field.canonicalString()+n.op.toString()+jn(n.value);if(kp(n))return n.filters.map(e=>Qc(e)).join(",");{let e=n.filters.map(t=>Qc(t)).join(",");return`${n.op}(${e})`}}function Np(n,e){return n instanceof me?function(r,i){return i instanceof me&&r.op===i.op&&r.field.isEqual(i.field)&&st(r.value,i.value)}(n,e):n instanceof Vt?function(r,i){return i instanceof Vt&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,a,u)=>o&&Np(a,i.filters[u]),!0):!1}(n,e):void q()}function Op(n){return n instanceof me?function(t){return`${t.field.canonicalString()} ${t.op} ${jn(t.value)}`}(n):n instanceof Vt?function(t){return t.op.toString()+" {"+t.getFilters().map(Op).join(" ,")+"}"}(n):"Filter"}var Jc=class extends me{constructor(e,t,r){super(e,t,r),this.key=B.fromName(r.referenceValue)}matches(e){let t=B.comparator(e.key,this.key);return this.matchesComparison(t)}},Yc=class extends me{constructor(e,t){super(e,"in",t),this.keys=xp("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}},Xc=class extends me{constructor(e,t){super(e,"not-in",t),this.keys=xp("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}};function xp(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(r=>B.fromName(r.referenceValue))}var Zc=class extends me{constructor(e,t){super(e,"array-contains",t)}matches(e){let t=e.data.field(this.field);return rl(t)&&li(t.arrayValue,this.value)}},eu=class extends me{constructor(e,t){super(e,"in",t)}matches(e){let t=e.data.field(this.field);return t!==null&&li(this.value.arrayValue,t)}},tu=class extends me{constructor(e,t){super(e,"not-in",t)}matches(e){if(li(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let t=e.data.field(this.field);return t!==null&&!li(this.value.arrayValue,t)}},nu=class extends me{constructor(e,t){super(e,"array-contains-any",t)}matches(e){let t=e.data.field(this.field);return!(!rl(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>li(this.value.arrayValue,r))}};var ru=class{constructor(e,t=null,r=[],i=[],o=null,a=null,u=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=a,this.endAt=u,this.ue=null}};function cp(n,e=null,t=[],r=[],i=null,o=null,a=null){return new ru(n,e,t,r,i,o,a)}function il(n){let e=Z(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>Qc(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),tl(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>jn(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>jn(r)).join(",")),e.ue=t}return e.ue}function sl(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!vw(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Np(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!ap(n.startAt,e.startAt)&&ap(n.endAt,e.endAt)}var Kn=class{constructor(e,t=null,r=[],i=[],o=null,a="F",u=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=a,this.startAt=u,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}};function ww(n,e,t,r,i,o,a,u){return new Kn(n,e,t,r,i,o,a,u)}function Ew(n){return new Kn(n)}function up(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Tw(n){return n.collectionGroup!==null}function oi(n){let e=Z(n);if(e.ce===null){e.ce=[];let t=new Set;for(let o of e.explicitOrderBy)e.ce.push(o),t.add(o.field.canonicalString());let r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(a){let u=new Pe(Me.comparator);return a.filters.forEach(l=>{l.getFlattenedFilters().forEach(d=>{d.isInequality()&&(u=u.add(d.field))})}),u})(e).forEach(o=>{t.has(o.canonicalString())||o.isKeyField()||e.ce.push(new Wn(o,r))}),t.has(Me.keyField().canonicalString())||e.ce.push(new Wn(Me.keyField(),r))}return e.ce}function en(n){let e=Z(n);return e.le||(e.le=Aw(e,oi(n))),e.le}function Aw(n,e){if(n.limitType==="F")return cp(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(i=>{let o=i.dir==="desc"?"asc":"desc";return new Wn(i.field,o)});let t=n.endAt?new Gn(n.endAt.position,n.endAt.inclusive):null,r=n.startAt?new Gn(n.startAt.position,n.startAt.inclusive):null;return cp(n.path,n.collectionGroup,e,n.filters,n.limit,t,r)}}function iu(n,e,t){return new Kn(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Vp(n,e){return sl(en(n),en(e))&&n.limitType===e.limitType}function Mp(n){return`${il(en(n))}|lt:${n.limitType}`}function ii(n){return`Query(target=${function(t){let r=t.path.canonicalString();return t.collectionGroup!==null&&(r+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(r+=`, filters: [${t.filters.map(i=>Op(i)).join(", ")}]`),tl(t.limit)||(r+=", limit: "+t.limit),t.orderBy.length>0&&(r+=`, orderBy: [${t.orderBy.map(i=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(i)).join(", ")}]`),t.startAt&&(r+=", startAt: ",r+=t.startAt.inclusive?"b:":"a:",r+=t.startAt.position.map(i=>jn(i)).join(",")),t.endAt&&(r+=", endAt: ",r+=t.endAt.inclusive?"a:":"b:",r+=t.endAt.position.map(i=>jn(i)).join(",")),`Target(${r})`}(en(n))}; limitType=${n.limitType})`}function ol(n,e){return e.isFoundDocument()&&function(r,i){let o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):B.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(n,e)&&function(r,i){for(let o of oi(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(n,e)&&function(r,i){for(let o of r.filters)if(!o.matches(i))return!1;return!0}(n,e)&&function(r,i){return!(r.startAt&&!function(a,u,l){let d=op(a,u,l);return a.inclusive?d<=0:d<0}(r.startAt,oi(r),i)||r.endAt&&!function(a,u,l){let d=op(a,u,l);return a.inclusive?d>=0:d>0}(r.endAt,oi(r),i))}(n,e)}function Sw(n){return(e,t)=>{let r=!1;for(let i of oi(n)){let o=bw(i,e,t);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function bw(n,e,t){let r=n.field.isKeyField()?B.comparator(e.key,t.key):function(o,a,u){let l=a.data.field(o),d=u.data.field(o);return l!==null&&d!==null?qn(l,d):q()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return q()}}var Mt=class{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r!==void 0){for(let[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,t){let r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,t]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){let t=this.mapKeyFn(e),r=this.inner[t];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){mi(this.inner,(t,r)=>{for(let[i,o]of r)e(i,o)})}isEmpty(){return Sp(this.inner)}size(){return this.innerSize}};var Rw=new Le(B.comparator);function qs(){return Rw}var Lp=new Le(B.comparator);function ks(...n){let e=Lp;for(let t of n)e=e.insert(t.key,t);return e}function Fp(n){let e=Lp;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Zt(){return ai()}function Up(){return ai()}function ai(){return new Mt(n=>n.toString(),(n,e)=>n.isEqual(e))}var Cw=new Le(B.comparator),Pw=new Pe(B.comparator);function Ae(...n){let e=Pw;for(let t of n)e=e.add(t);return e}var Dw=new Pe(Y);function kw(){return Dw}function al(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ui(e)?"-0":e}}function Bp(n){return{integerValue:""+n}}function $p(n,e){return fw(e)?Bp(e):al(n,e)}var Hn=class{constructor(){this._=void 0}};function Nw(n,e,t){return n instanceof Qn?function(i,o){let a={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&nl(o)&&(o=bp(o)),o&&(a.fields.__previous_value__=o),{mapValue:a}}(t,e):n instanceof on?jp(n,e):n instanceof an?zp(n,e):function(i,o){let a=qp(i,o),u=lp(a)+lp(i.Pe);return Hc(a)&&Hc(i.Pe)?Bp(u):al(i.serializer,u)}(n,e)}function Ow(n,e,t){return n instanceof on?jp(n,e):n instanceof an?zp(n,e):t}function qp(n,e){return n instanceof cn?function(r){return Hc(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}var Qn=class extends Hn{},on=class extends Hn{constructor(e){super(),this.elements=e}};function jp(n,e){let t=Gp(e);for(let r of n.elements)t.some(i=>st(i,r))||t.push(r);return{arrayValue:{values:t}}}var an=class extends Hn{constructor(e){super(),this.elements=e}};function zp(n,e){let t=Gp(e);for(let r of n.elements)t=t.filter(i=>!st(i,r));return{arrayValue:{values:t}}}var cn=class extends Hn{constructor(e,t){super(),this.serializer=e,this.Pe=t}};function lp(n){return ae(n.integerValue||n.doubleValue)}function Gp(n){return rl(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}var su=class{constructor(e,t){this.field=e,this.transform=t}};function xw(n,e){return n.field.isEqual(e.field)&&function(r,i){return r instanceof on&&i instanceof on||r instanceof an&&i instanceof an?Un(r.elements,i.elements,st):r instanceof cn&&i instanceof cn?st(r.Pe,i.Pe):r instanceof Qn&&i instanceof Qn}(n.transform,e.transform)}var ou=class{constructor(e,t){this.version=e,this.transformResults=t}},tn=class n{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new n}static exists(e){return new n(void 0,e)}static updateTime(e){return new n(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}};function xs(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}var Jn=class{};function Wp(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new js(n.key,tn.none()):new un(n.key,n.data,tn.none());{let t=n.data,r=nt.empty(),i=new Pe(Me.comparator);for(let o of e.fields)if(!i.has(o)){let a=t.field(o);a===null&&o.length>1&&(o=o.popLast(),a=t.field(o)),a===null?r.delete(o):r.set(o,a),i=i.add(o)}return new _t(n.key,r,new rt(i.toArray()),tn.none())}}function Vw(n,e,t){n instanceof un?function(i,o,a){let u=i.value.clone(),l=dp(i.fieldTransforms,o,a.transformResults);u.setAll(l),o.convertToFoundDocument(a.version,u).setHasCommittedMutations()}(n,e,t):n instanceof _t?function(i,o,a){if(!xs(i.precondition,o))return void o.convertToUnknownDocument(a.version);let u=dp(i.fieldTransforms,o,a.transformResults),l=o.data;l.setAll(Kp(i)),l.setAll(u),o.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(n,e,t):function(i,o,a){o.convertToNoDocument(a.version).setHasCommittedMutations()}(0,e,t)}function ci(n,e,t,r){return n instanceof un?function(o,a,u,l){if(!xs(o.precondition,a))return u;let d=o.value.clone(),y=fp(o.fieldTransforms,l,a);return d.setAll(y),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),null}(n,e,t,r):n instanceof _t?function(o,a,u,l){if(!xs(o.precondition,a))return u;let d=fp(o.fieldTransforms,l,a),y=a.data;return y.setAll(Kp(o)),y.setAll(d),a.convertToFoundDocument(a.version,y).setHasLocalMutations(),u===null?null:u.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(E=>E.field))}(n,e,t,r):function(o,a,u){return xs(o.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):u}(n,e,t)}function Mw(n,e){let t=null;for(let r of n.fieldTransforms){let i=e.data.field(r.field),o=qp(r.transform,i||null);o!=null&&(t===null&&(t=nt.empty()),t.set(r.field,o))}return t||null}function hp(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Un(r,i,(o,a)=>xw(o,a))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}var un=class extends Jn{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}},_t=class extends Jn{constructor(e,t,r,i,o=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}};function Kp(n){let e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){let r=n.data.field(t);e.set(t,r)}}),e}function dp(n,e,t){let r=new Map;ie(n.length===t.length);for(let i=0;i<t.length;i++){let o=n[i],a=o.transform,u=e.data.field(o.field);r.set(o.field,Ow(a,u,t[i]))}return r}function fp(n,e,t){let r=new Map;for(let i of n){let o=i.transform,a=t.data.field(i.field);r.set(i.field,Nw(o,a,e))}return r}var js=class extends Jn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}},au=class extends Jn{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var cu=class{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){let r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){let o=this.mutations[i];o.key.isEqual(e.key)&&Vw(o,e,r[i])}}applyToLocalView(e,t){for(let r of this.baseMutations)r.key.isEqual(e.key)&&(t=ci(r,e,t,this.localWriteTime));for(let r of this.mutations)r.key.isEqual(e.key)&&(t=ci(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){let r=Up();return this.mutations.forEach(i=>{let o=e.get(i.key),a=o.overlayedDocument,u=this.applyToLocalView(a,o.mutatedFields);u=t.has(i.key)?null:u;let l=Wp(a,u);l!==null&&r.set(i.key,l),a.isValidDocument()||a.convertToNoDocument(re.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),Ae())}isEqual(e){return this.batchId===e.batchId&&Un(this.mutations,e.mutations,(t,r)=>hp(t,r))&&Un(this.baseMutations,e.baseMutations,(t,r)=>hp(t,r))}},uu=class n{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){ie(e.mutations.length===r.length);let i=function(){return Cw}(),o=e.mutations;for(let a=0;a<o.length;a++)i=i.insert(o[a].key,r[a].version);return new n(e,t,r,i)}};var lu=class{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var se,j;function Lw(n){switch(n){default:return q();case R.CANCELLED:case R.UNKNOWN:case R.DEADLINE_EXCEEDED:case R.RESOURCE_EXHAUSTED:case R.INTERNAL:case R.UNAVAILABLE:case R.UNAUTHENTICATED:return!1;case R.INVALID_ARGUMENT:case R.NOT_FOUND:case R.ALREADY_EXISTS:case R.PERMISSION_DENIED:case R.FAILED_PRECONDITION:case R.ABORTED:case R.OUT_OF_RANGE:case R.UNIMPLEMENTED:case R.DATA_LOSS:return!0}}function Fw(n){if(n===void 0)return rn("GRPC error has no .code"),R.UNKNOWN;switch(n){case se.OK:return R.OK;case se.CANCELLED:return R.CANCELLED;case se.UNKNOWN:return R.UNKNOWN;case se.DEADLINE_EXCEEDED:return R.DEADLINE_EXCEEDED;case se.RESOURCE_EXHAUSTED:return R.RESOURCE_EXHAUSTED;case se.INTERNAL:return R.INTERNAL;case se.UNAVAILABLE:return R.UNAVAILABLE;case se.UNAUTHENTICATED:return R.UNAUTHENTICATED;case se.INVALID_ARGUMENT:return R.INVALID_ARGUMENT;case se.NOT_FOUND:return R.NOT_FOUND;case se.ALREADY_EXISTS:return R.ALREADY_EXISTS;case se.PERMISSION_DENIED:return R.PERMISSION_DENIED;case se.FAILED_PRECONDITION:return R.FAILED_PRECONDITION;case se.ABORTED:return R.ABORTED;case se.OUT_OF_RANGE:return R.OUT_OF_RANGE;case se.UNIMPLEMENTED:return R.UNIMPLEMENTED;case se.DATA_LOSS:return R.DATA_LOSS;default:return q()}}(j=se||(se={}))[j.OK=0]="OK",j[j.CANCELLED=1]="CANCELLED",j[j.UNKNOWN=2]="UNKNOWN",j[j.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",j[j.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",j[j.NOT_FOUND=5]="NOT_FOUND",j[j.ALREADY_EXISTS=6]="ALREADY_EXISTS",j[j.PERMISSION_DENIED=7]="PERMISSION_DENIED",j[j.UNAUTHENTICATED=16]="UNAUTHENTICATED",j[j.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",j[j.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",j[j.ABORTED=10]="ABORTED",j[j.OUT_OF_RANGE=11]="OUT_OF_RANGE",j[j.UNIMPLEMENTED=12]="UNIMPLEMENTED",j[j.INTERNAL=13]="INTERNAL",j[j.UNAVAILABLE=14]="UNAVAILABLE",j[j.DATA_LOSS=15]="DATA_LOSS";var AS=new bc([4294967295,4294967295],0);var hu=class{constructor(e,t){this.databaseId=e,this.useProto3Json=t}};function du(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Uw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Bw(n,e){return du(n,e.toTimestamp())}function Fn(n){return ie(!!n),re.fromTimestamp(function(t){let r=xt(t);return new Se(r.seconds,r.nanos)}(n))}function Hp(n,e){return fu(n,e).canonicalString()}function fu(n,e){let t=function(i){return new ge(["projects",i.projectId,"databases",i.database])}(n).child("documents");return e===void 0?t:t.child(e)}function $w(n){let e=ge.fromString(n);return ie(Qw(e)),e}function pu(n,e){return Hp(n.databaseId,e.path)}function qw(n){let e=$w(n);return e.length===4?ge.emptyPath():zw(e)}function jw(n){return new ge(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function zw(n){return ie(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function pp(n,e,t){return{name:pu(n,e),fields:t.value.mapValue.fields}}function Gw(n,e){let t;if(e instanceof un)t={update:pp(n,e.key,e.value)};else if(e instanceof js)t={delete:pu(n,e.key)};else if(e instanceof _t)t={update:pp(n,e.key,e.data),updateMask:Hw(e.fieldMask)};else{if(!(e instanceof au))return q();t={verify:pu(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(o,a){let u=a.transform;if(u instanceof Qn)return{fieldPath:a.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(u instanceof on)return{fieldPath:a.field.canonicalString(),appendMissingElements:{values:u.elements}};if(u instanceof an)return{fieldPath:a.field.canonicalString(),removeAllFromArray:{values:u.elements}};if(u instanceof cn)return{fieldPath:a.field.canonicalString(),increment:u.Pe};throw q()}(0,r))),e.precondition.isNone||(t.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:Bw(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:q()}(n,e.precondition)),t}function Ww(n,e){return n&&n.length>0?(ie(e!==void 0),n.map(t=>function(i,o){let a=i.updateTime?Fn(i.updateTime):Fn(o);return a.isEqual(re.min())&&(a=Fn(o)),new ou(a,i.transformResults||[])}(t,e))):[]}function Kw(n){let e=qw(n.parent),t=n.structuredQuery,r=t.from?t.from.length:0,i=null;if(r>0){ie(r===1);let y=t.from[0];y.allDescendants?i=y.collectionId:e=e.child(y.collectionId)}let o=[];t.where&&(o=function(E){let b=Qp(E);return b instanceof Vt&&kp(b)?b.getFilters():[b]}(t.where));let a=[];t.orderBy&&(a=function(E){return E.map(b=>function(k){return new Wn(Mn(k.field),function(N){switch(N){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(k.direction))}(b))}(t.orderBy));let u=null;t.limit&&(u=function(E){let b;return b=typeof E=="object"?E.value:E,tl(b)?null:b}(t.limit));let l=null;t.startAt&&(l=function(E){let b=!!E.before,D=E.values||[];return new Gn(D,b)}(t.startAt));let d=null;return t.endAt&&(d=function(E){let b=!E.before,D=E.values||[];return new Gn(D,b)}(t.endAt)),ww(e,i,a,o,u,"F",l,d)}function Qp(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":let r=Mn(t.unaryFilter.field);return me.create(r,"==",{doubleValue:NaN});case"IS_NULL":let i=Mn(t.unaryFilter.field);return me.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let o=Mn(t.unaryFilter.field);return me.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let a=Mn(t.unaryFilter.field);return me.create(a,"!=",{nullValue:"NULL_VALUE"});default:return q()}}(n):n.fieldFilter!==void 0?function(t){return me.create(Mn(t.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return q()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Vt.create(t.compositeFilter.filters.map(r=>Qp(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return q()}}(t.compositeFilter.op))}(n):q()}function Mn(n){return Me.fromServerFormat(n.fieldPath)}function Hw(n){let e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function Qw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}var gu=class{constructor(e){this.ct=e}};function Jw(n){let e=Kw({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?iu(e,e.limit,"L"):e}var zs=class{constructor(){}It(e,t){this.Tt(e,t),t.Et()}Tt(e,t){if("nullValue"in e)this.dt(t,5);else if("booleanValue"in e)this.dt(t,10),t.At(e.booleanValue?1:0);else if("integerValue"in e)this.dt(t,15),t.At(ae(e.integerValue));else if("doubleValue"in e){let r=ae(e.doubleValue);isNaN(r)?this.dt(t,13):(this.dt(t,15),ui(r)?t.At(0):t.At(r))}else if("timestampValue"in e){let r=e.timestampValue;this.dt(t,20),typeof r=="string"&&(r=xt(r)),t.Rt(`${r.seconds||""}`),t.At(r.nanos||0)}else if("stringValue"in e)this.Vt(e.stringValue,t),this.ft(t);else if("bytesValue"in e)this.dt(t,30),t.gt(Bn(e.bytesValue)),this.ft(t);else if("referenceValue"in e)this.yt(e.referenceValue,t);else if("geoPointValue"in e){let r=e.geoPointValue;this.dt(t,45),t.At(r.latitude||0),t.At(r.longitude||0)}else"mapValue"in e?Cp(e)?this.dt(t,Number.MAX_SAFE_INTEGER):Rp(e)?this.wt(e.mapValue,t):(this.St(e.mapValue,t),this.ft(t)):"arrayValue"in e?(this.bt(e.arrayValue,t),this.ft(t)):q()}Vt(e,t){this.dt(t,25),this.Dt(e,t)}Dt(e,t){t.Rt(e)}St(e,t){let r=e.fields||{};this.dt(t,55);for(let i of Object.keys(r))this.Vt(i,t),this.Tt(r[i],t)}wt(e,t){var r,i;let o=e.fields||{};this.dt(t,53);let a="value",u=((i=(r=o[a].arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.length)||0;this.dt(t,15),t.At(ae(u)),this.Vt(a,t),this.Tt(o[a],t)}bt(e,t){let r=e.values||[];this.dt(t,50);for(let i of r)this.Tt(i,t)}yt(e,t){this.dt(t,37),B.fromName(e).path.forEach(r=>{this.dt(t,60),this.Dt(r,t)})}dt(e,t){e.At(t)}ft(e){e.At(2)}};zs.vt=new zs;var mu=class{constructor(){this.un=new yu}addToCollectionParentIndex(e,t){return this.un.add(t),C.resolve()}getCollectionParents(e,t){return C.resolve(this.un.getEntries(t))}addFieldIndex(e,t){return C.resolve()}deleteFieldIndex(e,t){return C.resolve()}deleteAllFieldIndexes(e){return C.resolve()}createTargetIndexes(e,t){return C.resolve()}getDocumentsMatchingTarget(e,t){return C.resolve(null)}getIndexType(e,t){return C.resolve(0)}getFieldIndexes(e,t){return C.resolve([])}getNextCollectionGroupToUpdate(e){return C.resolve(null)}getMinOffset(e,t){return C.resolve(sn.min())}getMinOffsetFromCollectionGroup(e,t){return C.resolve(sn.min())}updateCollectionGroup(e,t,r){return C.resolve()}updateIndexEntries(e,t){return C.resolve()}},yu=class{constructor(){this.index={}}add(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Pe(ge.comparator),o=!i.has(r);return this.index[t]=i.add(r),o}has(e){let t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pe(ge.comparator)).toArray()}};var SS=new Uint8Array(0);var tt=class n{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new n(e,n.DEFAULT_COLLECTION_PERCENTILE,n.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};tt.DEFAULT_COLLECTION_PERCENTILE=10,tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,tt.DEFAULT=new tt(41943040,tt.DEFAULT_COLLECTION_PERCENTILE,tt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),tt.DISABLED=new tt(-1,0,0);var hi=class n{constructor(e){this.Ln=e}next(){return this.Ln+=2,this.Ln}static Bn(){return new n(0)}static kn(){return new n(-1)}};var _u=class{constructor(){this.changes=new Mt(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,zn.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();let r=this.changes.get(t);return r!==void 0?C.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}};var vu=class{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}};var Iu=class{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(r!==null&&ci(r.mutation,i,rt.empty(),Se.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,Ae()).next(()=>r))}getLocalViewOfDocuments(e,t,r=Ae()){let i=Zt();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(o=>{let a=ks();return o.forEach((u,l)=>{a=a.insert(u,l.overlayedDocument)}),a}))}getOverlayedDocuments(e,t){let r=Zt();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,Ae()))}populateOverlays(e,t,r){let i=[];return r.forEach(o=>{t.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((a,u)=>{t.set(a,u)})})}computeViews(e,t,r,i){let o=qs(),a=ai(),u=function(){return ai()}();return t.forEach((l,d)=>{let y=r.get(d.key);i.has(d.key)&&(y===void 0||y.mutation instanceof _t)?o=o.insert(d.key,d):y!==void 0?(a.set(d.key,y.mutation.getFieldMask()),ci(y.mutation,d,y.mutation.getFieldMask(),Se.now())):a.set(d.key,rt.empty())}),this.recalculateAndSaveOverlays(e,o).next(l=>(l.forEach((d,y)=>a.set(d,y)),t.forEach((d,y)=>{var E;return u.set(d,new vu(y,(E=a.get(d))!==null&&E!==void 0?E:null))}),u))}recalculateAndSaveOverlays(e,t){let r=ai(),i=new Le((a,u)=>a-u),o=Ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(a=>{for(let u of a)u.keys().forEach(l=>{let d=t.get(l);if(d===null)return;let y=r.get(l)||rt.empty();y=u.applyToLocalView(d,y),r.set(l,y);let E=(i.get(u.batchId)||Ae()).add(l);i=i.insert(u.batchId,E)})}).next(()=>{let a=[],u=i.getReverseIterator();for(;u.hasNext();){let l=u.getNext(),d=l.key,y=l.value,E=Up();y.forEach(b=>{if(!o.has(b)){let D=Wp(t.get(b),r.get(b));D!==null&&E.set(b,D),o=o.add(b)}}),a.push(this.documentOverlayCache.saveOverlays(e,d,E))}return C.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r,i){return function(a){return B.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Tw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r,i):this.getDocumentsMatchingCollectionQuery(e,t,r,i)}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(o=>{let a=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-o.size):C.resolve(Zt()),u=-1,l=o;return a.next(d=>C.forEach(d,(y,E)=>(u<E.largestBatchId&&(u=E.largestBatchId),o.get(y)?C.resolve():this.remoteDocumentCache.getEntry(e,y).next(b=>{l=l.insert(y,b)}))).next(()=>this.populateOverlays(e,d,o)).next(()=>this.computeViews(e,l,d,Ae())).next(y=>({batchId:u,changes:Fp(y)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new B(t)).next(r=>{let i=ks();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r,i){let o=t.collectionGroup,a=ks();return this.indexManager.getCollectionParents(e,o).next(u=>C.forEach(u,l=>{let d=function(E,b){return new Kn(b,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)}(t,l.child(o));return this.getDocumentsMatchingCollectionQuery(e,d,r,i).next(y=>{y.forEach((E,b)=>{a=a.insert(E,b)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(e,t,r,i){let o;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(a=>(o=a,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,o,i))).next(a=>{o.forEach((l,d)=>{let y=d.getKey();a.get(y)===null&&(a=a.insert(y,zn.newInvalidDocument(y)))});let u=ks();return a.forEach((l,d)=>{let y=o.get(l);y!==void 0&&ci(y.mutation,d,rt.empty(),Se.now()),ol(t,d)&&(u=u.insert(l,d))}),u})}};var wu=class{constructor(e){this.serializer=e,this.hr=new Map,this.Pr=new Map}getBundleMetadata(e,t){return C.resolve(this.hr.get(t))}saveBundleMetadata(e,t){return this.hr.set(t.id,function(i){return{id:i.id,version:i.version,createTime:Fn(i.createTime)}}(t)),C.resolve()}getNamedQuery(e,t){return C.resolve(this.Pr.get(t))}saveNamedQuery(e,t){return this.Pr.set(t.name,function(i){return{name:i.name,query:Jw(i.bundledQuery),readTime:Fn(i.readTime)}}(t)),C.resolve()}};var Eu=class{constructor(){this.overlays=new Le(B.comparator),this.Ir=new Map}getOverlay(e,t){return C.resolve(this.overlays.get(t))}getOverlays(e,t){let r=Zt();return C.forEach(t,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,o)=>{this.ht(e,t,o)}),C.resolve()}removeOverlaysForBatchId(e,t,r){let i=this.Ir.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.Ir.delete(r)),C.resolve()}getOverlaysForCollection(e,t,r){let i=Zt(),o=t.length+1,a=new B(t.child("")),u=this.overlays.getIteratorFrom(a);for(;u.hasNext();){let l=u.getNext().value,d=l.getKey();if(!t.isPrefixOf(d.path))break;d.path.length===o&&l.largestBatchId>r&&i.set(l.getKey(),l)}return C.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let o=new Le((d,y)=>d-y),a=this.overlays.getIterator();for(;a.hasNext();){let d=a.getNext().value;if(d.getKey().getCollectionGroup()===t&&d.largestBatchId>r){let y=o.get(d.largestBatchId);y===null&&(y=Zt(),o=o.insert(d.largestBatchId,y)),y.set(d.getKey(),d)}}let u=Zt(),l=o.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((d,y)=>u.set(d,y)),!(u.size()>=i)););return C.resolve(u)}ht(e,t,r){let i=this.overlays.get(r.key);if(i!==null){let a=this.Ir.get(i.largestBatchId).delete(r.key);this.Ir.set(i.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new lu(t,r));let o=this.Ir.get(t);o===void 0&&(o=Ae(),this.Ir.set(t,o)),this.Ir.set(t,o.add(r.key))}};var Tu=class{constructor(){this.sessionToken=yt.EMPTY_BYTE_STRING}getSessionToken(e){return C.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,C.resolve()}};var di=class{constructor(){this.Tr=new Pe(oe.Er),this.dr=new Pe(oe.Ar)}isEmpty(){return this.Tr.isEmpty()}addReference(e,t){let r=new oe(e,t);this.Tr=this.Tr.add(r),this.dr=this.dr.add(r)}Rr(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.Vr(new oe(e,t))}mr(e,t){e.forEach(r=>this.removeReference(r,t))}gr(e){let t=new B(new ge([])),r=new oe(t,e),i=new oe(t,e+1),o=[];return this.dr.forEachInRange([r,i],a=>{this.Vr(a),o.push(a.key)}),o}pr(){this.Tr.forEach(e=>this.Vr(e))}Vr(e){this.Tr=this.Tr.delete(e),this.dr=this.dr.delete(e)}yr(e){let t=new B(new ge([])),r=new oe(t,e),i=new oe(t,e+1),o=Ae();return this.dr.forEachInRange([r,i],a=>{o=o.add(a.key)}),o}containsKey(e){let t=new oe(e,0),r=this.Tr.firstAfterOrEqual(t);return r!==null&&e.isEqual(r.key)}},oe=class{constructor(e,t){this.key=e,this.wr=t}static Er(e,t){return B.comparator(e.key,t.key)||Y(e.wr,t.wr)}static Ar(e,t){return Y(e.wr,t.wr)||B.comparator(e.key,t.key)}};var Au=class{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Sr=1,this.br=new Pe(oe.Er)}checkEmpty(e){return C.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,r,i){let o=this.Sr;this.Sr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let a=new cu(o,t,r,i);this.mutationQueue.push(a);for(let u of i)this.br=this.br.add(new oe(u.key,o)),this.indexManager.addToCollectionParentIndex(e,u.key.path.popLast());return C.resolve(a)}lookupMutationBatch(e,t){return C.resolve(this.Dr(t))}getNextMutationBatchAfterBatchId(e,t){let r=t+1,i=this.vr(r),o=i<0?0:i;return C.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return C.resolve(this.mutationQueue.length===0?-1:this.Sr-1)}getAllMutationBatches(e){return C.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){let r=new oe(t,0),i=new oe(t,Number.POSITIVE_INFINITY),o=[];return this.br.forEachInRange([r,i],a=>{let u=this.Dr(a.wr);o.push(u)}),C.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Pe(Y);return t.forEach(i=>{let o=new oe(i,0),a=new oe(i,Number.POSITIVE_INFINITY);this.br.forEachInRange([o,a],u=>{r=r.add(u.wr)})}),C.resolve(this.Cr(r))}getAllMutationBatchesAffectingQuery(e,t){let r=t.path,i=r.length+1,o=r;B.isDocumentKey(o)||(o=o.child(""));let a=new oe(new B(o),0),u=new Pe(Y);return this.br.forEachWhile(l=>{let d=l.key.path;return!!r.isPrefixOf(d)&&(d.length===i&&(u=u.add(l.wr)),!0)},a),C.resolve(this.Cr(u))}Cr(e){let t=[];return e.forEach(r=>{let i=this.Dr(r);i!==null&&t.push(i)}),t}removeMutationBatch(e,t){ie(this.Fr(t.batchId,"removed")===0),this.mutationQueue.shift();let r=this.br;return C.forEach(t.mutations,i=>{let o=new oe(i.key,t.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.br=r})}On(e){}containsKey(e,t){let r=new oe(t,0),i=this.br.firstAfterOrEqual(r);return C.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,C.resolve()}Fr(e,t){return this.vr(e)}vr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Dr(e){let t=this.vr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}};var Su=class{constructor(e){this.Mr=e,this.docs=function(){return new Le(B.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){let r=t.key,i=this.docs.get(r),o=i?i.size:0,a=this.Mr(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:a}),this.size+=a-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){let t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){let r=this.docs.get(t);return C.resolve(r?r.document.mutableCopy():zn.newInvalidDocument(t))}getEntries(e,t){let r=qs();return t.forEach(i=>{let o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():zn.newInvalidDocument(i))}),C.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let o=qs(),a=t.path,u=new B(a.child("")),l=this.docs.getIteratorFrom(u);for(;l.hasNext();){let{key:d,value:{document:y}}=l.getNext();if(!a.isPrefixOf(d.path))break;d.path.length>a.length+1||uw(cw(y),r)<=0||(i.has(y.key)||ol(t,y))&&(o=o.insert(y.key,y.mutableCopy()))}return C.resolve(o)}getAllFromCollectionGroup(e,t,r,i){q()}Or(e,t){return C.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new bu(this)}getSize(e){return C.resolve(this.size)}},bu=class extends _u{constructor(e){super(),this.cr=e}applyChanges(e){let t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.cr.addEntry(e,i)):this.cr.removeEntry(r)}),C.waitFor(t)}getFromCache(e,t){return this.cr.getEntry(e,t)}getAllFromCache(e,t){return this.cr.getEntries(e,t)}};var Ru=class{constructor(e){this.persistence=e,this.Nr=new Mt(t=>il(t),sl),this.lastRemoteSnapshotVersion=re.min(),this.highestTargetId=0,this.Lr=0,this.Br=new di,this.targetCount=0,this.kr=hi.Bn()}forEachTarget(e,t){return this.Nr.forEach((r,i)=>t(i)),C.resolve()}getLastRemoteSnapshotVersion(e){return C.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return C.resolve(this.Lr)}allocateTargetId(e){return this.highestTargetId=this.kr.next(),C.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Lr&&(this.Lr=t),C.resolve()}Kn(e){this.Nr.set(e.target,e);let t=e.targetId;t>this.highestTargetId&&(this.kr=new hi(t),this.highestTargetId=t),e.sequenceNumber>this.Lr&&(this.Lr=e.sequenceNumber)}addTargetData(e,t){return this.Kn(t),this.targetCount+=1,C.resolve()}updateTargetData(e,t){return this.Kn(t),C.resolve()}removeTargetData(e,t){return this.Nr.delete(t.target),this.Br.gr(t.targetId),this.targetCount-=1,C.resolve()}removeTargets(e,t,r){let i=0,o=[];return this.Nr.forEach((a,u)=>{u.sequenceNumber<=t&&r.get(u.targetId)===null&&(this.Nr.delete(a),o.push(this.removeMatchingKeysForTargetId(e,u.targetId)),i++)}),C.waitFor(o).next(()=>i)}getTargetCount(e){return C.resolve(this.targetCount)}getTargetData(e,t){let r=this.Nr.get(t)||null;return C.resolve(r)}addMatchingKeys(e,t,r){return this.Br.Rr(t,r),C.resolve()}removeMatchingKeys(e,t,r){this.Br.mr(t,r);let i=this.persistence.referenceDelegate,o=[];return i&&t.forEach(a=>{o.push(i.markPotentiallyOrphaned(e,a))}),C.waitFor(o)}removeMatchingKeysForTargetId(e,t){return this.Br.gr(t),C.resolve()}getMatchingKeysForTargetId(e,t){let r=this.Br.yr(t);return C.resolve(r)}containsKey(e,t){return C.resolve(this.Br.containsKey(t))}};var Cu=class{constructor(e,t){this.qr={},this.overlays={},this.Qr=new dw(0),this.Kr=!1,this.Kr=!0,this.$r=new Tu,this.referenceDelegate=e(this),this.Ur=new Ru(this),this.indexManager=new mu,this.remoteDocumentCache=function(i){return new Su(i)}(r=>this.referenceDelegate.Wr(r)),this.serializer=new gu(t),this.Gr=new wu(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Kr=!1,Promise.resolve()}get started(){return this.Kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Eu,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.qr[e.toKey()];return r||(r=new Au(t,this.referenceDelegate),this.qr[e.toKey()]=r),r}getGlobalsCache(){return this.$r}getTargetCache(){return this.Ur}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Gr}runTransaction(e,t,r){x("MemoryPersistence","Starting transaction:",e);let i=new Pu(this.Qr.next());return this.referenceDelegate.zr(),r(i).next(o=>this.referenceDelegate.jr(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Hr(e,t){return C.or(Object.values(this.qr).map(r=>()=>r.containsKey(e,t)))}},Pu=class extends jc{constructor(e){super(),this.currentSequenceNumber=e}},Du=class n{constructor(e){this.persistence=e,this.Jr=new di,this.Yr=null}static Zr(e){return new n(e)}get Xr(){if(this.Yr)return this.Yr;throw q()}addReference(e,t,r){return this.Jr.addReference(r,t),this.Xr.delete(r.toString()),C.resolve()}removeReference(e,t,r){return this.Jr.removeReference(r,t),this.Xr.add(r.toString()),C.resolve()}markPotentiallyOrphaned(e,t){return this.Xr.add(t.toString()),C.resolve()}removeTarget(e,t){this.Jr.gr(t.targetId).forEach(i=>this.Xr.add(i.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(o=>this.Xr.add(o.toString()))}).next(()=>r.removeTargetData(e,t))}zr(){this.Yr=new Set}jr(e){let t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return C.forEach(this.Xr,r=>{let i=B.fromPath(r);return this.ei(e,i).next(o=>{o||t.removeEntry(i,re.min())})}).next(()=>(this.Yr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ei(e,t).next(r=>{r?this.Xr.delete(t.toString()):this.Xr.add(t.toString())})}Wr(e){return 0}ei(e,t){return C.or([()=>C.resolve(this.Jr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Hr(e,t)])}};var ku=class n{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.$i=r,this.Ui=i}static Wi(e,t){let r=Ae(),i=Ae();for(let o of t.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new n(e,t.fromCache,r,i)}};var Nu=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}};var Ou=class{constructor(){this.Gi=!1,this.zi=!1,this.ji=100,this.Hi=function(){return _f()?8:hw(Ve())>0?6:4}()}initialize(e,t){this.Ji=e,this.indexManager=t,this.Gi=!0}getDocumentsMatchingQuery(e,t,r,i){let o={result:null};return this.Yi(e,t).next(a=>{o.result=a}).next(()=>{if(!o.result)return this.Zi(e,t,i,r).next(a=>{o.result=a})}).next(()=>{if(o.result)return;let a=new Nu;return this.Xi(e,t,a).next(u=>{if(o.result=u,this.zi)return this.es(e,t,a,u.size)})}).next(()=>o.result)}es(e,t,r,i){return r.documentReadCount<this.ji?(ri()<=$.DEBUG&&x("QueryEngine","SDK will not create cache indexes for query:",ii(t),"since it only creates cache indexes for collection contains","more than or equal to",this.ji,"documents"),C.resolve()):(ri()<=$.DEBUG&&x("QueryEngine","Query:",ii(t),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Hi*i?(ri()<=$.DEBUG&&x("QueryEngine","The SDK decides to create cache indexes for query:",ii(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,en(t))):C.resolve())}Yi(e,t){if(up(t))return C.resolve(null);let r=en(t);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(t.limit!==null&&i===1&&(t=iu(t,null,"F"),r=en(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{let a=Ae(...o);return this.Ji.getDocuments(e,a).next(u=>this.indexManager.getMinOffset(e,r).next(l=>{let d=this.ts(t,u);return this.ns(t,d,a,l.readTime)?this.Yi(e,iu(t,null,"F")):this.rs(e,d,t,l)}))})))}Zi(e,t,r,i){return up(t)||i.isEqual(re.min())?C.resolve(null):this.Ji.getDocuments(e,r).next(o=>{let a=this.ts(t,o);return this.ns(t,a,r,i)?C.resolve(null):(ri()<=$.DEBUG&&x("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ii(t)),this.rs(e,a,t,aw(i,-1)).next(u=>u))})}ts(e,t){let r=new Pe(Sw(e));return t.forEach((i,o)=>{ol(e,o)&&(r=r.add(o))}),r}ns(e,t,r,i){if(e.limit===null)return!1;if(r.size!==t.size)return!0;let o=e.limitType==="F"?t.last():t.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Xi(e,t,r){return ri()<=$.DEBUG&&x("QueryEngine","Using full collection scan to execute query:",ii(t)),this.Ji.getDocumentsMatchingQuery(e,t,sn.min(),r)}rs(e,t,r,i){return this.Ji.getDocumentsMatchingQuery(e,r,i).next(o=>(t.forEach(a=>{o=o.insert(a.key,a)}),o))}};var xu=class{constructor(e,t,r,i){this.persistence=e,this.ss=t,this.serializer=i,this.os=new Le(Y),this._s=new Mt(o=>il(o),sl),this.us=new Map,this.cs=e.getRemoteDocumentCache(),this.Ur=e.getTargetCache(),this.Gr=e.getBundleCache(),this.ls(r)}ls(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Iu(this.cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.cs.setIndexManager(this.indexManager),this.ss.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.os))}};function Yw(n,e,t,r){return new xu(n,e,t,r)}function Jp(n,e){return S(this,null,function*(){let t=Z(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,t.ls(e),t.mutationQueue.getAllMutationBatches(r))).next(o=>{let a=[],u=[],l=Ae();for(let d of i){a.push(d.batchId);for(let y of d.mutations)l=l.add(y.key)}for(let d of o){u.push(d.batchId);for(let y of d.mutations)l=l.add(y.key)}return t.localDocuments.getDocuments(r,l).next(d=>({hs:d,removedBatchIds:a,addedBatchIds:u}))})})})}function Xw(n,e){let t=Z(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{let i=e.batch.keys(),o=t.cs.newChangeBuffer({trackRemovals:!0});return function(u,l,d,y){let E=d.batch,b=E.keys(),D=C.resolve();return b.forEach(k=>{D=D.next(()=>y.getEntry(l,k)).next(V=>{let N=d.docVersions.get(k);ie(N!==null),V.version.compareTo(N)<0&&(E.applyToRemoteDocument(V,d),V.isValidDocument()&&(V.setReadTime(d.commitVersion),y.addEntry(V)))})}),D.next(()=>u.mutationQueue.removeMutationBatch(l,E))}(t,r,e,o).next(()=>o.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(u){let l=Ae();for(let d=0;d<u.mutationResults.length;++d)u.mutationResults[d].transformResults.length>0&&(l=l.add(u.batch.mutations[d].key));return l}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}function Zw(n){let e=Z(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Ur.getLastRemoteSnapshotVersion(t))}function eE(n,e){let t=Z(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}var Gs=class{constructor(){this.activeTargetIds=kw()}fs(e){this.activeTargetIds=this.activeTargetIds.add(e)}gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Vs(){let e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}};var Vu=class{constructor(){this.so=new Gs,this.oo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e,t=!0){return t&&this.so.fs(e),this.oo[e]||"not-current"}updateQueryState(e,t,r){this.oo[e]=t}removeLocalQueryTarget(e){this.so.gs(e)}isLocalQueryTarget(e){return this.so.activeTargetIds.has(e)}clearQueryState(e){delete this.oo[e]}getAllActiveQueryTargets(){return this.so.activeTargetIds}isActiveQueryTarget(e){return this.so.activeTargetIds.has(e)}start(){return this.so=new Gs,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}};var Mu=class{_o(e){}shutdown(){}};var Ws=class{constructor(){this.ao=()=>this.uo(),this.co=()=>this.lo(),this.ho=[],this.Po()}_o(e){this.ho.push(e)}shutdown(){window.removeEventListener("online",this.ao),window.removeEventListener("offline",this.co)}Po(){window.addEventListener("online",this.ao),window.addEventListener("offline",this.co)}uo(){x("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(let e of this.ho)e(0)}lo(){x("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(let e of this.ho)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}};var Ns=null;function Nc(){return Ns===null?Ns=function(){return 268435456+Math.round(2147483648*Math.random())}():Ns++,"0x"+Ns.toString(16)}var tE={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};var Lu=class{constructor(e){this.Io=e.Io,this.To=e.To}Eo(e){this.Ao=e}Ro(e){this.Vo=e}mo(e){this.fo=e}onMessage(e){this.po=e}close(){this.To()}send(e){this.Io(e)}yo(){this.Ao()}wo(){this.Vo()}So(e){this.fo(e)}bo(e){this.po(e)}};var Te="WebChannelConnection",Fu=class extends class{constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;let r=t.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Do=r+"://"+t.host,this.vo=`projects/${i}/databases/${o}`,this.Co=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Fo(){return!1}Mo(t,r,i,o,a){let u=Nc(),l=this.xo(t,r.toUriEncodedString());x("RestConnection",`Sending RPC '${t}' ${u}:`,l,i);let d={"google-cloud-resource-prefix":this.vo,"x-goog-request-params":this.Co};return this.Oo(d,o,a),this.No(t,l,d,i).then(y=>(x("RestConnection",`Received RPC '${t}' ${u}: `,y),y),y=>{throw Vs("RestConnection",`RPC '${t}' ${u} failed with error: `,y,"url: ",l,"request:",i),y})}Lo(t,r,i,o,a,u){return this.Mo(t,r,i,o,a)}Oo(t,r,i){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Yn}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,a)=>t[a]=o),i&&i.headers.forEach((o,a)=>t[a]=o)}xo(t,r){let i=tE[t];return`${this.Do}/v1/${r}:${i}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}No(e,t,r,i){let o=Nc();return new Promise((a,u)=>{let l=new Rc;l.setWithCredentials(!0),l.listenOnce(Cc.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case ni.NO_ERROR:let y=l.getResponseJson();x(Te,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(y)),a(y);break;case ni.TIMEOUT:x(Te,`RPC '${e}' ${o} timed out`),u(new M(R.DEADLINE_EXCEEDED,"Request time out"));break;case ni.HTTP_ERROR:let E=l.getStatus();if(x(Te,`RPC '${e}' ${o} failed with status:`,E,"response text:",l.getResponseText()),E>0){let b=l.getResponseJson();Array.isArray(b)&&(b=b[0]);let D=b?.error;if(D&&D.status&&D.message){let k=function(N){let G=N.toLowerCase().replace(/_/g,"-");return Object.values(R).indexOf(G)>=0?G:R.UNKNOWN}(D.status);u(new M(k,D.message))}else u(new M(R.UNKNOWN,"Server responded with status "+l.getStatus()))}else u(new M(R.UNAVAILABLE,"Connection failed."));break;default:q()}}finally{x(Te,`RPC '${e}' ${o} completed.`)}});let d=JSON.stringify(i);x(Te,`RPC '${e}' ${o} sending request:`,i),l.send(t,"POST",d,r,15)})}Bo(e,t,r){let i=Nc(),o=[this.Do,"/","google.firestore.v1.Firestore","/",e,"/channel"],a=kc(),u=Dc(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},d=this.longPollingOptions.timeoutSeconds;d!==void 0&&(l.longPollingTimeout=Math.round(1e3*d)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Oo(l.initMessageHeaders,t,r),l.encodeInitMessageHeaders=!0;let y=o.join("");x(Te,`Creating RPC '${e}' stream ${i}: ${y}`,l);let E=a.createWebChannel(y,l),b=!1,D=!1,k=new Lu({Io:N=>{D?x(Te,`Not sending because RPC '${e}' stream ${i} is closed:`,N):(b||(x(Te,`Opening RPC '${e}' stream ${i} transport.`),E.open(),b=!0),x(Te,`RPC '${e}' stream ${i} sending:`,N),E.send(N))},To:()=>E.close()}),V=(N,G,Q)=>{N.listen(G,K=>{try{Q(K)}catch(ce){setTimeout(()=>{throw ce},0)}})};return V(E,Vn.EventType.OPEN,()=>{D||(x(Te,`RPC '${e}' stream ${i} transport opened.`),k.yo())}),V(E,Vn.EventType.CLOSE,()=>{D||(D=!0,x(Te,`RPC '${e}' stream ${i} transport closed`),k.So())}),V(E,Vn.EventType.ERROR,N=>{D||(D=!0,Vs(Te,`RPC '${e}' stream ${i} transport errored:`,N),k.So(new M(R.UNAVAILABLE,"The operation could not be completed")))}),V(E,Vn.EventType.MESSAGE,N=>{var G;if(!D){let Q=N.data[0];ie(!!Q);let K=Q,ce=K.error||((G=K[0])===null||G===void 0?void 0:G.error);if(ce){x(Te,`RPC '${e}' stream ${i} received error:`,ce);let He=ce.status,ue=function(m){let _=se[m];if(_!==void 0)return Fw(_)}(He),I=ce.message;ue===void 0&&(ue=R.INTERNAL,I="Unknown error status: "+He+" with message "+ce.message),D=!0,k.So(new M(ue,I)),E.close()}else x(Te,`RPC '${e}' stream ${i} received:`,Q),k.bo(Q)}}),V(u,Pc.STAT_EVENT,N=>{N.stat===Ps.PROXY?x(Te,`RPC '${e}' stream ${i} detected buffering proxy`):N.stat===Ps.NOPROXY&&x(Te,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{k.wo()},0),k}};function Oc(){return typeof document<"u"?document:null}function ro(n){return new hu(n,!0)}var Ks=class{constructor(e,t,r=1e3,i=1.5,o=6e4){this.ui=e,this.timerId=t,this.ko=r,this.qo=i,this.Qo=o,this.Ko=0,this.$o=null,this.Uo=Date.now(),this.reset()}reset(){this.Ko=0}Wo(){this.Ko=this.Qo}Go(e){this.cancel();let t=Math.floor(this.Ko+this.zo()),r=Math.max(0,Date.now()-this.Uo),i=Math.max(0,t-r);i>0&&x("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Ko} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.$o=this.ui.enqueueAfterDelay(this.timerId,i,()=>(this.Uo=Date.now(),e())),this.Ko*=this.qo,this.Ko<this.ko&&(this.Ko=this.ko),this.Ko>this.Qo&&(this.Ko=this.Qo)}jo(){this.$o!==null&&(this.$o.skipDelay(),this.$o=null)}cancel(){this.$o!==null&&(this.$o.cancel(),this.$o=null)}zo(){return(Math.random()-.5)*this.Ko}};var Uu=class{constructor(e,t,r,i,o,a,u,l){this.ui=e,this.Ho=r,this.Jo=i,this.connection=o,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=u,this.listener=l,this.state=0,this.Yo=0,this.Zo=null,this.Xo=null,this.stream=null,this.e_=0,this.t_=new Ks(e,t)}n_(){return this.state===1||this.state===5||this.r_()}r_(){return this.state===2||this.state===3}start(){this.e_=0,this.state!==4?this.auth():this.i_()}stop(){return S(this,null,function*(){this.n_()&&(yield this.close(0))})}s_(){this.state=0,this.t_.reset()}o_(){this.r_()&&this.Zo===null&&(this.Zo=this.ui.enqueueAfterDelay(this.Ho,6e4,()=>this.__()))}a_(e){this.u_(),this.stream.send(e)}__(){return S(this,null,function*(){if(this.r_())return this.close(0)})}u_(){this.Zo&&(this.Zo.cancel(),this.Zo=null)}c_(){this.Xo&&(this.Xo.cancel(),this.Xo=null)}close(e,t){return S(this,null,function*(){this.u_(),this.c_(),this.t_.cancel(),this.Yo++,e!==4?this.t_.reset():t&&t.code===R.RESOURCE_EXHAUSTED?(rn(t.toString()),rn("Using maximum backoff delay to prevent overloading the backend."),this.t_.Wo()):t&&t.code===R.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.l_(),this.stream.close(),this.stream=null),this.state=e,yield this.listener.mo(t)})}l_(){}auth(){this.state=1;let e=this.h_(this.Yo),t=this.Yo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Yo===t&&this.P_(r,i)},r=>{e(()=>{let i=new M(R.UNKNOWN,"Fetching auth token failed: "+r.message);return this.I_(i)})})}P_(e,t){let r=this.h_(this.Yo);this.stream=this.T_(e,t),this.stream.Eo(()=>{r(()=>this.listener.Eo())}),this.stream.Ro(()=>{r(()=>(this.state=2,this.Xo=this.ui.enqueueAfterDelay(this.Jo,1e4,()=>(this.r_()&&(this.state=3),Promise.resolve())),this.listener.Ro()))}),this.stream.mo(i=>{r(()=>this.I_(i))}),this.stream.onMessage(i=>{r(()=>++this.e_==1?this.E_(i):this.onNext(i))})}i_(){this.state=5,this.t_.Go(()=>S(this,null,function*(){this.state=0,this.start()}))}I_(e){return x("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}h_(e){return t=>{this.ui.enqueueAndForget(()=>this.Yo===e?t():(x("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}};var Bu=class extends Uu{constructor(e,t,r,i,o,a){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,a),this.serializer=o}get V_(){return this.e_>0}start(){this.lastStreamToken=void 0,super.start()}l_(){this.V_&&this.m_([])}T_(e,t){return this.connection.Bo("Write",e,t)}E_(e){return ie(!!e.streamToken),this.lastStreamToken=e.streamToken,ie(!e.writeResults||e.writeResults.length===0),this.listener.f_()}onNext(e){ie(!!e.streamToken),this.lastStreamToken=e.streamToken,this.t_.reset();let t=Ww(e.writeResults,e.commitTime),r=Fn(e.commitTime);return this.listener.g_(r,t)}p_(){let e={};e.database=jw(this.serializer),this.a_(e)}m_(e){let t={streamToken:this.lastStreamToken,writes:e.map(r=>Gw(this.serializer,r))};this.a_(t)}};var $u=class extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.y_=!1}w_(){if(this.y_)throw new M(R.FAILED_PRECONDITION,"The client has already been terminated.")}Mo(e,t,r,i){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Mo(e,fu(t,r),i,o,a)).catch(o=>{throw o.name==="FirebaseError"?(o.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new M(R.UNKNOWN,o.toString())})}Lo(e,t,r,i,o){return this.w_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,u])=>this.connection.Lo(e,fu(t,r),i,a,u,o)).catch(a=>{throw a.name==="FirebaseError"?(a.code===R.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new M(R.UNKNOWN,a.toString())})}terminate(){this.y_=!0,this.connection.terminate()}},qu=class{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.S_=0,this.b_=null,this.D_=!0}v_(){this.S_===0&&(this.C_("Unknown"),this.b_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.b_=null,this.F_("Backend didn't respond within 10 seconds."),this.C_("Offline"),Promise.resolve())))}M_(e){this.state==="Online"?this.C_("Unknown"):(this.S_++,this.S_>=1&&(this.x_(),this.F_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.C_("Offline")))}set(e){this.x_(),this.S_=0,e==="Online"&&(this.D_=!1),this.C_(e)}C_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}F_(e){let t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.D_?(rn(t),this.D_=!1):x("OnlineStateTracker",t)}x_(){this.b_!==null&&(this.b_.cancel(),this.b_=null)}};var ju=class{constructor(e,t,r,i,o){this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.O_=[],this.N_=new Map,this.L_=new Set,this.B_=[],this.k_=o,this.k_._o(a=>{r.enqueueAndForget(()=>S(this,null,function*(){_i(this)&&(x("RemoteStore","Restarting streams for network reachability change."),yield function(l){return S(this,null,function*(){let d=Z(l);d.L_.add(4),yield yi(d),d.q_.set("Unknown"),d.L_.delete(4),yield io(d)})}(this))}))}),this.q_=new qu(r,i)}};function io(n){return S(this,null,function*(){if(_i(n))for(let e of n.B_)yield e(!0)})}function yi(n){return S(this,null,function*(){for(let e of n.B_)yield e(!1)})}function _i(n){return Z(n).L_.size===0}function Yp(n,e,t){return S(this,null,function*(){if(!no(e))throw e;n.L_.add(1),yield yi(n),n.q_.set("Offline"),t||(t=()=>Zw(n.localStore)),n.asyncQueue.enqueueRetryable(()=>S(this,null,function*(){x("RemoteStore","Retrying IndexedDB access"),yield t(),n.L_.delete(1),yield io(n)}))})}function Xp(n,e){return e().catch(t=>Yp(n,t,e))}function so(n){return S(this,null,function*(){let e=Z(n),t=Lt(e),r=e.O_.length>0?e.O_[e.O_.length-1].batchId:-1;for(;nE(e);)try{let i=yield eE(e.localStore,r);if(i===null){e.O_.length===0&&t.o_();break}r=i.batchId,rE(e,i)}catch(i){yield Yp(e,i)}Zp(e)&&eg(e)})}function nE(n){return _i(n)&&n.O_.length<10}function rE(n,e){n.O_.push(e);let t=Lt(n);t.r_()&&t.V_&&t.m_(e.mutations)}function Zp(n){return _i(n)&&!Lt(n).n_()&&n.O_.length>0}function eg(n){Lt(n).start()}function iE(n){return S(this,null,function*(){Lt(n).p_()})}function sE(n){return S(this,null,function*(){let e=Lt(n);for(let t of n.O_)e.m_(t.mutations)})}function oE(n,e,t){return S(this,null,function*(){let r=n.O_.shift(),i=uu.from(r,e,t);yield Xp(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield so(n)})}function aE(n,e){return S(this,null,function*(){e&&Lt(n).V_&&(yield function(r,i){return S(this,null,function*(){if(function(a){return Lw(a)&&a!==R.ABORTED}(i.code)){let o=r.O_.shift();Lt(r).s_(),yield Xp(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),yield so(r)}})}(n,e)),Zp(n)&&eg(n)})}function gp(n,e){return S(this,null,function*(){let t=Z(n);t.asyncQueue.verifyOperationInProgress(),x("RemoteStore","RemoteStore received new credentials");let r=_i(t);t.L_.add(3),yield yi(t),r&&t.q_.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.L_.delete(3),yield io(t)})}function cE(n,e){return S(this,null,function*(){let t=Z(n);e?(t.L_.delete(2),yield io(t)):e||(t.L_.add(2),yield yi(t),t.q_.set("Unknown"))})}function Lt(n){return n.U_||(n.U_=function(t,r,i){let o=Z(t);return o.w_(),new Bu(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(n.datastore,n.asyncQueue,{Eo:()=>Promise.resolve(),Ro:iE.bind(null,n),mo:aE.bind(null,n),f_:sE.bind(null,n),g_:oE.bind(null,n)}),n.B_.push(e=>S(this,null,function*(){e?(n.U_.s_(),yield so(n)):(yield n.U_.stop(),n.O_.length>0&&(x("RemoteStore",`Stopping write stream with ${n.O_.length} pending writes`),n.O_=[]))}))),n.U_}var zu=class n{constructor(e,t,r,i,o){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new gt,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,r,i,o){let a=Date.now()+r,u=new n(e,t,a,i,o);return u.start(r),u}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new M(R.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function tg(n,e){if(rn("AsyncQueue",`${e}: ${n}`),no(n))return new M(R.UNAVAILABLE,`${e}: ${n}`);throw n}var Gu=class{constructor(){this.queries=mp(),this.onlineState="Unknown",this.Y_=new Set}terminate(){(function(t,r){let i=Z(t),o=i.queries;i.queries=mp(),o.forEach((a,u)=>{for(let l of u.j_)l.onError(r)})})(this,new M(R.ABORTED,"Firestore shutting down"))}};function mp(){return new Mt(n=>Mp(n),Vp)}function uE(n){n.Y_.forEach(e=>{e.next()})}var yp,_p;(_p=yp||(yp={})).ea="default",_p.Cache="cache";var Wu=class{constructor(e,t,r,i,o,a){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=a,this.Ca={},this.Fa=new Mt(u=>Mp(u),Vp),this.Ma=new Map,this.xa=new Set,this.Oa=new Le(B.comparator),this.Na=new Map,this.La=new di,this.Ba={},this.ka=new Map,this.qa=hi.kn(),this.onlineState="Unknown",this.Qa=void 0}get isPrimaryClient(){return this.Qa===!0}};function lE(n,e,t){return S(this,null,function*(){let r=pE(n);try{let i=yield function(a,u){let l=Z(a),d=Se.now(),y=u.reduce((D,k)=>D.add(k.key),Ae()),E,b;return l.persistence.runTransaction("Locally write mutations","readwrite",D=>{let k=qs(),V=Ae();return l.cs.getEntries(D,y).next(N=>{k=N,k.forEach((G,Q)=>{Q.isValidDocument()||(V=V.add(G))})}).next(()=>l.localDocuments.getOverlayedDocuments(D,k)).next(N=>{E=N;let G=[];for(let Q of u){let K=Mw(Q,E.get(Q.key).overlayedDocument);K!=null&&G.push(new _t(Q.key,K,Pp(K.value.mapValue),tn.exists(!0)))}return l.mutationQueue.addMutationBatch(D,d,G,u)}).next(N=>{b=N;let G=N.applyToLocalDocumentSet(E,V);return l.documentOverlayCache.saveOverlays(D,N.batchId,G)})}).then(()=>({batchId:b.batchId,changes:Fp(E)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(a,u,l){let d=a.Ba[a.currentUser.toKey()];d||(d=new Le(Y)),d=d.insert(u,l),a.Ba[a.currentUser.toKey()]=d}(r,i.batchId,t),yield oo(r,i.changes),yield so(r.remoteStore)}catch(i){let o=tg(i,"Failed to persist write");t.reject(o)}})}function vp(n,e,t){let r=Z(n);if(r.isPrimaryClient&&t===0||!r.isPrimaryClient&&t===1){let i=[];r.Fa.forEach((o,a)=>{let u=a.view.Z_(e);u.snapshot&&i.push(u.snapshot)}),function(a,u){let l=Z(a);l.onlineState=u;let d=!1;l.queries.forEach((y,E)=>{for(let b of E.j_)b.Z_(u)&&(d=!0)}),d&&uE(l)}(r.eventManager,e),i.length&&r.Ca.d_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function hE(n,e){return S(this,null,function*(){let t=Z(n),r=e.batch.batchId;try{let i=yield Xw(t.localStore,e);rg(t,r,null),ng(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield oo(t,i)}catch(i){yield Ap(i)}})}function dE(n,e,t){return S(this,null,function*(){let r=Z(n);try{let i=yield function(a,u){let l=Z(a);return l.persistence.runTransaction("Reject batch","readwrite-primary",d=>{let y;return l.mutationQueue.lookupMutationBatch(d,u).next(E=>(ie(E!==null),y=E.keys(),l.mutationQueue.removeMutationBatch(d,E))).next(()=>l.mutationQueue.performConsistencyCheck(d)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(d,y,u)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(d,y)).next(()=>l.localDocuments.getDocuments(d,y))})}(r.localStore,e);rg(r,e,t),ng(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield oo(r,i)}catch(i){yield Ap(i)}})}function ng(n,e){(n.ka.get(e)||[]).forEach(t=>{t.resolve()}),n.ka.delete(e)}function rg(n,e,t){let r=Z(n),i=r.Ba[r.currentUser.toKey()];if(i){let o=i.get(e);o&&(t?o.reject(t):o.resolve(),i=i.remove(e)),r.Ba[r.currentUser.toKey()]=i}}function oo(n,e,t){return S(this,null,function*(){let r=Z(n),i=[],o=[],a=[];r.Fa.isEmpty()||(r.Fa.forEach((u,l)=>{a.push(r.Ka(l,e,t).then(d=>{var y;if((d||t)&&r.isPrimaryClient){let E=d?!d.fromCache:(y=t?.targetChanges.get(l.targetId))===null||y===void 0?void 0:y.current;r.sharedClientState.updateQueryState(l.targetId,E?"current":"not-current")}if(d){i.push(d);let E=ku.Wi(l.targetId,d);o.push(E)}}))}),yield Promise.all(a),r.Ca.d_(i),yield function(l,d){return S(this,null,function*(){let y=Z(l);try{yield y.persistence.runTransaction("notifyLocalViewChanges","readwrite",E=>C.forEach(d,b=>C.forEach(b.$i,D=>y.persistence.referenceDelegate.addReference(E,b.targetId,D)).next(()=>C.forEach(b.Ui,D=>y.persistence.referenceDelegate.removeReference(E,b.targetId,D)))))}catch(E){if(!no(E))throw E;x("LocalStore","Failed to update sequence numbers: "+E)}for(let E of d){let b=E.targetId;if(!E.fromCache){let D=y.os.get(b),k=D.snapshotVersion,V=D.withLastLimboFreeSnapshotVersion(k);y.os=y.os.insert(b,V)}}})}(r.localStore,o))})}function fE(n,e){return S(this,null,function*(){let t=Z(n);if(!t.currentUser.isEqual(e)){x("SyncEngine","User change. New user:",e.toKey());let r=yield Jp(t.localStore,e);t.currentUser=e,function(o,a){o.ka.forEach(u=>{u.forEach(l=>{l.reject(new M(R.CANCELLED,a))})}),o.ka.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield oo(t,r.hs)}})}function pE(n){let e=Z(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=hE.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=dE.bind(null,e),e}var Ip=(()=>{class n{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(t){return S(this,null,function*(){this.serializer=ro(t.databaseInfo.databaseId),this.sharedClientState=this.Wa(t),this.persistence=this.Ga(t),yield this.persistence.start(),this.localStore=this.za(t),this.gcScheduler=this.ja(t,this.localStore),this.indexBackfillerScheduler=this.Ha(t,this.localStore)})}ja(t,r){return null}Ha(t,r){return null}za(t){return Yw(this.persistence,new Ou,t.initialUser,this.serializer)}Ga(t){return new Cu(Du.Zr,this.serializer)}Wa(t){return new Vu}terminate(){return S(this,null,function*(){var t,r;(t=this.gcScheduler)===null||t===void 0||t.stop(),(r=this.indexBackfillerScheduler)===null||r===void 0||r.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return n.provider={build:()=>new n},n})();var gE=(()=>{class n{initialize(t,r){return S(this,null,function*(){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(r),this.remoteStore=this.createRemoteStore(r),this.eventManager=this.createEventManager(r),this.syncEngine=this.createSyncEngine(r,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>vp(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=fE.bind(null,this.syncEngine),yield cE(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(t){return function(){return new Gu}()}createDatastore(t){let r=ro(t.databaseInfo.databaseId),i=function(a){return new Fu(a)}(t.databaseInfo);return function(a,u,l,d){return new $u(a,u,l,d)}(t.authCredentials,t.appCheckCredentials,i,r)}createRemoteStore(t){return function(i,o,a,u,l){return new ju(i,o,a,u,l)}(this.localStore,this.datastore,t.asyncQueue,r=>vp(this.syncEngine,r,0),function(){return Ws.D()?new Ws:new Mu}())}createSyncEngine(t,r){return function(o,a,u,l,d,y,E){let b=new Wu(o,a,u,l,d,y);return E&&(b.Qa=!0),b}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,r)}terminate(){return S(this,null,function*(){var t,r;yield function(o){return S(this,null,function*(){let a=Z(o);x("RemoteStore","RemoteStore shutting down."),a.L_.add(5),yield yi(a),a.k_.shutdown(),a.q_.set("Unknown")})}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(r=this.eventManager)===null||r===void 0||r.terminate()})}}return n.provider={build:()=>new n},n})();var Ku=class{constructor(e,t,r,i,o){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=pe.UNAUTHENTICATED,this.clientId=Ls.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=o,this.authCredentials.start(r,a=>S(this,null,function*(){x("FirestoreClient","Received user=",a.uid),yield this.authCredentialListener(a),this.user=a})),this.appCheckCredentials.start(r,a=>(x("FirestoreClient","Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();let e=new gt;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>S(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){let r=tg(t,"Failed to shutdown persistence");e.reject(r)}})),e.promise}};function xc(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress(),x("FirestoreClient","Initializing OfflineComponentProvider");let t=n.configuration;yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(i=>S(this,null,function*(){r.isEqual(i)||(yield Jp(e.localStore,i),r=i)})),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e})}function wp(n,e){return S(this,null,function*(){n.asyncQueue.verifyOperationInProgress();let t=yield mE(n);x("FirestoreClient","Initializing OnlineComponentProvider"),yield e.initialize(t,n.configuration),n.setCredentialChangeListener(r=>gp(e.remoteStore,r)),n.setAppCheckTokenChangeListener((r,i)=>gp(e.remoteStore,i)),n._onlineComponents=e})}function mE(n){return S(this,null,function*(){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){x("FirestoreClient","Using user provided OfflineComponentProvider");try{yield xc(n,n._uninitializedComponentsProvider._offline)}catch(e){let t=e;if(!function(i){return i.name==="FirebaseError"?i.code===R.FAILED_PRECONDITION||i.code===R.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(t))throw t;Vs("Error using user provided cache. Falling back to memory cache: "+t),yield xc(n,new Ip)}}else x("FirestoreClient","Using default OfflineComponentProvider"),yield xc(n,new Ip);return n._offlineComponents})}function yE(n){return S(this,null,function*(){return n._onlineComponents||(n._uninitializedComponentsProvider?(x("FirestoreClient","Using user provided OnlineComponentProvider"),yield wp(n,n._uninitializedComponentsProvider._online)):(x("FirestoreClient","Using default OnlineComponentProvider"),yield wp(n,new gE))),n._onlineComponents})}function _E(n){return yE(n).then(e=>e.syncEngine)}function ig(n){let e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}var Ep=new Map;function vE(n,e,t){if(!t)throw new M(R.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function IE(n,e,t,r){if(e===!0&&r===!0)throw new M(R.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Tp(n){if(!B.isDocumentKey(n))throw new M(R.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function cl(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{let e=function(r){return r.constructor?r.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":q()}function Hu(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new M(R.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let t=cl(n);throw new M(R.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}var Hs=class{constructor(e){var t,r;if(e.host===void 0){if(e.ssl!==void 0)throw new M(R.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new M(R.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}IE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=ig((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new M(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new M(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new M(R.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}},fi=class{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hs({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new M(R.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new M(R.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hs(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new Vc;switch(r.type){case"firstParty":return new Uc(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new M(R.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return S(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){let r=Ep.get(t);r&&(x("ComponentProvider","Removing Datastore"),Ep.delete(t),r.terminate())}(this),Promise.resolve()}};function sg(n,e,t,r={}){var i;let o=(n=Hu(n,fi))._getSettings(),a=`${e}:${t}`;if(o.host!=="firestore.googleapis.com"&&o.host!==a&&Vs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},o),{host:a,ssl:!1})),r.mockUserToken){let u,l;if(typeof r.mockUserToken=="string")u=r.mockUserToken,l=pe.MOCK_USER;else{u=ff(r.mockUserToken,(i=n._app)===null||i===void 0?void 0:i.options.projectId);let d=r.mockUserToken.sub||r.mockUserToken.user_id;if(!d)throw new M(R.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new pe(d)}n._authCredentials=new Mc(new Ms(u,l))}}var Qu=class n{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new n(this.firestore,e,this._query)}},mt=class n{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pi(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new n(this.firestore,e,this._key)}},pi=class n extends Qu{constructor(e,t,r){super(e,t,Ew(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let e=this._path.popLast();return e.isEmpty()?null:new mt(this.firestore,null,new B(e))}withConverter(e){return new n(this.firestore,e,this._path)}};function og(n,e,...t){if(n=Ze(n),arguments.length===1&&(e=Ls.newId()),vE("doc","path",e),n instanceof fi){let r=ge.fromString(e,...t);return Tp(r),new mt(n,null,new B(r))}{if(!(n instanceof mt||n instanceof pi))throw new M(R.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let r=n._path.child(ge.fromString(e,...t));return Tp(r),new mt(n.firestore,n instanceof pi?n.converter:null,new B(r))}}var Qs=class{constructor(e=Promise.resolve()){this.Pu=[],this.Iu=!1,this.Tu=[],this.Eu=null,this.du=!1,this.Au=!1,this.Ru=[],this.t_=new Ks(this,"async_queue_retry"),this.Vu=()=>{let r=Oc();r&&x("AsyncQueue","Visibility state changed to "+r.visibilityState),this.t_.jo()},this.mu=e;let t=Oc();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.Vu)}get isShuttingDown(){return this.Iu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.fu(),this.gu(e)}enterRestrictedMode(e){if(!this.Iu){this.Iu=!0,this.Au=e||!1;let t=Oc();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.Vu)}}enqueue(e){if(this.fu(),this.Iu)return new Promise(()=>{});let t=new gt;return this.gu(()=>this.Iu&&this.Au?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Pu.push(e),this.pu()))}pu(){return S(this,null,function*(){if(this.Pu.length!==0){try{yield this.Pu[0](),this.Pu.shift(),this.t_.reset()}catch(e){if(!no(e))throw e;x("AsyncQueue","Operation failed with retryable error: "+e)}this.Pu.length>0&&this.t_.Go(()=>this.pu())}})}gu(e){let t=this.mu.then(()=>(this.du=!0,e().catch(r=>{this.Eu=r,this.du=!1;let i=function(a){let u=a.message||"";return a.stack&&(u=a.stack.includes(a.message)?a.stack:a.message+`
`+a.stack),u}(r);throw rn("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.du=!1,r))));return this.mu=t,t}enqueueAfterDelay(e,t,r){this.fu(),this.Ru.indexOf(e)>-1&&(t=0);let i=zu.createAndSchedule(this,e,t,r,o=>this.yu(o));return this.Tu.push(i),i}fu(){this.Eu&&q()}verifyOperationInProgress(){}wu(){return S(this,null,function*(){let e;do e=this.mu,yield e;while(e!==this.mu)})}Su(e){for(let t of this.Tu)if(t.timerId===e)return!0;return!1}bu(e){return this.wu().then(()=>{this.Tu.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(let t of this.Tu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.wu()})}Du(e){this.Ru.push(e)}yu(e){let t=this.Tu.indexOf(e);this.Tu.splice(t,1)}};var Js=class extends fi{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Qs,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return S(this,null,function*(){if(this._firestoreClient){let e=this._firestoreClient.terminate();this._queue=new Qs(e),this._firestoreClient=void 0,yield e}})}};function ag(n,e){let t=typeof n=="object"?n:Wr(),r=typeof n=="string"?n:e||"(default)",i=ac(t,"firestore").getImmediate({identifier:r});if(!i._initialized){let o=hf("firestore");o&&sg(i,...o)}return i}function wE(n){if(n._terminated)throw new M(R.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||EE(n),n._firestoreClient}function EE(n){var e,t,r;let i=n._freezeSettings(),o=function(u,l,d,y){return new Gc(u,l,d,y.host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,ig(y.experimentalLongPollingOptions),y.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,i);n._componentsProvider||!((t=i.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),n._firestoreClient=new Ku(n._authCredentials,n._appCheckCredentials,n._queue,o,n._componentsProvider&&function(u){let l=u?._online.build();return{_offline:u?._offline.build(l),_online:l}}(n._componentsProvider))}var Ys=class n{constructor(e){this._byteString=e}static fromBase64String(e){try{return new n(yt.fromBase64String(e))}catch(t){throw new M(R.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new n(yt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}};var Xs=class{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new M(R.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Me(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}};var gi=class{constructor(e){this._methodName=e}};var Zs=class{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new M(R.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new M(R.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Y(this._lat,e._lat)||Y(this._long,e._long)}};var eo=class{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let o=0;o<r.length;++o)if(r[o]!==i[o])return!1;return!0}(this._values,e._values)}};var TE=/^__.*__$/,Ju=class{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return this.fieldMask!==null?new _t(e,this.data,this.fieldMask,t,this.fieldTransforms):new un(e,this.data,t,this.fieldTransforms)}};function cg(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw q()}}var Yu=class n{constructor(e,t,r,i,o,a){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.vu(),this.fieldTransforms=o||[],this.fieldMask=a||[]}get path(){return this.settings.path}get Cu(){return this.settings.Cu}Fu(e){return new n(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Mu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.Ou(e),i}Nu(e){var t;let r=(t=this.path)===null||t===void 0?void 0:t.child(e),i=this.Fu({path:r,xu:!1});return i.vu(),i}Lu(e){return this.Fu({path:void 0,xu:!0})}Bu(e){return to(e,this.settings.methodName,this.settings.ku||!1,this.path,this.settings.qu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}vu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Ou(this.path.get(e))}Ou(e){if(e.length===0)throw this.Bu("Document fields must not be empty");if(cg(this.Cu)&&TE.test(e))throw this.Bu('Document fields cannot begin and end with "__"')}},Xu=class{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||ro(e)}Qu(e,t,r,i=!1){return new Yu({Cu:e,methodName:t,qu:r,path:Me.emptyPath(),xu:!1,ku:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function AE(n){let e=n._freezeSettings(),t=ro(n._databaseId);return new Xu(n._databaseId,!!e.ignoreUndefinedProperties,t)}function SE(n,e,t,r,i,o={}){let a=n.Qu(o.merge||o.mergeFields?2:0,e,t,i);dg("Data must be an object, but it was:",a,r);let u=lg(r,a),l,d;if(o.merge)l=new rt(a.fieldMask),d=a.fieldTransforms;else if(o.mergeFields){let y=[];for(let E of o.mergeFields){let b=bE(e,E,t);if(!a.contains(b))throw new M(R.INVALID_ARGUMENT,`Field '${b}' is specified in your field mask but missing from your input data.`);PE(y,b)||y.push(b)}l=new rt(y),d=a.fieldTransforms.filter(E=>l.covers(E.field))}else l=null,d=a.fieldTransforms;return new Ju(new nt(u),l,d)}var Zu=class n extends gi{constructor(e,t){super(e),this.$u=t}_toFieldTransform(e){let t=new cn(e.serializer,$p(e.serializer,this.$u));return new su(e.path,t)}isEqual(e){return e instanceof n&&this.$u===e.$u}};function ug(n,e){if(hg(n=Ze(n)))return dg("Unsupported field value:",e,n),lg(n,e);if(n instanceof gi)return function(r,i){if(!cg(i.Cu))throw i.Bu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Bu(`${r._methodName}() is not currently supported inside arrays`);let o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.xu&&e.Cu!==4)throw e.Bu("Nested arrays are not supported");return function(r,i){let o=[],a=0;for(let u of r){let l=ug(u,i.Lu(a));l==null&&(l={nullValue:"NULL_VALUE"}),o.push(l),a++}return{arrayValue:{values:o}}}(n,e)}return function(r,i){if((r=Ze(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $p(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){let o=Se.fromDate(r);return{timestampValue:du(i.serializer,o)}}if(r instanceof Se){let o=new Se(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:du(i.serializer,o)}}if(r instanceof Zs)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Ys)return{bytesValue:Uw(i.serializer,r._byteString)};if(r instanceof mt){let o=i.databaseId,a=r.firestore._databaseId;if(!a.isEqual(o))throw i.Bu(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Hp(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof eo)return function(a,u){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:a.toArray().map(l=>{if(typeof l!="number")throw u.Bu("VectorValues must only contain numeric values.");return al(u.serializer,l)})}}}}}}(r,i);throw i.Bu(`Unsupported field value: ${cl(r)}`)}(n,e)}function lg(n,e){let t={};return Sp(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):mi(n,(r,i)=>{let o=ug(i,e.Mu(r));o!=null&&(t[r]=o)}),{mapValue:{fields:t}}}function hg(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Se||n instanceof Zs||n instanceof Ys||n instanceof mt||n instanceof gi||n instanceof eo)}function dg(n,e,t){if(!hg(t)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(t)){let r=cl(t);throw r==="an object"?e.Bu(n+" a custom object"):e.Bu(n+" "+r)}}function bE(n,e,t){if((e=Ze(e))instanceof Xs)return e._internalPath;if(typeof e=="string")return CE(n,e);throw to("Field path arguments must be of type string or ",n,!1,void 0,t)}var RE=new RegExp("[~\\*/\\[\\]]");function CE(n,e,t){if(e.search(RE)>=0)throw to(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Xs(...e.split("."))._internalPath}catch{throw to(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function to(n,e,t,r,i){let o=r&&!r.isEmpty(),a=i!==void 0,u=`Function ${e}() called with invalid data`;t&&(u+=" (via `toFirestore()`)"),u+=". ";let l="";return(o||a)&&(l+=" (found",o&&(l+=` in field ${r}`),a&&(l+=` in document ${i}`),l+=")"),new M(R.INVALID_ARGUMENT,u+n+l)}function PE(n,e){return n.some(t=>t.isEqual(e))}function DE(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}function fg(n,e,t){n=Hu(n,mt);let r=Hu(n.firestore,Js),i=DE(n.converter,e,t);return kE(r,[SE(AE(r),"setDoc",n._key,i,n.converter!==null,t).toMutation(n._key,tn.none())])}function kE(n,e){return function(r,i){let o=new gt;return r.asyncQueue.enqueueAndForget(()=>S(this,null,function*(){return lE(yield _E(r),i,o)})),o.promise}(wE(n),e)}function pg(n){return new Zu("increment",n)}(function(e,t=!0){(function(i){Yn=i})(Nn),kt(new $e("firestore",(r,{instanceIdentifier:i,options:o})=>{let a=r.getProvider("app").getImmediate(),u=new Js(new Lc(r.getProvider("auth-internal")),new $c(r.getProvider("app-check-internal")),function(d,y){if(!Object.prototype.hasOwnProperty.apply(d.options,["projectId"]))throw new M(R.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Wc(d.options.projectId,y)}(a,i),a);return o=Object.assign({useFetchStreams:t},o),u._setSettings(o),u},"PUBLIC").setMultipleInstances(!0)),fe(np,"4.7.3",e),fe(np,"4.7.3","esm2017")})();var vi=class{constructor(e){return e}},gg="firestore",ul=class{constructor(){return Hr(gg)}};var ll=new _e("angularfire2.firestore-instances");function NE(n,e){let t=lc(gg,n,e);return t&&new vi(t)}function OE(n){return(e,t)=>{let r=e.runOutsideAngular(()=>n(t));return new vi(r)}}var xE={provide:ul,deps:[[new Qe,ll]]},VE={provide:vi,useFactory:NE,deps:[[new Qe,ll],Jt]};function Hb(n,...e){return fe("angularfire",xn.full,"fst"),yn([VE,xE,{provide:ll,useFactory:OE(n),multi:!0,deps:[ut,jt,Qr,Jr,[new Qe,Rs],[new Qe,Kr],...e]}])}var Qb=Nt(og,!0);var Jb=Nt(ag,!0);var Yb=Nt(pg,!0);var Xb=Nt(fg,!0);export{Sm as a,Xe as b,hd as c,nT as d,rT as e,iT as f,of as g,eA as h,tA as i,vi as j,Hb as k,Qb as l,Jb as m,Yb as n,Xb as o};
